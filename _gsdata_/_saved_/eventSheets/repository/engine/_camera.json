{
	"name": "_camera",
	"events": [
		{
			"eventType": "comment",
			"text": " \n\n   Ограничитель камеры в рамке локации и зум камеры"
		},
		{
			"eventType": "variable",
			"name": "zoom",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 129727216631850
		},
		{
			"eventType": "variable",
			"name": "zoomMin",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 368191484167299
		},
		{
			"eventType": "variable",
			"name": "gameTimescale",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 963159249168811
		},
		{
			"eventType": "variable",
			"name": "zoomMax",
			"type": "number",
			"initialValue": "3",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 665515575626682
		},
		{
			"eventType": "variable",
			"name": "frameN",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 807920451207301
		},
		{
			"eventType": "variable",
			"name": "lerpCoeff",
			"type": "number",
			"initialValue": "0.01",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 781079996352670
		},
		{
			"eventType": "comment",
			"text": "    параметры zoomMin zoomMax отвечают за зум в пределах фрейма. Примерный стандарт зума для камеры 1 и 1.5"
		},
		{
			"eventType": "variable",
			"name": "clampL",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 383909447872565
		},
		{
			"eventType": "variable",
			"name": "clampR",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 621388549683172
		},
		{
			"eventType": "variable",
			"name": "clampT",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 667388952700907
		},
		{
			"eventType": "variable",
			"name": "clampD",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 673532385091842
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"functionName": "reClamp",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 482598895822456,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "frame",
							"sid": 491579589948027,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "frameN"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 130559855113462,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.camindex"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 583749949643322,
							"parameters": {
								"variable": "clampL",
								"value": "frame.BBoxLeft+ViewportWidth(8)/2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 493088779776832,
							"parameters": {
								"variable": "clampR",
								"value": "frame.BBoxRight-ViewportWidth(8)/2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 635794850823960,
							"parameters": {
								"variable": "clampT",
								"value": "frame.BBoxTop+ViewportHeight(8)/2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 315070668464946,
							"parameters": {
								"variable": "clampD",
								"value": "frame.BBoxBottom-ViewportHeight(8)/2"
							}
						},
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 345440408190802,
							"parameters": {
								"x": "lerp(scrollx,clamp(camera.X,clampL,clampR),0.9)"
							}
						},
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 755853074340902,
							"parameters": {
								"y": "lerp(scrolly,clamp(camera.Y,clampT,clampD),0.9)"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 981056993792097,
							"disabled": true,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						}
					],
					"sid": 402249897799623
				}
			]
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"functionName": "reZoom",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 961234027302399,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "frame",
							"sid": 844912780261792,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "frameN"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 726908650010278,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 844191131358216,
							"parameters": {
								"variable": "zoomMin",
								"value": "max(OriginalViewportWidth/(Frame.BBoxRight-Frame.BBoxLeft),\nOriginalViewportHeight/(Frame.BBoxBottom-Frame.BBoxTop))"
							}
						},
						{
							"type": "comment",
							"text": "?"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 805823876832813,
							"parameters": {
								"variable": "zoomMin",
								"value": "clamp(zoomMin,camera.zoomLimitDown,camera.zoomLimitUp)"
							}
						}
					],
					"sid": 551008268115750,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 750915298220143,
									"parameters": {
										"first-value": "zoomMax",
										"comparison": 3,
										"second-value": "zoomMin"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 970476012618054,
									"parameters": {
										"variable": "zoomMax",
										"value": "zoomMin+0.1"
									}
								}
							],
							"sid": 220344442673577
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 103151620923306,
									"parameters": {
										"first-value": "zoom",
										"comparison": 2,
										"second-value": "zoomMin"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 609371277128798,
									"parameters": {
										"first-value": "zoom",
										"comparison": 4,
										"second-value": "zoomMax"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 510696315298688,
									"parameters": {
										"variable": "zoom",
										"value": "clamp(zoom,zoomMin,zoomMax)"
									}
								},
								{
									"type": "comment",
									"text": "?"
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 100561437952332,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoomCorr\"",
										"start-value": "LayoutScale",
										"end-value": "zoom",
										"time": "0",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 492845996404118,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "zoom",
										"time": "0",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 886143018746233,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 193325575305374
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "camera",
									"sid": 872396589254353,
									"parameters": {
										"instance-variable": "borders"
									}
								}
							],
							"actions": [
								{
									"callFunction": "reClamp",
									"sid": 874358269070624
								}
							],
							"sid": 172364220305079
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "  загрузка локации"
		},
		{
			"functionName": "gotoFrame",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "n",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 105187870405819
				},
				{
					"name": "portalUID",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"sid": 803203382343074
				},
				{
					"name": "name",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 871391454675761
				},
				{
					"name": "arrX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 743201907798650
				},
				{
					"name": "arrY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 327499147640235
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "frame",
					"sid": 855153447246859,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "aTools.n"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Булева блокирующая управление героем во время переходов"
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "aBook",
					"sid": 380163312210541,
					"parameters": {
						"instance-variable": "portalHero",
						"value": "true"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aTools",
					"sid": 408112501933587,
					"parameters": {
						"instance-variable": "location",
						"value": "frame.locationName"
					}
				},
				{
					"type": "comment",
					"text": "?"
				},
				{
					"id": "disableGroupsOfType",
					"objectClass": "groups",
					"sid": 695725098787358,
					"disabled": true,
					"parameters": {
						"groupType": "LayoutName"
					}
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 999153110354295,
					"parameters": {
						"group-name": "LayoutName&frame.locationName",
						"state": "activated"
					}
				},
				{
					"type": "comment",
					"text": "резервное имя группы"
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 757381354204145,
					"disabled": true,
					"parameters": {
						"group-name": "LayoutName&n",
						"state": "activated"
					}
				},
				{
					"type": "comment",
					"text": "?"
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 600935910899702,
					"disabled": true,
					"parameters": {
						"variable": "zoomMin",
						"value": "max(OriginalViewportWidth/(Frame.BBoxRight-Frame.BBoxLeft),\nOriginalViewportHeight/(Frame.BBoxBottom-Frame.BBoxTop))"
					}
				},
				{
					"type": "comment",
					"text": ""
				},
				{
					"id": "disableGroupsOfType",
					"objectClass": "groups",
					"sid": 704449209803829,
					"disabled": true,
					"parameters": {
						"groupType": "aTools.n=2|aTools.n=6?\"Perspective\":\"Isometric\""
					}
				},
				{
					"id": "enableGroupsOfType",
					"objectClass": "groups",
					"sid": 328806254936435,
					"disabled": true,
					"parameters": {
						"groupType": "aTools.n=2|aTools.n=6?\"Isometric\":\"Perspective\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aTools",
					"sid": 503682801664792,
					"disabled": true,
					"parameters": {
						"instance-variable": "cameraType",
						"value": "Self.n=1|Self.n=2|Self.n=6? \"cameraIsometric\" : \"cameraPerspective\""
					}
				}
			],
			"sid": 617413708471475,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 146369974217470,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.nOld"
							}
						}
					],
					"actions": [
						{
							"id": "callselffunction0",
							"objectClass": "camera",
							"sid": 593535883126508,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"onEndFrame\""
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 418406245032843,
							"disabled": true,
							"parameters": {
								"group-name": "aTools.n=2|aTools.n=6?\"cameraIsometric\":\"cameraPerspective\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 496768641862382,
							"disabled": true,
							"parameters": {
								"group-name": "aTools.n=2|aTools.n=6?\"speedIsometric\":\"speedPerspective\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 419224999909676,
							"disabled": true,
							"parameters": {
								"group-name": "aTools.n=2|aTools.n=6?\"cameraPerspective\":\"cameraIsometric\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 493539376268545,
							"disabled": true,
							"parameters": {
								"group-name": "aTools.n=2|aTools.n=6?\"speedPerspective\":\"speedIsometric\"",
								"state": "deactivated"
							}
						}
					],
					"sid": 202718182233576
				},
				{
					"eventType": "comment",
					"text": "Положение и анимация персонажей на старте локации берётся из их собственных переменных"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 476079961241548,
							"parameters": {
								"instance-variable": "name",
								"comparison": 1,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 771163371044527,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						}
					],
					"actions": [],
					"sid": 223677638484551,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 301865951238570,
									"parameters": {
										"instance-variable": "location",
										"comparison": 0,
										"value": "frame.locationName"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 126794880428581,
									"parameters": {
										"instance-variable": "location",
										"comparison": 0,
										"value": "\"zero\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 891320395478458,
									"parameters": {
										"instance-variable": "location",
										"comparison": 0,
										"value": "\"\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "person",
									"sid": 543022850771397,
									"parameters": {
										"animation": "Self.startAnimation=\"zero\"?Self.AnimationName: Self.startAnimation",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 554438801114718,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								}
							],
							"sid": 344842945663780,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 404655020236964,
											"parameters": {
												"instance-variable": "onBase"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 780317364172418,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "person.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "basis",
											"sid": 655808084644505,
											"parameters": {
												"x": "person.startX=0? Self.X : person.startX",
												"y": "person.startY=0? Self.Y : person.startY"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 137116783899374,
											"disabled": true,
											"parameters": {
												"instance-variable": "coeff",
												"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 777807896296647,
											"disabled": true,
											"parameters": {
												"instance-variable": "zScaleLikeHero",
												"value": "aBook.heroScaleCoeff"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 951605301107150,
											"parameters": {
												"instance-variable": "coeff",
												"value": "Self.startScaleCoeff*camera.heroScaleCoeff"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 554786899954636,
											"parameters": {
												"instance-variable": "zScaleLikeHero",
												"value": "camera.heroScaleCoeff"
											}
										}
									],
									"sid": 130472023767144
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 270549899434982,
											"parameters": {
												"instance-variable": "onBase"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "person",
											"sid": 172567024659287,
											"parameters": {
												"x": "Self.startX=0? Self.X : Self.startX",
												"y": "Self.startY=0? Self.Y : Self.startY"
											}
										}
									],
									"sid": 627395043634502
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": " перемещение к локации"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 218093857865350,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 528256436317801,
							"parameters": {
								"instance-variable": "followName",
								"value": "aBook.hero"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 171180575611371,
							"parameters": {
								"variable": "frameN",
								"value": "n"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 224123806942730,
							"parameters": {
								"instance-variable": "cameraType",
								"value": "camera.type"
							}
						},
						{
							"callFunction": "changeCameraGroup",
							"sid": 575820630163477
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 663690654233118,
							"parameters": {
								"instance-variable": "camindex",
								"value": "Self.n"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 197071833169029,
							"parameters": {
								"variable": "zoom",
								"value": "camera.selfZoomStart"
							}
						},
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 904599558293889,
							"parameters": {
								"scale": "camera.selfZoomStart"
							}
						},
						{
							"callFunction": "reZoom",
							"sid": 390528946626056
						},
						{
							"customAction": "zoomTo",
							"objectClass": "aIns",
							"sid": 607898695163035,
							"parameters": [
								false,
								false,
								false,
								"-1",
								true,
								false,
								false,
								"0",
								"0",
								"0",
								"0",
								"-1",
								false,
								false,
								"0.01",
								true,
								"-1",
								"\"zero\"",
								false,
								false,
								false,
								false,
								true,
								true,
								false,
								"0",
								"\"\""
							]
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 762403314016692,
							"disabled": true,
							"parameters": {
								"text": "\"goFrame!\""
							}
						},
						{
							"id": "start-timer",
							"objectClass": "cursor",
							"sid": 161094231309165,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "aBook.portalTime",
								"type": "once",
								"tag": "\"portalHero\""
							}
						},
						{
							"id": "set-animation",
							"objectClass": "buttCam",
							"sid": 448633735692785,
							"parameters": {
								"animation": "camera.followerMod",
								"from": "beginning"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 768011786750996,
							"disabled": true,
							"parameters": {
								"text": "\"goFrame!  \"&aTools.n&\" \"&portalUID&\" \""
							}
						},
						{
							"callFunction": "startFrame",
							"sid": 744101778391604,
							"parameters": [
								"aTools.n",
								"aTools.portalUID"
							]
						},
						{
							"id": "callselffunction0",
							"objectClass": "camera",
							"sid": 571416438061232,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"startFrame\""
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "cursor",
							"sid": 829220595831999,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"resize\""
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 688808589854295,
							"parameters": {
								"group-name": "\"calls\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 461211276377431,
							"parameters": {
								"group-name": "\"rbmDown\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 807365621350590,
							"parameters": {
								"group-name": "\"budo\"",
								"state": "deactivated"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 200984588424083,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "aIns",
							"sid": 519040500121209,
							"parameters": {
								"instance-variable": "onChangeLocation",
								"value": "false"
							}
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 374182739905883,
							"parameters": {
								"tag": "\"startFrame\""
							}
						},
						{
							"type": "comment",
							"text": "ставим в листе локации индивидуально"
						},
						{
							"customAction": "mouseBack",
							"objectClass": "aIns",
							"sid": 308602312961688,
							"disabled": true,
							"parameters": [
								true,
								true,
								true,
								true
							]
						}
					],
					"sid": 271971458667190
				},
				{
					"eventType": "comment",
					"text": "позиционирование героя"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "aTools",
							"sid": 593956056661066,
							"parameters": {
								"instance-variable": "portalUID",
								"comparison": 2,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 779621445979006,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 181295153445115,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 329447096382494,
							"disabled": true,
							"parameters": {
								"variable": "portalUID",
								"comparison": 2,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "heroArrival",
							"sid": 119143403070180,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "aTools.n"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "heroArrival",
							"sid": 883175462733299,
							"parameters": {
								"x": "arrX=0?Self.X:arrX",
								"y": "arrY=0?Self.Y:arrY"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 123472916566504,
							"disabled": true,
							"parameters": {
								"text": "arrX"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 222114992171349,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "basis",
							"sid": 332307199855334,
							"parameters": {
								"object": "heroArrival",
								"image-point-optional": "0"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "basis",
							"sid": 843313881413050,
							"parameters": {
								"angle": "heroArrival.Angle"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 290357919041764,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"groundUID\""
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 912003458046229,
							"disabled": true,
							"parameters": {
								"text": "\"goFrame!  \"&aTools.n&\" \"&camera.index"
							}
						}
					],
					"sid": 861325284000874
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 196738926408849
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aTools",
							"sid": 270292395107069,
							"parameters": {
								"instance-variable": "portalUID",
								"comparison": 1,
								"value": "-1"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 392969489223401,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "port",
							"sid": 649529140158514,
							"disabled": true,
							"parameters": {
								"instance-variable": "portIND",
								"comparison": 0,
								"value": "aaa.portIND"
							}
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "port",
							"sid": 452294985128526,
							"parameters": {
								"comparison": 0,
								"number": "aaa.portIND"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "port",
							"sid": 903109073816278,
							"parameters": {
								"instance-variable": "active",
								"value": "false"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 417866297879220,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "basis",
							"sid": 100024799068679,
							"parameters": {
								"object": "port",
								"image-point-optional": "0"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 464309900631276,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"groundUID\""
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 326652526088301,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"selfScale\""
							}
						},
						{
							"id": "instance-signal",
							"objectClass": "basis",
							"sid": 710536908754819,
							"parameters": {
								"tag": "\"portalArrival\""
							}
						},
						{
							"customAction": "anim",
							"objectClass": "aaa",
							"sid": 861606231664087,
							"parameters": [
								"\"portal\"",
								"4",
								"0",
								"\"zero\"",
								false,
								false,
								"basis.name",
								"-12",
								"14",
								true,
								"\"zero\""
							]
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 387833339940492,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "portal",
							"sid": 970157022770998,
							"parameters": {
								"instance-variable": "active",
								"value": "true"
							}
						}
					],
					"sid": 283221627281453
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 201698681179655
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aTools",
							"sid": 983764314146744,
							"parameters": {
								"instance-variable": "portalUID",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 296460329816606,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aTools.portName"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 308590246437600,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aTools.portName"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "portal",
							"sid": 105466458351316,
							"parameters": {
								"unique-id": "aTools.portalUID"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "map",
							"sid": 432886052522895,
							"parameters": {
								"unique-id": "aTools.portalUID"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 943316877596265,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "portal",
							"sid": 812818928367835,
							"parameters": {
								"instance-variable": "active",
								"value": "false"
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "basis",
							"sid": 796461777338537,
							"parameters": {
								"object": "portal",
								"image-point-optional": "0"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 713973515179712,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"groundUID\""
							}
						},
						{
							"customAction": "anim",
							"objectClass": "aaa",
							"sid": 748205325799903,
							"parameters": [
								"\"portal\"",
								"0",
								"0",
								"\"zero\"",
								false,
								false,
								"basis.name",
								"12",
								"0",
								false,
								"\"zero\""
							]
						},
						{
							"callFunction": "animPers",
							"sid": 466300680934535,
							"disabled": true,
							"parameters": [
								"hero.UID",
								"portal.noAnimation=1?person.AnimationName : portal.animation",
								"3",
								"14",
								"888",
								"0"
							]
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 211521746688230,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"portEnd\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 916476227844352,
							"disabled": true,
							"parameters": {
								"seconds": "0",
								"use-timescale": true
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 434338143223636,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"selfScale\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 791134363671110,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "portal",
							"sid": 803739833517475,
							"parameters": {
								"instance-variable": "active",
								"value": "true"
							}
						},
						{
							"id": "append-text",
							"objectClass": "help",
							"sid": 527575840892356,
							"disabled": true,
							"parameters": {
								"text": "\"portal\""
							}
						}
					],
					"sid": 557448893927250,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "portal",
									"sid": 561663949645999,
									"parameters": {
										"instance-variable": "FX"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "florPortalFX",
									"sid": 755814988366523,
									"parameters": {
										"x": "hero.X",
										"y": "hero.Y"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "florPortalFX",
									"sid": 170912444274749,
									"parameters": {
										"animation": "portal.FXanim",
										"from": "beginning"
									}
								}
							],
							"sid": 394284715899368,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "portal",
									"sid": 191917018833083,
									"parameters": {
										"instance-variable": "heroArrivalPoint"
									}
								}
							],
							"actions": [
								{
									"callFunction": "pfmt",
									"sid": 717702492766695,
									"parameters": [
										"basis.UID",
										"basis.name",
										"heroArrival.X",
										"heroArrival.Y",
										"1",
										"1",
										"1",
										"\"zero\"",
										"-1",
										"0"
									]
								}
							],
							"sid": 271939863766574,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 778828146640090
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 553628535167624,
									"parameters": {
										"instance-variable": "outX",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "pfmt",
									"sid": 874002765003949,
									"parameters": [
										"basis.UID",
										"basis.name",
										"portal.outX",
										"portal.outY",
										"1",
										"1",
										"1",
										"\"zero\"",
										"-1",
										"0"
									]
								}
							],
							"sid": 940460095052789,
							"disabled": true
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "    старт локации"
		},
		{
			"functionName": "startFrame",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "n",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 339711967553123
				},
				{
					"name": "portalUID",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"sid": 144278176784260
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 393013510383623,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "frame",
					"sid": 502836660285380,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "groundPoint",
					"sid": 730955681886182,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "horizonPoint",
					"sid": 883240393165697,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "horizonLimit",
					"sid": 874676268056301,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "n"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 432204126535636,
					"disabled": true,
					"parameters": {
						"text": "\"start\""
					}
				},
				{
					"id": "add-to-instvar",
					"objectClass": "aTools",
					"sid": 638573316404380,
					"parameters": {
						"instance-variable": "test",
						"value": "1"
					}
				},
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 961518393681510,
					"disabled": true,
					"parameters": {
						"text": "aTools.test"
					}
				},
				{
					"type": "comment",
					"text": ""
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 798985776006656,
					"parameters": {
						"group-name": "\"cameraPerspective\"",
						"state": "deactivated"
					}
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 291058502182027,
					"parameters": {
						"group-name": "\"cameraIsometric\"",
						"state": "deactivated"
					}
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 820262510420566,
					"parameters": {
						"group-name": "\"speedPerspective\"",
						"state": "deactivated"
					}
				},
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 347204304255240,
					"parameters": {
						"group-name": "\"speedIsometric\"",
						"state": "deactivated"
					}
				},
				{
					"type": "comment",
					"text": ""
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aTools",
					"sid": 727194971917085,
					"parameters": {
						"instance-variable": "cursorSizeCoeff",
						"value": "camera.cursorCoeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "cursor",
					"sid": 681570093449686,
					"parameters": {
						"instance-variable": "magicN",
						"value": "camera.cursorMagicN"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "cursor",
					"sid": 947231737820248,
					"parameters": {
						"instance-variable": "sizeCoeff",
						"value": "camera.cursorCoeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "cursor",
					"sid": 760724929659591,
					"disabled": true,
					"parameters": {
						"instance-variable": "totalScale",
						"value": "Self.sizeCoeff*camera.heroScaleCoeff*(0.4+zoom*0.4)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "cursor",
					"sid": 860104674367723,
					"parameters": {
						"instance-variable": "totalScale",
						"value": "Self.sizeCoeff*camera.heroScaleCoeff*(Self.magicN+zoom*Self.magicN)"
					}
				},
				{
					"id": "set-scale",
					"objectClass": "cursor",
					"sid": 564404747923578,
					"parameters": {
						"scale": "Self.totalScale"
					}
				},
				{
					"type": "comment",
					"text": ""
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aBook",
					"sid": 138354826878845,
					"parameters": {
						"instance-variable": "locationGravity",
						"value": "camera.gravity"
					}
				}
			],
			"sid": 635384381534972,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "camera",
							"sid": 390454452323702,
							"parameters": {
								"instance-variable": "cursorStartBlack"
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "cursor",
							"sid": 933096000937657,
							"parameters": {
								"mode": "enable",
								"effect": "\"Inverse\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "cursor",
							"sid": 795242291249144,
							"parameters": {
								"instance-variable": "black",
								"value": "true"
							}
						}
					],
					"sid": 476576024133093
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 601990077590571
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "cursor",
							"sid": 256514927235087,
							"parameters": {
								"mode": "disable",
								"effect": "\"Inverse\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "cursor",
							"sid": 804997803241769,
							"parameters": {
								"instance-variable": "black",
								"value": "false"
							}
						}
					],
					"sid": 178565843702152
				},
				{
					"eventType": "comment",
					"text": "не проверено"
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "hero",
							"sid": 119285332086605,
							"parameters": {
								"instance-variable": "active",
								"value": "false"
							}
						}
					],
					"sid": 732363962397427
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 820779029923285,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "hero",
							"sid": 882864158424594,
							"parameters": {
								"instance-variable": "active",
								"value": "true"
							}
						}
					],
					"sid": 570052032504635
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aGame",
							"sid": 272782240551138,
							"parameters": {
								"instance-variable": "blackout"
							}
						}
					],
					"actions": [
						{
							"id": "disableGroupsOfType",
							"objectClass": "groups",
							"sid": 864200829286313,
							"parameters": {
								"groupType": "\"blackout\""
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 119717670143065,
							"parameters": {
								"group-name": "\"blackout\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 929121696077571,
							"parameters": {
								"group-name": "\"blackout\"&aTools.location",
								"state": "activated"
							}
						}
					],
					"sid": 635283113956593
				},
				{
					"eventType": "comment",
					"text": "\n\n\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 476960138510830,
							"parameters": {
								"instance-variable": "type",
								"comparison": 0,
								"value": "\"cameraPerspective\""
							}
						}
					],
					"actions": [
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 734349887962284,
							"parameters": {
								"group-name": "\"cameraPerspective\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 170623598187077,
							"parameters": {
								"group-name": "\"speedPerspective\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "    размеры поля и коэффициент изометрии"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 362581240687939,
							"parameters": {
								"instance-variable": "horizon",
								"value": "horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 857943344192713,
							"parameters": {
								"instance-variable": "ground",
								"value": "groundPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 845599566818100,
							"parameters": {
								"instance-variable": "horizonLimit",
								"value": "horizonLimit.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 255614115802983,
							"parameters": {
								"instance-variable": "zField",
								"value": "groundPoint.Y-horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 358144002687744,
							"parameters": {
								"instance-variable": "isoCoeff",
								"value": "round(camera.zField/(frame.Height*1.7777)*65)/100"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 667638253330722,
							"parameters": {
								"instance-variable": "horizonLimit",
								"value": "camera.horizonLimit"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 274223513940954,
							"parameters": {
								"instance-variable": "heroScaleCoeff",
								"value": "camera.heroScaleCoeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 498972543361003,
							"parameters": {
								"instance-variable": "ballRIso",
								"value": "Self.ballRange*aTools.isoCoeff"
							}
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 734614599999027,
							"parameters": {
								"tag": "\"nStart\""
							}
						}
					],
					"sid": 997638604885880,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 372173404408454,
									"disabled": true,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aTools.portName"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 297610817337096,
									"disabled": true,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aTools.portName"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "map",
									"sid": 101092593360297,
									"disabled": true,
									"parameters": {
										"unique-id": "aTools.portalUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aTools",
									"sid": 888398384126476,
									"disabled": true,
									"parameters": {
										"instance-variable": "portToFrame",
										"comparison": 0,
										"value": "n"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "portal",
									"sid": 997496961448526,
									"disabled": true,
									"parameters": {
										"unique-id": "aTools.portalUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aTools",
									"sid": 883055560996814,
									"parameters": {
										"instance-variable": "portalUID",
										"comparison": 5,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 278185961466314,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 357608870904283,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "port",
									"sid": 561082579900151,
									"parameters": {
										"comparison": 0,
										"number": "aaa.portIND"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 230961476457445,
									"disabled": true,
									"parameters": {
										"text": "\"goFrame!  \"&aTools.n&\" \"&portalUID&\" \""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 422711455671977,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-position-to-another-object",
									"objectClass": "basis",
									"sid": 930710735844572,
									"parameters": {
										"object": "map",
										"image-point-optional": "0"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 628913628412844,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"groundUID\""
									}
								},
								{
									"callFunction": "animPers",
									"sid": 157290928473373,
									"parameters": [
										"hero.UID",
										"portal.animation",
										"3",
										"14",
										"888",
										"0"
									]
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 141628775291226,
									"parameters": {
										"seconds": "0",
										"use-timescale": true
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 302676453948833,
									"parameters": {
										"instance-variable": "portal",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 253182933168983,
									"parameters": {
										"instance-variable": "task",
										"value": "\"zero\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 827832320164871,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "basis.task"
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "basis",
									"sid": 518912528947630,
									"parameters": {
										"collisions": "enabled"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 712806176421431,
									"disabled": true,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"portalArrivalSignal\""
									}
								},
								{
									"id": "instance-signal",
									"objectClass": "basis",
									"sid": 703526105934787,
									"parameters": {
										"tag": "\"portalArrival\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 793784260187846,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 891774619683625,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"zero\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 285865595756900,
									"disabled": true,
									"parameters": {
										"text": "portalUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 364708401289543,
									"disabled": true,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 259588979759641,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 724084061195824,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 729982921994093,
									"parameters": {
										"instance-variable": "portName",
										"value": "\"\""
									}
								}
							],
							"sid": 448405506593530
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 951461585695525,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 604628755776743,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 735332016423798,
									"disabled": true,
									"parameters": {
										"text": "\"goFrame!  \"&aTools.n&\" \"&portalUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 352721744344602,
									"parameters": {
										"instance-variable": "n",
										"value": "aTools.n"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 307292154369440,
									"parameters": {
										"instance-variable": "n",
										"value": "aTools.n"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 482745770119083,
									"parameters": {
										"seconds": "0.3",
										"use-timescale": true
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 993442608740493,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"groundUID\""
									}
								}
							],
							"sid": 110489165123382,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 565976157597621,
											"parameters": {
												"variable": "portalUID",
												"comparison": 4,
												"value": "-1"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "map",
											"sid": 455334188269955,
											"parameters": {
												"unique-id": "portalUID"
											}
										}
									],
									"actions": [
										{
											"id": "set-position-to-another-object",
											"objectClass": "basis",
											"sid": 328344500305888,
											"parameters": {
												"object": "map",
												"image-point-optional": "0"
											}
										},
										{
											"callFunction": "animPers",
											"sid": 570644237640245,
											"parameters": [
												"person.UID",
												"portal.animation",
												"3",
												"10",
												"888",
												"0"
											]
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "basis",
											"sid": 503143877575521,
											"parameters": {
												"instance-variable": "portal",
												"value": "false"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "basis",
											"sid": 775201115628280,
											"parameters": {
												"instance-variable": "task",
												"value": "\"zero\""
											}
										},
										{
											"id": "monitorstr1",
											"objectClass": "vm",
											"sid": 603466931372929,
											"parameters": {
												"tag0": "\"portal\"",
												"string1": "basis.task"
											}
										},
										{
											"id": "set-collisions-enabled",
											"objectClass": "basis",
											"sid": 381160348546405,
											"parameters": {
												"collisions": "enabled"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 594960143559635,
											"parameters": {
												"instance-variable": "mod",
												"value": "\"zero\""
											}
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 837849974636243,
											"disabled": true,
											"parameters": {
												"text": "portalUID"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 431875069689033,
											"parameters": {
												"instance-variable": "animPriority",
												"value": "0"
											}
										}
									],
									"sid": 321678369172782,
									"disabled": true
								}
							]
						},
						{
							"eventType": "comment",
							"text": "    однократное масштабирование объектов"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "zScale",
									"sid": 224256469204691,
									"parameters": {
										"instance-variable": "nLocation",
										"comparison": 0,
										"value": "n"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "zScale",
									"sid": 816412838102370,
									"parameters": {
										"instance-variable": "nLocation",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [],
							"sid": 676533399403166,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "zScale",
											"sid": 373072353341688,
											"parameters": {
												"instance-variable": "scalable"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "zScale",
											"sid": 318769097098526,
											"parameters": {
												"instance-variable": "coeff",
												"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "zScale",
											"sid": 105843010097306,
											"parameters": {
												"instance-variable": "zet",
												"value": "clamp(Self.Y,camera.horizonLimit,5000)-camera.horizon"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "zScale",
											"sid": 817437950363430,
											"parameters": {
												"instance-variable": "zetScale",
												"value": "abs(Self.zet/camera.zField)"
											}
										},
										{
											"id": "set-size",
											"objectClass": "zScale",
											"sid": 986140386920449,
											"parameters": {
												"width": "Self.zetScale*Self.coeff*Self.ImageWidth",
												"height": "Self.zetScale*Self.coeff*Self.ImageHeight"
											}
										}
									],
									"sid": 624634343657338
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "     однократное масштабирование персонажей"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 777153464956445,
									"parameters": {
										"instance-variable": "n",
										"comparison": 0,
										"value": "n"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 219208541543143,
									"parameters": {
										"instance-variable": "n",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [],
							"sid": 417363534124210,
							"children": [
								{
									"eventType": "comment",
									"text": "? персонажи не на базах, под вопросом"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 841429805865286,
											"parameters": {
												"instance-variable": "onBase"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 940200069251375,
									"children": [
										{
											"eventType": "variable",
											"name": "z",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 918165489087777
										},
										{
											"eventType": "variable",
											"name": "zScale",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 716357981499600
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 812061478366997,
													"parameters": {
														"variable": "z",
														"value": "clamp(person.Y-camera.horizon,horizonLimit.Y,5000)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 140315117992084,
													"parameters": {
														"variable": "zScale",
														"value": "abs(z/camera.zField)"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 428756820292206,
													"parameters": {
														"instance-variable": "zScaleLikeHero",
														"value": "zScale*aBook.heroScaleCoeff"
													}
												}
											],
											"sid": 648816896844069
										}
									]
								},
								{
									"eventType": "comment",
									"text": "персонажи на базах"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 853594836364433,
											"parameters": {
												"instance-variable": "onBase"
											}
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 242988461642783,
											"parameters": {
												"object": "person"
											}
										}
									],
									"actions": [],
									"sid": 540577664329583,
									"children": [
										{
											"eventType": "comment",
											"text": "все"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "basis",
													"sid": 926376767885576,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "person.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 169257385271687,
													"parameters": {
														"instance-variable": "z",
														"value": "clamp(Self.Y-camera.horizon,horizonLimit.Y,5000)"
													}
												}
											],
											"sid": 783811346584482,
											"children": [
												{
													"eventType": "comment",
													"text": "герой"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "basis",
															"sid": 465372649526302,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "aBook.hero"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "heroArrival",
															"sid": 599125754676232,
															"parameters": {
																"instance-variable": "n",
																"comparison": 0,
																"value": "aTools.n"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "basis",
															"sid": 630926658843837,
															"parameters": {
																"instance-variable": "z",
																"value": "clamp(heroArrival.Y-camera.horizon,horizonLimit.Y,5000)"
															}
														}
													],
													"sid": 843758604642884
												},
												{
													"eventType": "comment",
													"text": "все"
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "basis",
															"sid": 595730054105112,
															"parameters": {
																"instance-variable": "zScale",
																"value": "abs(Self.z/camera.zField)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "basis",
															"sid": 130341999087230,
															"parameters": {
																"instance-variable": "coeff",
																"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "person",
															"sid": 586732299980352,
															"disabled": true,
															"parameters": {
																"instance-variable": "startScaleCoeff",
																"value": "basis.startScaleCoeff"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "person",
															"sid": 922568198410804,
															"disabled": true,
															"parameters": {
																"instance-variable": "coeff",
																"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
															}
														},
														{
															"id": "set-size",
															"objectClass": "person",
															"sid": 527908108818124,
															"disabled": true,
															"parameters": {
																"width": "Self.ImageWidth*basis.zScale*Self.coeff",
																"height": "Self.ImageHeight*basis.zScale*Self.coeff"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "basis",
															"sid": 996150194631939,
															"parameters": {
																"instance-variable": "fullScale",
																"value": "Self.zScale*Self.coeff"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "person",
															"sid": 823914735889582,
															"parameters": {
																"instance-variable": "basisFullScale",
																"value": "basis.fullScale"
															}
														},
														{
															"id": "set-scale",
															"objectClass": "person",
															"sid": 490502750102349,
															"parameters": {
																"scale": "basis.fullScale"
															}
														},
														{
															"id": "set-size",
															"objectClass": "person",
															"sid": 987256288128145,
															"disabled": true,
															"parameters": {
																"width": "Self.ImageWidth*basis.zScale*basis.coeff",
																"height": "Self.ImageHeight*basis.zScale*basis.coeff"
															}
														}
													],
													"sid": 563999672314695
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "shad",
															"sid": 668554049953624,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "basis.name"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "shad",
															"sid": 136048742873864,
															"disabled": true,
															"parameters": {
																"instance-variable": "w",
																"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "shad",
															"sid": 702754543661096,
															"disabled": true,
															"parameters": {
																"instance-variable": "w",
																"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "shad",
															"sid": 621858727789543,
															"parameters": {
																"instance-variable": "w",
																"value": "Self.startScaleCoeff*basis.coeff*Self.ImageWidth"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "shad",
															"sid": 600289158861384,
															"parameters": {
																"instance-variable": "isoCoeff",
																"value": "aTools.isoCoeff+0.2"
															}
														},
														{
															"id": "set-size",
															"objectClass": "shad",
															"sid": 334883289180000,
															"parameters": {
																"width": "Self.w*basis.zScale",
																"height": "Self.w*basis.zScale*Self.isoCoeff"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "shad",
															"sid": 146712958191158,
															"parameters": {
																"opacity": "Self.opas"
															}
														}
													],
													"sid": 866838744096960
												}
											]
										}
									]
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n\n\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 958704348274819
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 401893127826772,
							"parameters": {
								"instance-variable": "type",
								"comparison": 0,
								"value": "\"cameraIsometric\""
							}
						}
					],
					"actions": [
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 377941857408052,
							"parameters": {
								"group-name": "\"cameraIsometric\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 640313494278916,
							"parameters": {
								"group-name": "\"speedIsometric\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "    размеры поля и коэффициент изометрии"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 449370309682484,
							"parameters": {
								"instance-variable": "horizon",
								"value": "horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 811789021061579,
							"parameters": {
								"instance-variable": "ground",
								"value": "groundPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 438276986038437,
							"parameters": {
								"instance-variable": "horizonLimit",
								"value": "horizonLimit.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 153167312792346,
							"parameters": {
								"instance-variable": "zField",
								"value": "groundPoint.Y-horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 278375799338420,
							"disabled": true,
							"parameters": {
								"instance-variable": "isoCoeff",
								"value": "roundToDp((camera.zField/(frame.Height*1.7777)*65)/100,2)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 316246498544977,
							"parameters": {
								"instance-variable": "isoCoeff",
								"value": "camera.isoCoeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 378891197750329,
							"parameters": {
								"instance-variable": "horizonLimit",
								"value": "camera.horizonLimit"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 237274795494815,
							"parameters": {
								"instance-variable": "heroScaleCoeff",
								"value": "camera.heroScaleCoeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 565218751928210,
							"parameters": {
								"instance-variable": "ballRIso",
								"value": "Self.ballRange*aTools.isoCoeff"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 244798875586188,
							"disabled": true,
							"parameters": {
								"text": "\"start!\""
							}
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 946953816128709,
							"parameters": {
								"tag": "\"nStart\""
							}
						}
					],
					"sid": 433046437365950,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 796566143632319,
									"disabled": true,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aTools.portName"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 204506560543624,
									"disabled": true,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aTools.portName"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "map",
									"sid": 634963738703228,
									"disabled": true,
									"parameters": {
										"unique-id": "aTools.portalUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aTools",
									"sid": 290577469586283,
									"disabled": true,
									"parameters": {
										"instance-variable": "portToFrame",
										"comparison": 0,
										"value": "n"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "portal",
									"sid": 581761050072663,
									"disabled": true,
									"parameters": {
										"unique-id": "aTools.portalUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aTools",
									"sid": 235884907095356,
									"parameters": {
										"instance-variable": "portalUID",
										"comparison": 5,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 547317380668825,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 925367921048074,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "port",
									"sid": 143398231953729,
									"parameters": {
										"comparison": 0,
										"number": "aaa.portIND"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 786317556194487,
									"disabled": true,
									"parameters": {
										"text": "\"goFrame!  \"&aTools.n&\" \"&portalUID&\" \""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 342410672034167,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-position-to-another-object",
									"objectClass": "basis",
									"sid": 219905823624572,
									"parameters": {
										"object": "map",
										"image-point-optional": "0"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 687081905062646,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"groundUID\""
									}
								},
								{
									"callFunction": "animPers",
									"sid": 363833069973954,
									"parameters": [
										"hero.UID",
										"portal.animation",
										"3",
										"14",
										"888",
										"0"
									]
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 484456562811763,
									"parameters": {
										"seconds": "0",
										"use-timescale": true
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 272765632693160,
									"parameters": {
										"instance-variable": "portal",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 209897957643705,
									"parameters": {
										"instance-variable": "task",
										"value": "\"zero\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 744900900709236,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "basis.task"
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "basis",
									"sid": 670135620746601,
									"parameters": {
										"collisions": "enabled"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 664150409101072,
									"disabled": true,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"portalArrivalSignal\""
									}
								},
								{
									"id": "instance-signal",
									"objectClass": "basis",
									"sid": 439811309373232,
									"parameters": {
										"tag": "\"portalArrival\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 520970447229451,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 309793350460382,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"zero\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 230010152698365,
									"disabled": true,
									"parameters": {
										"text": "portalUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 468454864903608,
									"disabled": true,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 461358160821289,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 453194582791446,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 656749439356349,
									"parameters": {
										"instance-variable": "portName",
										"value": "\"\""
									}
								}
							],
							"sid": 538137487420690
						},
						{
							"bookmark": true,
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 967785714446282,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 488252916516001,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 250617870158808,
									"parameters": {
										"instance-variable": "n",
										"value": "aTools.n"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 333249783811714,
									"parameters": {
										"instance-variable": "n",
										"value": "aTools.n"
									}
								}
							],
							"sid": 835426287093661
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 506005425856382,
									"parameters": {
										"instance-variable": "onBase"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 972374929342718,
									"parameters": {
										"object": "person"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 167185689377861,
									"disabled": true,
									"parameters": {
										"instance-variable": "zScaleLikeHero",
										"value": "aBook.heroScaleCoeff"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 932350112838984,
									"parameters": {
										"instance-variable": "coeff",
										"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 473407950124242,
									"parameters": {
										"instance-variable": "basisFullScale",
										"value": "Self.coeff"
									}
								},
								{
									"id": "set-size",
									"objectClass": "person",
									"sid": 687614803739731,
									"parameters": {
										"width": "Self.ImageWidth*Self.coeff",
										"height": "Self.ImageHeight*Self.coeff"
									}
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 693574215166675,
									"disabled": true,
									"parameters": {
										"text": "person.name"
									}
								}
							],
							"sid": 307716325246049,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "shad",
											"sid": 185026443929669,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "person.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "shad",
											"sid": 742850541875950,
											"parameters": {
												"instance-variable": "w",
												"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "shad",
											"sid": 968981424163733,
											"parameters": {
												"instance-variable": "isoCoeff",
												"value": "aTools.isoCoeff+0.2"
											}
										},
										{
											"id": "set-size",
											"objectClass": "shad",
											"sid": 435533300587883,
											"parameters": {
												"width": "Self.w",
												"height": "Self.w*Self.isoCoeff"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "shad",
											"sid": 160647264477126,
											"parameters": {
												"opacity": "Self.opas"
											}
										}
									],
									"sid": 103965694972724
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 350025233016911,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "person.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "basis",
											"sid": 884948351779400,
											"parameters": {
												"instance-variable": "fullScale",
												"value": "person.coeff"
											}
										}
									],
									"sid": 357665963172425
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "zScale",
									"sid": 996459050933938,
									"parameters": {
										"instance-variable": "scalable"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 821797257848178,
									"parameters": {
										"instance-variable": "zet",
										"value": "1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 182954189133715,
									"parameters": {
										"instance-variable": "zetScale",
										"value": "1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 115189173976559,
									"parameters": {
										"instance-variable": "coeff",
										"value": "Self.ImageWidth*Self.startScaleCoeff*aBook.heroScaleCoeff"
									}
								}
							],
							"sid": 687167234250723
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 772008583972469,
									"parameters": {
										"instance-variable": "onBase"
									}
								}
							],
							"actions": [],
							"sid": 445985867715186,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 337677013243238,
											"parameters": {
												"object": "basis"
											}
										}
									],
									"actions": [],
									"sid": 541708512980103,
									"disabled": true,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 585495656683198,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 115027534069731,
													"parameters": {
														"instance-variable": "zScale",
														"value": "1"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 699973668993993,
													"parameters": {
														"instance-variable": "coeff",
														"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 359432601568317,
													"disabled": true,
													"parameters": {
														"instance-variable": "zScaleLikeHero",
														"value": "aBook.heroScaleCoeff"
													}
												},
												{
													"id": "set-size",
													"objectClass": "person",
													"sid": 220838206639031,
													"parameters": {
														"width": "Self.ImageWidth*Self.coeff",
														"height": "Self.ImageHeight*Self.coeff"
													}
												}
											],
											"sid": 925301495558825,
											"disabled": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "shad",
													"sid": 754934801750961,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "shad",
													"sid": 848180993064821,
													"parameters": {
														"instance-variable": "w",
														"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "shad",
													"sid": 992486113884298,
													"parameters": {
														"instance-variable": "isoCoeff",
														"value": "aTools.isoCoeff+0.2"
													}
												},
												{
													"id": "set-size",
													"objectClass": "shad",
													"sid": 952982761152114,
													"parameters": {
														"width": "Self.w",
														"height": "Self.w*Self.isoCoeff"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "shad",
													"sid": 569107075518464,
													"parameters": {
														"opacity": "Self.opas"
													}
												}
											],
											"sid": 614454292633944,
											"disabled": true
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "instance-signal",
							"objectClass": "camera",
							"sid": 690703575958802,
							"parameters": {
								"tag": "\"startFrame\""
							}
						}
					],
					"sid": 250042587491512
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\nзум-скроллинг, все типы, включая твин-скроллинг без зума, в теории возможен и лерп-скроллинг без зума",
			"background-color": [
				0.7686274509803922,
				0.8901960784313725,
				0.8352941176470589,
				1
			]
		},
		{
			"aceType": "action",
			"aceName": "zoomTo",
			"objectClass": "aIns",
			"functionDescription": "",
			"functionCategory": "_TOP",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "mouseWheel",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 645136626083722
				},
				{
					"name": "hero",
					"type": "boolean",
					"initialValue": "true",
					"comment": "",
					"sid": 162755090744545
				},
				{
					"name": "Thornik",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 293176178974923
				},
				{
					"name": "camYMinus",
					"type": "number",
					"initialValue": "-1",
					"comment": "- 1 NAN, 999 - startMinus, 0,1,2,etc - add yMinus",
					"sid": 360807986499617
				},
				{
					"name": "free",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 197839267703852
				},
				{
					"name": "mark",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 392729244033388
				},
				{
					"name": "cursor",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 831415723799904
				},
				{
					"name": "zoomTo",
					"type": "number",
					"initialValue": "1",
					"comment": "0 - NAN",
					"sid": 987595526530238
				},
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 331907197848702
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 785160215043240
				},
				{
					"name": "timeZoom",
					"type": "number",
					"initialValue": "0",
					"comment": "-1 NAN, 0 instsnt ",
					"sid": 964417130821522
				},
				{
					"name": "timeMove",
					"type": "number",
					"initialValue": "-1",
					"comment": "-1 NAN, 0 instant",
					"sid": 336479456557270
				},
				{
					"name": "camMark",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 841498542605430
				},
				{
					"name": "lerpScroll",
					"type": "boolean",
					"initialValue": "true",
					"comment": "",
					"sid": 163686051716074
				},
				{
					"name": "lerpMultiplay",
					"type": "number",
					"initialValue": "1",
					"comment": "coeff",
					"sid": 553617602782956
				},
				{
					"name": "resetToZoomStart",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 200824522964723
				},
				{
					"name": "markPointUID",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"sid": 552271191259061
				},
				{
					"name": "nextFollowMod",
					"type": "string",
					"initialValue": "zero",
					"comment": "",
					"sid": 591530627828198
				},
				{
					"name": "cubicOut",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 318543401393485
				},
				{
					"name": "expo",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 361459824691472
				},
				{
					"name": "elastic",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 405755103126413
				},
				{
					"name": "moveLinear",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 149260183131264
				},
				{
					"name": "noMouseScrolling",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 552820826071708
				},
				{
					"name": "noMouseWheel",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 254505731084395
				},
				{
					"name": "noMouse",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 213483532262270
				},
				{
					"name": "timer",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 400406571706334
				},
				{
					"name": "timerTag",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 899086275259106
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 449820540069747,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.n"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "camera",
					"sid": 168890864646599,
					"parameters": {
						"instance-variable": "nextFollowMod",
						"value": "nextFollowMod"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "camera",
					"sid": 111703136301415,
					"parameters": {
						"instance-variable": "lm",
						"value": "lerpMultiplay"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "camera",
					"sid": 970667205449610,
					"parameters": {
						"instance-variable": "yMinus",
						"value": "camYMinus=-1? Self.yMinus : camYMinus=999? Self.yMinusConst : camYMinus"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "camera",
					"sid": 997343710933054,
					"parameters": {
						"instance-variable": "noMouseWheel",
						"value": "false"
					}
				}
			],
			"sid": 444529305293118,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 804252384406178,
							"parameters": {
								"variable": "mouseWheel"
							}
						}
					],
					"actions": [],
					"sid": 565904668313495,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 247736608974360,
									"parameters": {
										"instance-variable": "followerMod",
										"comparison": 0,
										"value": "\"hero\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 188557944682343,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aBook.hero"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "camera",
									"sid": 351631684919485,
									"parameters": {
										"instance-variable": "followerMod",
										"value": "\"hero\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 576435511805793,
									"parameters": {
										"variable": "x",
										"value": "hero.X"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 369250507386611,
									"parameters": {
										"variable": "y",
										"value": "hero.Y-camYMinus"
									}
								}
							],
							"sid": 995578166143550
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 238130728905618,
									"parameters": {
										"instance-variable": "followerMod",
										"comparison": 0,
										"value": "\"free\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "camera",
									"sid": 516862558476426,
									"parameters": {
										"instance-variable": "followerMod",
										"value": "\"free\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 418135626636957,
									"parameters": {
										"variable": "x",
										"value": "camera.X"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 302277084202117,
									"parameters": {
										"variable": "y",
										"value": "camera.Y"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 437019677167321,
									"parameters": {
										"variable": "lerpScroll",
										"value": "true"
									}
								}
							],
							"sid": 575889782974736
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 819790993961004
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 467148855877321,
							"parameters": {
								"variable": "hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 851007552124221,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 600961801726919,
							"parameters": {
								"instance-variable": "followerMod",
								"value": "\"hero\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 623152686269367,
							"parameters": {
								"variable": "x",
								"value": "hero.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 603611324381047,
							"parameters": {
								"variable": "y",
								"value": "hero.Y-camYMinus"
							}
						}
					],
					"sid": 242024471662859
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 786689058860085
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 437265880656180,
							"parameters": {
								"variable": "Thornik"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Thornik",
							"sid": 628077765424257,
							"parameters": {
								"instance-variable": "pName",
								"comparison": 0,
								"value": "\"Thornik\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 397258956186278,
							"parameters": {
								"instance-variable": "followerMod",
								"value": "\"person\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 580610499253196,
							"parameters": {
								"variable": "x",
								"value": "Thornik.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 128100341043979,
							"parameters": {
								"variable": "y",
								"value": "Thornik.Y"
							}
						}
					],
					"sid": 856221069149984
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 984876542956565
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 162385206852783,
							"parameters": {
								"variable": "free"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 560368390551883,
							"parameters": {
								"instance-variable": "followerMod",
								"value": "\"free\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 638012960124602,
							"parameters": {
								"variable": "x",
								"value": "camera.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 764584266943664,
							"parameters": {
								"variable": "y",
								"value": "camera.Y"
							}
						}
					],
					"sid": 686308198512320
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 428090627057500
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 542941241426765,
							"parameters": {
								"variable": "mark"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 341281721146473,
							"parameters": {
								"instance-variable": "followerMod",
								"value": "\"mark\""
							}
						}
					],
					"sid": 718146955441283,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 384976291672224,
									"parameters": {
										"variable": "markPointUID",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "point",
									"sid": 553407416800108,
									"parameters": {
										"unique-id": "markPointUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 346051794283768,
									"parameters": {
										"variable": "x",
										"value": "point.X"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 786908409546414,
									"parameters": {
										"variable": "y",
										"value": "point.Y"
									}
								}
							],
							"sid": 337066731785887
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 173408495804319,
									"parameters": {
										"variable": "camMark"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 606815174761524,
									"parameters": {
										"variable": "x",
										"value": "camMark.X"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 804795362695431,
									"parameters": {
										"variable": "y",
										"value": "camMark.Y"
									}
								}
							],
							"sid": 508290279100253
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 175410134551763
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aIns",
									"sid": 901285878125698,
									"parameters": {
										"instance-variable": "markCamFollowX",
										"value": "x"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aIns",
									"sid": 685348139538293,
									"parameters": {
										"instance-variable": "markCamFollowY",
										"value": "y"
									}
								},
								{
									"id": "set-position",
									"objectClass": "camMark",
									"sid": 815140365832859,
									"disabled": true,
									"parameters": {
										"x": "x",
										"y": "y"
									}
								}
							],
							"sid": 862825395455978
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 705179657702534
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 168729427049002,
							"parameters": {
								"variable": "cursor"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 407474844444147,
							"parameters": {
								"variable": "x",
								"value": "Mouse.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 805527580283021,
							"parameters": {
								"variable": "y",
								"value": "Mouse.Y"
							}
						}
					],
					"sid": 435832790204563
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 256376404709197,
							"parameters": {
								"variable": "resetToZoomStart"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 619363372603726,
							"parameters": {
								"variable": "zoomTo",
								"value": "camera.toZoomStart"
							}
						}
					],
					"sid": 219186868190050
				},
				{
					"eventType": "comment",
					"text": "",
					"background-color": [
						0.7686274509803922,
						0.8901960784313725,
						0.8352941176470589,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 246436226841115,
							"parameters": {
								"variable": "expo"
							}
						}
					],
					"actions": [
						{
							"id": "stop-tweens",
							"objectClass": "camera",
							"sid": 597404667035907,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						},
						{
							"id": "tween-value",
							"objectClass": "camera",
							"sid": 947228887834363,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "LayoutScale",
								"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
								"time": "timeZoom",
								"ease": "easeoutexpo",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 279452799917440
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 494317054466930
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 961435404851052,
							"parameters": {
								"variable": "elastic"
							}
						}
					],
					"actions": [
						{
							"id": "stop-tweens",
							"objectClass": "camera",
							"sid": 536421396595887,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						},
						{
							"id": "tween-value",
							"objectClass": "camera",
							"sid": 962651175395034,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "LayoutScale",
								"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
								"time": "timeZoom",
								"ease": "easeoutelastic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 353391148374318
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 556212076638536
						},
						{
							"id": "is-playing",
							"objectClass": "camera",
							"sid": 878996148345799,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						}
					],
					"actions": [
						{
							"id": "stop-tweens",
							"objectClass": "camera",
							"sid": 970601341857912,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						}
					],
					"sid": 101961624975296,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 761261795185707,
									"parameters": {
										"variable": "cubicOut"
									}
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 174153137593460,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
										"time": "timeZoom",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 346905559943693
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 783464891708116
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 101066249225446,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
										"time": "timeZoom",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 610818354733742
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 671905016830463
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 398900732664737,
							"parameters": {
								"variable": "cubicOut"
							}
						}
					],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "camera",
							"sid": 569303616121512,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "LayoutScale",
								"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
								"time": "timeZoom",
								"ease": "easeinoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 410108752054985
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 606751013554308
						}
					],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "camera",
							"sid": 942335461891728,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "LayoutScale",
								"end-value": "clamp(zoomTo,zoomMin,zoomMax)",
								"time": "timeZoom",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 254133588124869
				},
				{
					"eventType": "comment",
					"text": "",
					"background-color": [
						0.7686274509803922,
						0.8901960784313725,
						0.8352941176470589,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 567319542238056,
							"parameters": {
								"variable": "lerpScroll"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "camera",
							"sid": 507693192706963,
							"parameters": {
								"instance-variable": "lerpZoomScroll",
								"value": "false"
							}
						}
					],
					"sid": 276093472966359,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 610010372796355,
									"parameters": {
										"variable": "timeMove",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "camera",
									"sid": 434993786903593,
									"parameters": {
										"x": "x",
										"y": "y"
									}
								}
							],
							"sid": 254496958011453
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 382617855901034,
									"parameters": {
										"variable": "timeMove",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 129791983839673,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 609970404892678,
											"parameters": {
												"variable": "moveLinear"
											}
										}
									],
									"actions": [
										{
											"id": "stop-tweens",
											"objectClass": "camera",
											"sid": 180910779222253,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"x\""
											}
										},
										{
											"id": "stop-tweens",
											"objectClass": "camera",
											"sid": 784189732735746,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"y\""
											}
										},
										{
											"id": "tween-value",
											"objectClass": "camera",
											"sid": 139205401172964,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"x\"",
												"start-value": "camera.X",
												"end-value": "x",
												"time": "timeMove",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-value",
											"objectClass": "camera",
											"sid": 742168697851921,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"y\"",
												"start-value": "camera.Y",
												"end-value": "y",
												"time": "timeMove",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 202442948869635
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 516111181100262
										}
									],
									"actions": [],
									"sid": 558938402316325,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-playing",
													"objectClass": "camera",
													"sid": 753228752804122,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"x\""
													}
												}
											],
											"actions": [
												{
													"id": "stop-tweens",
													"objectClass": "camera",
													"sid": 542494542296519,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"x\""
													}
												},
												{
													"id": "stop-tweens",
													"objectClass": "camera",
													"sid": 808003849205047,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"y\""
													}
												},
												{
													"id": "tween-value",
													"objectClass": "camera",
													"sid": 273123089561197,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"x\"",
														"start-value": "camera.X",
														"end-value": "x",
														"time": "timeMove",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-value",
													"objectClass": "camera",
													"sid": 582384014231818,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"y\"",
														"start-value": "camera.Y",
														"end-value": "y",
														"time": "timeMove",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 849886263047373
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 340233320860941
												}
											],
											"actions": [
												{
													"id": "tween-value",
													"objectClass": "camera",
													"sid": 894793984512349,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"x\"",
														"start-value": "camera.X",
														"end-value": "x",
														"time": "timeMove",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-value",
													"objectClass": "camera",
													"sid": 742354877009898,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"y\"",
														"start-value": "camera.Y",
														"end-value": "y",
														"time": "timeMove",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 856662968271030
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "",
					"background-color": [
						0.7686274509803922,
						0.8901960784313725,
						0.8352941176470589,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 749877997625129
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "camera",
							"sid": 278333661189070,
							"parameters": {
								"instance-variable": "lerpZoomScroll",
								"value": "true"
							}
						}
					],
					"sid": 789539364873982,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 637549894456607,
									"parameters": {
										"variable": "noMouseScrolling"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "camera",
									"sid": 222978942178458,
									"parameters": {
										"instance-variable": "noMouseScrollPerZoom",
										"value": "true"
									}
								}
							],
							"sid": 526497649724502
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 805029455075384,
							"parameters": {
								"variable": "noMouseWheel"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "camera",
							"sid": 931441476079987,
							"parameters": {
								"instance-variable": "noMouseWheel",
								"value": "true"
							}
						}
					],
					"sid": 274298623862122
				},
				{
					"eventType": "comment",
					"text": "",
					"background-color": [
						0.7686274509803922,
						0.8901960784313725,
						0.8352941176470589,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 543095209022248,
							"parameters": {
								"variable": "noMouse"
							}
						}
					],
					"actions": [
						{
							"customAction": "NoMOUSE",
							"objectClass": "aIns",
							"sid": 255268321203934,
							"parameters": [
								true,
								true,
								true,
								true,
								"0"
							]
						}
					],
					"sid": 214555724016851
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 646239634494788,
							"parameters": {
								"variable": "timer",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "aIns",
							"sid": 157251222633485,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "timer",
								"type": "once",
								"tag": "timerTag"
							}
						}
					],
					"sid": 508239245208718
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n\n\n",
			"background-color": [
				0,
				0,
				0,
				1
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "trigger-once-while-true",
					"objectClass": "System",
					"sid": 839047534773952
				}
			],
			"actions": [
				{
					"callFunction": "gotoFrame",
					"sid": 853451694315088,
					"parameters": [
						"aTools.n",
						"-1",
						"\"\"",
						"0",
						"0"
					]
				}
			],
			"sid": 219023316332204
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 278796229926770
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "?",
					"background-color": [
						1,
						0.6196078431372549,
						0.6196078431372549,
						1
					]
				},
				{
					"type": "comment",
					"text": ""
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 119554780051494,
					"parameters": {
						"variable": "vos",
						"value": "Functions.vdB(aTools.soundVol)"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 752892558357559,
					"parameters": {
						"variable": "vom",
						"value": "Functions.vdB(aTools.musicVol)"
					}
				},
				{
					"id": "set-volume",
					"objectClass": "Audio",
					"sid": 651091457258714,
					"parameters": {
						"tag": "\"sound\"",
						"db": "vos"
					}
				},
				{
					"id": "set-volume",
					"objectClass": "Audio",
					"sid": 259634089605497,
					"parameters": {
						"tag": "\"music\"",
						"db": "vom"
					}
				}
			],
			"sid": 669810592635718,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 611638586363989,
							"parameters": {
								"object": "basis"
							}
						}
					],
					"actions": [],
					"sid": 183570608522507,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 818394555705150,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 212439068835677,
									"parameters": {
										"instance-variable": "startScaleCoeff",
										"value": "person.startScaleCoeff"
									}
								}
							],
							"sid": 151492937382930
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 245532042014695,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 546263526681256,
							"parameters": {
								"instance-variable": "heroMaxSpeed",
								"value": "basis.speedMax"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 189973490524330,
							"parameters": {
								"instance-variable": "energb",
								"value": "aBit.energo"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 169017679551933,
							"parameters": {
								"instance-variable": "energoLvl",
								"value": "aBit.energoLvl"
							}
						},
						{
							"callFunction": "pfmt",
							"sid": 865031749868877,
							"disabled": true,
							"parameters": [
								"0",
								"\"Bit\"",
								"basis.X+1",
								"basis.Y+1",
								"1",
								"1",
								"1",
								"\"zero\"",
								"-1",
								"0"
							]
						}
					],
					"sid": 997163801662942
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-layer",
							"objectClass": "zSort",
							"sid": 418214269973220,
							"parameters": {
								"layer": "\"iso\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "zSort",
							"sid": 580714933614613,
							"behaviorType": "EasyIsometric",
							"parameters": {
								"newState_": "disabled"
							}
						}
					],
					"sid": 762527023037458
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aGame",
							"sid": 811096626061318,
							"parameters": {
								"instance-variable": "noGun"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 776087909491243,
							"parameters": {
								"group-name": "\"BitGun\"",
								"state": "activated"
							}
						}
					],
					"sid": 301356624188347
				}
			]
		},
		{
			"eventType": "comment",
			"text": "",
			"background-color": [
				0,
				0,
				0,
				1
			]
		},
		{
			"eventType": "comment",
			"text": "\n\nмод камеры возвращается после зум-скроллинга, или меняется",
			"background-color": [
				0.7686274509803922,
				0.8901960784313725,
				0.8352941176470589,
				1
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tweens-finished",
					"objectClass": "camera",
					"sid": 433246727898295,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"x\""
					}
				}
			],
			"actions": [
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 956259204749282,
					"parameters": {
						"seconds": "0",
						"use-timescale": true
					}
				},
				{
					"id": "instance-signal",
					"objectClass": "camera",
					"sid": 569697836538460,
					"parameters": {
						"tag": "\"zoomEnd\""
					}
				}
			],
			"sid": 801353285200701
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tweens-finished",
					"objectClass": "camera",
					"sid": 333516564312748,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"zoom\""
					}
				}
			],
			"actions": [
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 939574868817124,
					"parameters": {
						"seconds": "0",
						"use-timescale": true
					}
				},
				{
					"id": "instance-signal",
					"objectClass": "camera",
					"sid": 748787992818983,
					"parameters": {
						"tag": "\"zoomEnd\""
					}
				}
			],
			"sid": 639859470786135
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-instance-signal",
					"objectClass": "camera",
					"sid": 821999717191119,
					"parameters": {
						"tag": "\"zoomEnd\""
					}
				},
				{
					"id": "is-playing",
					"objectClass": "camera",
					"sid": 975496814690459,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"x\""
					},
					"isInverted": true
				},
				{
					"id": "is-playing",
					"objectClass": "camera",
					"sid": 190798194257231,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"zoom\""
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "buttCam",
					"sid": 134125523778950,
					"parameters": {
						"instance-variable": "status",
						"value": "camera.nextFollowMod=\"zero\"?Self.status : camera.nextFollowMod"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "buttCam",
					"sid": 535051038004590,
					"parameters": {
						"animation": "Self.status",
						"from": "beginning"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "camera",
					"sid": 610877511890799,
					"parameters": {
						"instance-variable": "followerMod",
						"value": "buttCam.status"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "camera",
					"sid": 126972392516893,
					"parameters": {
						"instance-variable": "nextFollowMod",
						"value": "\"zero\""
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "camera",
					"sid": 555040938187652,
					"parameters": {
						"instance-variable": "noMouseWheel",
						"value": "false"
					}
				}
			],
			"sid": 317573580736220,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 241025050446901,
							"parameters": {
								"instance-variable": "followerMod",
								"comparison": 0,
								"value": "\"free\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 229634958938353,
							"parameters": {
								"instance-variable": "subMod",
								"value": "\"\""
							}
						}
					],
					"sid": 601970062127883,
					"disabled": true
				}
			]
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"aceType": "action",
			"aceName": "camFollowMod",
			"objectClass": "aIns",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "mod",
					"type": "string",
					"initialValue": "hero",
					"comment": "",
					"sid": 579062148365314
				},
				{
					"name": "free",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 306388037885702
				},
				{
					"name": "mark",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 703176055397537
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 874405828004942,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.n"
					}
				}
			],
			"actions": [],
			"sid": 153929645804167,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 691887769976952,
							"parameters": {
								"variable": "free"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 388950439444320,
							"parameters": {
								"variable": "mod",
								"value": "\"free\""
							}
						}
					],
					"sid": 876562006611524
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 902692919483112,
							"parameters": {
								"variable": "mark"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 233839889693640,
							"parameters": {
								"variable": "mod",
								"value": "\"mark\""
							}
						}
					],
					"sid": 343004034926672
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 759446114685955,
							"parameters": {
								"instance-variable": "followerMod",
								"value": "mod"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "buttCam",
							"sid": 741885018670279,
							"parameters": {
								"instance-variable": "status",
								"value": "mod"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "buttCam",
							"sid": 511918354197774,
							"parameters": {
								"animation": "mod",
								"from": "beginning"
							}
						}
					],
					"sid": 387070719802646
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "processCamLoc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "variable",
					"name": "xx",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 530395740006546
				},
				{
					"eventType": "variable",
					"name": "yy",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 438799018387414
				},
				{
					"eventType": "variable",
					"name": "c",
					"type": "number",
					"initialValue": "20",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 188581795046332
				},
				{
					"eventType": "comment",
					"text": "\n\n\n\n\n\n\n\n\n\nколесо мыши - зум",
					"background-color": [
						0.7450980392156863,
						0.9215686274509803,
						0.996078431372549,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 865678029349411,
							"parameters": {
								"direction": "down"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 798923876036916,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "camera",
							"sid": 377165157213373,
							"parameters": {
								"instance-variable": "noMouseWheel"
							},
							"isInverted": true
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 930342208637234,
							"parameters": {
								"variable": "zoom",
								"comparison": 5,
								"value": "camera.zoomLimitDown"
							}
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 534397144935805,
							"parameters": {
								"mouse-button": "middle"
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aIns",
							"sid": 987285897650202,
							"parameters": {
								"instance-variable": "gameState",
								"comparison": 0,
								"value": "\"play\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aIns",
							"sid": 473602625694148,
							"parameters": {
								"instance-variable": "onChangeLocation"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aaa",
							"sid": 872291943120367,
							"parameters": {
								"instance-variable": "controlBlock"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aIns",
							"sid": 406899294513343,
							"parameters": {
								"instance-variable": "wheelStatus",
								"value": "\"down\""
							}
						}
					],
					"sid": 281575892931230,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "camera",
									"sid": 653856821472305,
									"parameters": {
										"instance-variable": "linearWheel"
									}
								}
							],
							"actions": [
								{
									"id": "stop-tweens",
									"objectClass": "camera",
									"sid": 153216459934361,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 319442203070847,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale-Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 352063746660397
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 429021618647492
								},
								{
									"id": "is-playing",
									"objectClass": "camera",
									"sid": 300737090222993,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-tweens",
									"objectClass": "camera",
									"sid": 240357466868550,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 566203227391180,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale-Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 650204452878878,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale-Self.zoomStep,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 112051416972781
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 352474874734969
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 701475089684982,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale-Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 368398866573723
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 761834031091278,
									"parameters": {
										"instance-variable": "followerMod",
										"comparison": 0,
										"value": "\"hero\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "camera",
									"sid": 828406080871794,
									"parameters": {
										"instance-variable": "lerpZoomScroll",
										"value": "true"
									}
								}
							],
							"sid": 383856380345930
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 236922162213781,
							"parameters": {
								"direction": "up"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 214078914289114,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "camera",
							"sid": 391070314501282,
							"parameters": {
								"instance-variable": "noMouseWheel"
							},
							"isInverted": true
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 825120408599830,
							"parameters": {
								"variable": "zoom",
								"comparison": 3,
								"value": "camera.zoomLimitUp"
							}
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 530746207269584,
							"parameters": {
								"mouse-button": "middle"
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aIns",
							"sid": 765460116846657,
							"parameters": {
								"instance-variable": "gameState",
								"comparison": 0,
								"value": "\"play\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aIns",
							"sid": 950136047814184,
							"parameters": {
								"instance-variable": "onChangeLocation"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aaa",
							"sid": 266905462092599,
							"parameters": {
								"instance-variable": "controlBlock"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aIns",
							"sid": 843083970503836,
							"parameters": {
								"instance-variable": "wheelStatus",
								"value": "\"up\""
							}
						}
					],
					"sid": 619907451716000,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "camera",
									"sid": 173192018683328,
									"parameters": {
										"instance-variable": "linearWheel"
									}
								}
							],
							"actions": [
								{
									"id": "stop-tweens",
									"objectClass": "camera",
									"sid": 670210044088014,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 583077689877488,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale+Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 421976266029000
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 787735267692024
								},
								{
									"id": "is-playing",
									"objectClass": "camera",
									"sid": 849038229948811,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-tweens",
									"objectClass": "camera",
									"sid": 822911408031259,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\""
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 971461575335522,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale+Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 128091890473204,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale+Self.zoomStep,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 715531225354209
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 874235036762545
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "camera",
									"sid": 905227302664111,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"zoom\"",
										"start-value": "LayoutScale",
										"end-value": "clamp(LayoutScale+Self.zoomStep*zoom,zoomMin,zoomMax)",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 223308676569662
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 525246054990551,
									"parameters": {
										"instance-variable": "followerMod",
										"comparison": 0,
										"value": "\"hero\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "camera",
									"sid": 379248319673467,
									"parameters": {
										"instance-variable": "lerpZoomScroll",
										"value": "true"
									}
								}
							],
							"sid": 447071958770097
						}
					]
				},
				{
					"eventType": "comment",
					"text": "",
					"text-color": [
						0.7058823529411765,
						0.6588235294117647,
						0.8431372549019608,
						1
					],
					"background-color": [
						0.35294117647058826,
						0.4470588235294118,
						0.27450980392156865,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "camera",
							"sid": 202991695158981,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 541740331287415,
							"disabled": true,
							"parameters": {
								"scale": "camera.Tween.Value(\"zoom\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 819521016551252,
							"disabled": true,
							"parameters": {
								"variable": "zoom",
								"value": "camera.Tween.Value(\"zoom\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 779976434062121,
							"parameters": {
								"variable": "zoom",
								"value": "camera.Tween.Value(\"zoom\")"
							}
						},
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 206719928690414,
							"parameters": {
								"scale": "zoom"
							}
						}
					],
					"sid": 344229720617501,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "cursor",
									"sid": 557550893457599,
									"parameters": {
										"instance-variable": "totalScale",
										"value": "Self.sizeCoeff*camera.heroScaleCoeff*(Self.magicN+LayoutScale*Self.magicN)"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "cursor",
									"sid": 980974008388093,
									"parameters": {
										"scale": "Self.totalScale"
									}
								}
							],
							"sid": 321779484368939
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "camera",
									"sid": 140543311699276,
									"parameters": {
										"instance-variable": "borders"
									}
								}
							],
							"actions": [
								{
									"callFunction": "reClamp",
									"sid": 691969268948904
								}
							],
							"sid": 751680081004291
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 664406702736528,
									"parameters": {
										"first-value": "LayoutScale",
										"comparison": 2,
										"second-value": "zoomMin"
									}
								}
							],
							"actions": [
								{
									"id": "set-layout-scale",
									"objectClass": "System",
									"sid": 697512949067021,
									"parameters": {
										"scale": "zoomMin"
									}
								}
							],
							"sid": 590884272723750
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 929876190012368,
									"parameters": {
										"first-value": "round(zoom*1000)",
										"comparison": 0,
										"second-value": "round(LayoutScale*1000)"
									}
								}
							],
							"actions": [
								{
									"id": "set-layout-scale",
									"objectClass": "System",
									"sid": 248996778749708,
									"parameters": {
										"scale": "zoom"
									}
								}
							],
							"sid": 982962890137256,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "camera",
											"sid": 637061148267159,
											"parameters": {
												"instance-variable": "borders"
											}
										}
									],
									"actions": [
										{
											"callFunction": "reClamp",
											"sid": 607302148580834
										}
									],
									"sid": 144357825052286,
									"disabled": true
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "",
					"text-color": [
						0.7058823529411765,
						0.6588235294117647,
						0.8431372549019608,
						1
					],
					"background-color": [
						0.35294117647058826,
						0.4470588235294118,
						0.27450980392156865,
						1
					]
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "follower",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "скроллинг твином"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "camera",
									"sid": 697391363541099,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"x\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "reClamp",
									"sid": 965741756235792,
									"disabled": true
								},
								{
									"id": "set-x",
									"objectClass": "camera",
									"sid": 559915876436959,
									"parameters": {
										"x": "Self.Tween.Value(\"x\")"
									}
								},
								{
									"id": "set-x",
									"objectClass": "camera",
									"sid": 334834547004158,
									"disabled": true,
									"parameters": {
										"x": "clamp(Self.Tween.Value(\"x\"),clampL,clampR)"
									}
								}
							],
							"sid": 719208793179684
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "camera",
									"sid": 791165214477906,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"y\""
									}
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "camera",
									"sid": 350317397962079,
									"parameters": {
										"y": "Self.Tween.Value(\"y\")"
									}
								},
								{
									"id": "set-y",
									"objectClass": "camera",
									"sid": 568269419231561,
									"disabled": true,
									"parameters": {
										"y": "clamp(Self.Tween.Value(\"y\"),clampT,clampD)"
									}
								}
							],
							"sid": 838975485901952
						},
						{
							"eventType": "comment",
							"text": "базовый скроллинг"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 379341328226403,
									"parameters": {
										"instance-variable": "index",
										"comparison": 0,
										"value": "aTools.camindex"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 951756851294021,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aTools.followName"
									}
								}
							],
							"actions": [],
							"sid": 487571780939539,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "camera",
											"sid": 161261023002645,
											"parameters": {
												"instance-variable": "borders"
											}
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 931450441585178,
											"parameters": {
												"x": "clamp(camera.X,clampL,clampR)"
											}
										},
										{
											"id": "scroll-to-y",
											"objectClass": "System",
											"sid": 536383350351127,
											"parameters": {
												"y": "clamp(camera.Y,clampT,clampD)"
											}
										},
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 320592230030729,
											"disabled": true,
											"parameters": {
												"x": "lerp(scrollx,clamp(camera.X,clampL,clampR),1-0.03^dt)"
											}
										},
										{
											"id": "scroll-to-y",
											"objectClass": "System",
											"sid": 145331186452890,
											"disabled": true,
											"parameters": {
												"y": "lerp(scrolly,clamp(camera.Y,clampT,clampD),1-0.03^dt)"
											}
										}
									],
									"sid": 612017412410422
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 990247283996717
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 832476768507373,
											"parameters": {
												"x": "camera.X"
											}
										},
										{
											"id": "scroll-to-y",
											"objectClass": "System",
											"sid": 199745149101054,
											"parameters": {
												"y": "camera.Y"
											}
										}
									],
									"sid": 742833111248996
								},
								{
									"eventType": "comment",
									"text": "твин-перемещение камеры отключает все прочие перемещения через lerp"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "camera",
											"sid": 289219928269071,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"x\""
											},
											"isInverted": true
										},
										{
											"id": "is-playing",
											"objectClass": "camera",
											"sid": 391085208863253,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"y\""
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 335938260087654,
									"children": [
										{
											"eventType": "comment",
											"text": "быстрое движение камеры на старте"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 758419245230232,
													"parameters": {
														"instance-variable": "state",
														"comparison": 0,
														"value": "\"start\""
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 112841598564502,
													"disabled": true,
													"parameters": {
														"x": "lerp(camera.X,basis.X,6*dt)",
														"y": "lerp(camera.Y,basis.Y,6*dt)"
													}
												},
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 164396395373704,
													"parameters": {
														"x": "lerp(camera.X,basis.X,0.1)",
														"y": "lerp(camera.Y,basis.Y,0.1)"
													}
												}
											],
											"sid": 788884949010709,
											"disabled": true,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "trigger-once-while-true",
															"objectClass": "System",
															"sid": 388859299354287
														}
													],
													"actions": [
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 997278488545896,
															"parameters": {
																"seconds": "3",
																"use-timescale": true
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "camera",
															"sid": 297189445890513,
															"parameters": {
																"instance-variable": "state",
																"value": "\"zero\""
															}
														}
													],
													"sid": 597126928591373,
													"disabled": true
												}
											]
										},
										{
											"eventType": "comment",
											"text": " мод: гг всё время в центре, без зума"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 528854207104524,
													"parameters": {
														"instance-variable": "followerMod",
														"comparison": 0,
														"value": "\"hero\""
													}
												},
												{
													"id": "is-playing",
													"objectClass": "camera",
													"sid": 831258704216991,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"zoom\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 881317878861628,
													"disabled": true,
													"parameters": {
														"x": "lerp(camera.X,basis.X,1-0.06^dt)",
														"y": "lerp(camera.Y,basis.Y-60,1-0.06^dt)"
													}
												},
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 389124070475824,
													"disabled": true,
													"parameters": {
														"x": "lerp(camera.X,basis.X,0.03)",
														"y": "lerp(camera.Y,basis.Y-Self.yMinus,0.03)"
													}
												},
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 546372304017941,
													"parameters": {
														"x": "clamp(lerp(camera.X,basis.X,0.03),clampL,clampR)",
														"y": "  clamp(lerp(camera.Y,basis.Y-Self.yMinus,0.03),clampT,clampD)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 652644886727848,
													"disabled": true,
													"parameters": {
														"variable": "lerpCoeff",
														"value": "lerp(lerpCoeff,0.05,42*dt)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 306013248415327,
													"parameters": {
														"variable": "lerpCoeff",
														"value": "lerp(lerpCoeff,0.05,0.1)"
													}
												}
											],
											"sid": 627413670324004,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "trigger-once-while-true",
															"objectClass": "System",
															"sid": 960098654716348
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 606986826032134,
															"parameters": {
																"variable": "c",
																"value": "10"
															}
														}
													],
													"sid": 855948028896090
												}
											]
										},
										{
											"eventType": "comment",
											"text": "мод: гг движется по экрану без скроллинга, пока не подойдёт к краю"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 616158118137105,
													"parameters": {
														"instance-variable": "followerMod",
														"comparison": 0,
														"value": "\"free\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "frame",
													"sid": 994027870599627,
													"parameters": {
														"instance-variable": "n",
														"comparison": 0,
														"value": "frameN"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 991824983929220,
													"parameters": {
														"instance-variable": "subMod",
														"comparison": 1,
														"value": "\"target\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "aBook",
													"sid": 531699888245989,
													"parameters": {
														"instance-variable": "mod",
														"comparison": 1,
														"value": "\"noMouse\""
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "aaa",
													"sid": 134110969773389,
													"parameters": {
														"instance-variable": "controlBlock"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "help",
													"sid": 619705895838731,
													"disabled": true,
													"parameters": {
														"text": "ViewportLeft(\"iso\")"
													}
												}
											],
											"sid": 158856533676894,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "trigger-once-while-true",
															"objectClass": "System",
															"sid": 985176073218858
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 687232622720203,
															"parameters": {
																"variable": "c",
																"value": "20"
															}
														}
													],
													"sid": 647382057298625
												},
												{
													"eventType": "comment",
													"text": " гг приближается к краю"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 747641660419282,
															"parameters": {
																"first-value": "basis.X-ViewportLeft(\"iso\")",
																"comparison": 2,
																"second-value": "ViewportWidth(\"iso\")/10"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 941743811413724,
															"parameters": {
																"first-value": "basis.X-ViewportLeft(\"iso\")",
																"comparison": 4,
																"second-value": "ViewportWidth(\"iso\")/10*9"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 163292539799280,
															"parameters": {
																"first-value": "basis.Y-ViewportTop(\"iso\")",
																"comparison": 2,
																"second-value": "ViewportHeight(\"iso\")/6"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 440402841775477,
															"parameters": {
																"first-value": "basis.Y-ViewportTop(\"iso\")",
																"comparison": 4,
																"second-value": "ViewportHeight(\"iso\")/10*9"
															}
														}
													],
													"actions": [],
													"sid": 719957400429875,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "trigger-once-while-true",
																	"objectClass": "System",
																	"sid": 650704396121054
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 141770187091012,
																	"parameters": {
																		"variable": "lerpCoeff",
																		"value": "0.001"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "camera",
																	"sid": 416823522097275,
																	"parameters": {
																		"instance-variable": "state",
																		"value": "\"hero\""
																	}
																}
															],
															"sid": 580779671924821
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-playing",
																	"objectClass": "camera",
																	"sid": 282392601025016,
																	"behaviorType": "Tween",
																	"parameters": {
																		"tags": "\"zoom\""
																	},
																	"isInverted": true
																}
															],
															"actions": [],
															"sid": 842827702923258,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "trigger-once-while-true",
																			"objectClass": "System",
																			"sid": 269034410407328
																		}
																	],
																	"actions": [
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 561673693043663,
																			"parameters": {
																				"variable": "lerpCoeff",
																				"value": "0.001"
																			}
																		}
																	],
																	"sid": 441160934602130
																},
																{
																	"eventType": "block",
																	"conditions": [],
																	"actions": [
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 179895503367581,
																			"disabled": true,
																			"parameters": {
																				"variable": "lerpCoeff",
																				"value": "lerp(lerpCoeff,0.04,0.06*dt)"
																			}
																		},
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 338231950321179,
																			"parameters": {
																				"variable": "lerpCoeff",
																				"value": "lerp(lerpCoeff,0.01,0.1)"
																			}
																		},
																		{
																			"id": "set-position",
																			"objectClass": "camera",
																			"sid": 314018108040852,
																			"parameters": {
																				"x": "lerp(camera.X,basis.X,lerpCoeff)",
																				"y": "lerp(camera.Y,basis.Y,lerpCoeff)"
																			}
																		}
																	],
																	"sid": 876219326764783
																}
															]
														}
													],
													"isOrBlock": true
												},
												{
													"eventType": "comment",
													"text": " гг в центре"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 817183886483433
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "camera",
															"sid": 136233835103452,
															"parameters": {
																"instance-variable": "state",
																"comparison": 0,
																"value": "\"manual\""
															},
															"isInverted": true
														}
													],
													"actions": [],
													"sid": 285273585088208,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "basis",
																	"sid": 207413689633859,
																	"parameters": {
																		"instance-variable": "move"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 483413679994507,
																	"disabled": true,
																	"parameters": {
																		"variable": "lerpCoeff",
																		"value": "lerp(lerpCoeff,0.005,1.8*dt)"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 545137228036606,
																	"parameters": {
																		"variable": "lerpCoeff",
																		"value": "lerp(lerpCoeff,0.005,0.2)"
																	}
																}
															],
															"sid": 411348112543026
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "basis",
																	"sid": 302904360263240,
																	"parameters": {
																		"instance-variable": "move"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 815136182549531,
																	"disabled": true,
																	"parameters": {
																		"variable": "lerpCoeff",
																		"value": "lerp(lerpCoeff,0,6*dt)"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 244949158764356,
																	"parameters": {
																		"variable": "lerpCoeff",
																		"value": "lerp(lerpCoeff,0.05,0.1)"
																	}
																}
															],
															"sid": 222937680592442
														}
													]
												}
											]
										},
										{
											"eventType": "comment",
											"text": "скроллинг при зуме"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-playing",
													"objectClass": "camera",
													"sid": 994942709567604,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"zoom\""
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "camera",
													"sid": 400014480220891,
													"parameters": {
														"instance-variable": "lerpZoomScroll"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 687366798328385,
													"parameters": {
														"instance-variable": "state",
														"comparison": 0,
														"value": "\"start\""
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 847916347537175,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "trigger-once-while-true",
															"objectClass": "System",
															"sid": 829248438160201
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 364902046491217,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "0.02"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "camera",
															"sid": 787405690199936,
															"parameters": {
																"instance-variable": "state",
																"value": "\"zoom\""
															}
														}
													],
													"sid": 230189533769079
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "camera",
															"sid": 727156162864332,
															"parameters": {
																"instance-variable": "followerMod",
																"comparison": 0,
																"value": "\"free\""
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 132048990320518,
															"disabled": true,
															"parameters": {
																"x": "lerp(camera.X,basis.X,1-0.06^dt)",
																"y": "lerp(camera.Y,basis.Y-60,1-0.06^dt)"
															}
														},
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 516485592666448,
															"disabled": true,
															"parameters": {
																"x": "lerp(camera.X,basis.X,0.03)",
																"y": "lerp(camera.Y,basis.Y-60,0.03)"
															}
														},
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 847459051129889,
															"disabled": true,
															"parameters": {
																"x": "lerp(Self.X,Mouse.X,0.03)",
																"y": "lerp(Self.Y,Mouse.Y,0.03)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 306361871868857,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "lerp(lerpCoeff,0.07,60*dt*camera.lm)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 858056031287072,
															"disabled": true,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "lerp(lerpCoeff,0.07,0.12)"
															}
														}
													],
													"sid": 550114020238089,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "camera",
																	"sid": 409117182392046,
																	"parameters": {
																		"instance-variable": "subMod",
																		"comparison": 0,
																		"value": "\"cursor\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-position",
																	"objectClass": "camera",
																	"sid": 246972879876838,
																	"parameters": {
																		"x": "lerp(Self.X,Mouse.X,0.02)",
																		"y": "lerp(Self.Y,Mouse.Y,0.02)"
																	}
																}
															],
															"sid": 722788105772167
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "camera",
																	"sid": 353881079990451,
																	"parameters": {
																		"instance-variable": "subMod",
																		"comparison": 0,
																		"value": "\"target\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-position",
																	"objectClass": "camera",
																	"sid": 649956503443942,
																	"parameters": {
																		"x": "lerp(Self.X,Self.selfX,0.03)",
																		"y": "lerp(Self.Y,Self.selfY,0.03)"
																	}
																}
															],
															"sid": 888695449455716
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "camera",
															"sid": 527965570207557,
															"parameters": {
																"instance-variable": "followerMod",
																"comparison": 0,
																"value": "\"hero\""
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 930528720832272,
															"disabled": true,
															"parameters": {
																"x": "lerp(camera.X,basis.X,1-0.06^dt)",
																"y": "lerp(camera.Y,basis.Y-60,1-0.06^dt)"
															}
														},
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 154146668288907,
															"parameters": {
																"x": "lerp(camera.X,basis.X,0.03*camera.lm)",
																"y": "lerp(camera.Y,basis.Y-Self.yMinus,0.03*camera.lm)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 983720094649853,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "lerp(lerpCoeff,0.07,60*dt)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 664545815608035,
															"disabled": true,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "lerp(lerpCoeff,0.07,0.12)"
															}
														}
													],
													"sid": 484982335760997,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 137344744287567,
																	"parameters": {
																		"variable": "zoom",
																		"comparison": 4,
																		"value": "1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "camera",
																	"sid": 645475600524337,
																	"parameters": {
																		"instance-variable": "yMinus",
																		"value": "Self.yMinusConst/zoom"
																	}
																}
															],
															"sid": 419626219314901
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "camera",
															"sid": 783999288167586,
															"parameters": {
																"instance-variable": "followerMod",
																"comparison": 0,
																"value": "\"mark\""
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "camera",
															"sid": 262055204853879,
															"parameters": {
																"x": "lerp(Self.X,aIns.markCamFollowX,0.03*camera.lm)",
																"y": "lerp(Self.Y,aIns.markCamFollowY,0.03*camera.lm)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 507271384110478,
															"parameters": {
																"variable": "lerpCoeff",
																"value": "lerp(lerpCoeff,0.07,60*dt)"
															}
														}
													],
													"sid": 878691851777493
												}
											]
										},
										{
											"eventType": "comment",
											"text": "лерп на координаты"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "camera",
													"sid": 959483916931646,
													"parameters": {
														"instance-variable": "followerMod",
														"comparison": 0,
														"value": "\"mark\""
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "camera",
													"sid": 298019126766203,
													"parameters": {
														"instance-variable": "lerpZoomScroll"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 857079527437172,
													"parameters": {
														"x": "lerp(camera.X,aIns.markCamFollowX,0.03)",
														"y": "lerp(camera.Y,aIns.markCamFollowY-Self.yMinus,0.03)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 981226594498329,
													"parameters": {
														"variable": "lerpCoeff",
														"value": "lerp(lerpCoeff,0.05,0.1)"
													}
												}
											],
											"sid": 554937869634541,
											"disabled": true
										},
										{
											"eventType": "comment",
											"text": "\n\nскроллинг мышью включается если мышь подошла к краю экрана"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-between-values",
													"objectClass": "System",
													"sid": 969570246274859,
													"parameters": {
														"value": "Mouse.X(\"cursor\")",
														"lower-bound": "20",
														"upper-bound": "1260"
													},
													"isInverted": true
												},
												{
													"id": "is-between-values",
													"objectClass": "System",
													"sid": 501903054031389,
													"parameters": {
														"value": "Mouse.Y(\"cursor\")",
														"lower-bound": "20",
														"upper-bound": "710"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 588826429243214,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-playing",
															"objectClass": "camera",
															"sid": 981693697027852,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"zoom\""
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "camera",
															"sid": 371233624735140,
															"parameters": {
																"instance-variable": "noMouseScrollPerZoom"
															}
														}
													],
													"actions": [],
													"sid": 357390999165642
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 458588626523101
														},
														{
															"id": "is-group-active",
															"objectClass": "System",
															"sid": 949614859092550,
															"parameters": {
																"group-name": "\"mouseScrolling\""
															},
															"isInverted": true
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "camera",
															"sid": 475981273780548,
															"parameters": {
																"instance-variable": "state",
																"comparison": 0,
																"value": "\"start\""
															},
															"isInverted": true
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "aBook",
															"sid": 587618793863053,
															"parameters": {
																"instance-variable": "mod",
																"comparison": 1,
																"value": "\"noMouse\""
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "aaa",
															"sid": 637310069739591,
															"parameters": {
																"instance-variable": "controlBlock"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "camera",
															"sid": 376692185048826,
															"parameters": {
																"instance-variable": "state",
																"value": "\"manual\""
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 906126029239655,
															"parameters": {
																"group-name": "\"mouseScrolling\"",
																"state": "activated"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "camera",
															"sid": 200523032011618,
															"disabled": true,
															"parameters": {
																"instance-variable": "followerMod",
																"value": "\"mouse\""
															}
														},
														{
															"id": "set-position",
															"objectClass": "screenGumX",
															"sid": 511979683657637,
															"disabled": true,
															"parameters": {
																"x": "cursor.X>640?1280:0",
																"y": "cursor.Y"
															}
														},
														{
															"id": "set-angle",
															"objectClass": "screenGumX",
															"sid": 148213714218366,
															"disabled": true,
															"parameters": {
																"angle": "cursor.X>640?180:0"
															}
														},
														{
															"id": "set-animation",
															"objectClass": "screenGumX",
															"sid": 514362524835628,
															"disabled": true,
															"parameters": {
																"animation": "\"gum\"",
																"from": "beginning"
															}
														}
													],
													"sid": 458688933413786
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "comment",
											"text": "иначе отключается"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 873126743627355
												},
												{
													"id": "is-group-active",
													"objectClass": "System",
													"sid": 354062830152198,
													"parameters": {
														"group-name": "\"mouseScrolling\""
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 456311147200942,
													"parameters": {
														"instance-variable": "state",
														"value": "\"hero\""
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 507043461466387,
													"parameters": {
														"group-name": "\"mouseScrolling\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 309454711654590,
													"disabled": true,
													"parameters": {
														"instance-variable": "followerMod",
														"value": "\"hero\""
													}
												},
												{
													"id": "set-animation",
													"objectClass": "screenGumX",
													"sid": 209246912194488,
													"disabled": true,
													"parameters": {
														"animation": "\"zero\"",
														"from": "beginning"
													}
												}
											],
											"sid": 992420045142360
										}
									],
									"isOrBlock": true
								}
							]
						},
						{
							"eventType": "comment",
							"text": ""
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "mouseScrolling",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "camera",
											"sid": 539226112400492,
											"parameters": {
												"instance-variable": "index",
												"comparison": 0,
												"value": "aTools.camindex"
											}
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 227248692725166,
											"parameters": {
												"object": "indiCocoon"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 807489096060058,
									"disabled": true,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 588435156367275,
													"parameters": {
														"first-value": "Mouse.X(\"cursor\")",
														"comparison": 2,
														"second-value": "5"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 362972651593541,
													"parameters": {
														"first-value": "Mouse.X(\"cursor\")",
														"comparison": 4,
														"second-value": "1275"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 568461036975626,
													"parameters": {
														"first-value": "Mouse.Y(\"cursor\")",
														"comparison": 2,
														"second-value": "5"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 706369201250803,
													"parameters": {
														"first-value": "Mouse.Y(\"cursor\")",
														"comparison": 4,
														"second-value": "715"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "camera",
													"sid": 591557493227385,
													"parameters": {
														"x": "lerp(camera.X,Mouse.X,1.4*dt)",
														"y": "lerp(camera.Y,Mouse.Y,1.4*dt)"
													}
												}
											],
											"sid": 782012133730472,
											"disabled": true,
											"isOrBlock": true
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "camera",
											"sid": 928405406273113,
											"parameters": {
												"instance-variable": "index",
												"comparison": 0,
												"value": "aTools.camindex"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "aUIN",
											"sid": 929932274627894,
											"parameters": {
												"instance-variable": "noMouseScrolling"
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "aTools",
											"sid": 644075968670496,
											"parameters": {
												"instance-variable": "mouseScrolling"
											}
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 288054663707229,
											"parameters": {
												"object": "cocobutton"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 908124642986018,
											"parameters": {
												"object": "panelGradient"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 375787938751921,
											"parameters": {
												"object": "buttSetup"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 609953477983936,
											"parameters": {
												"object": "indiCocoon"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 381469512067417,
											"parameters": {
												"object": "buttonRocket"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 331485074231516,
											"disabled": true,
											"parameters": {
												"object": "inventory"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 670825155313425,
											"disabled": true,
											"parameters": {
												"object": "onion"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 754811475096021,
											"disabled": true,
											"parameters": {
												"object": "onionR"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 946345586351091,
											"disabled": true,
											"parameters": {
												"object": "onionR"
											},
											"isInverted": true
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "aTools",
											"sid": 203034039763678,
											"disabled": true,
											"parameters": {
												"instance-variable": "pointType",
												"comparison": 1,
												"value": "\"button\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "camera",
											"sid": 573391423973494,
											"parameters": {
												"instance-variable": "subMod",
												"comparison": 1,
												"value": "\"target\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "aBook",
											"sid": 753605934339199,
											"parameters": {
												"instance-variable": "mod",
												"comparison": 1,
												"value": "\"noMouse\""
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "aaa",
											"sid": 720997492786618,
											"parameters": {
												"instance-variable": "controlBlock"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 889179644841969,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 317049836438882,
													"parameters": {
														"first-value": "cursor.X",
														"comparison": 2,
														"second-value": "20"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 677275054496363,
													"disabled": true,
													"parameters": {
														"instance-variable": "followerMod",
														"value": "\"mouse\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 559769741556398,
													"parameters": {
														"variable": "xx",
														"value": "(20-clamp(cursor.X,0,1280))/camera.scrollSlowCoeff"
													}
												},
												{
													"id": "set-x",
													"objectClass": "camera",
													"sid": 105187862510000,
													"parameters": {
														"x": "lerp(camera.X,Mouse.X,xx*dt)"
													}
												}
											],
											"sid": 133824306047662
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 250788877606932
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 257114997566410,
													"parameters": {
														"first-value": "cursor.X",
														"comparison": 4,
														"second-value": "1260"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 877349031264545,
													"disabled": true,
													"parameters": {
														"instance-variable": "followerMod",
														"value": "\"mouse\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 165197055760718,
													"parameters": {
														"variable": "xx",
														"value": "abs(1260-clamp(cursor.X,0,1280))/camera.scrollSlowCoeff"
													}
												},
												{
													"id": "set-x",
													"objectClass": "camera",
													"sid": 868590601730331,
													"parameters": {
														"x": "lerp(camera.X,Mouse.X,xx*dt)"
													}
												}
											],
											"sid": 239369286661357
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 790041847062378,
													"disabled": true
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 555667687972203,
													"parameters": {
														"first-value": "cursor.y",
														"comparison": 2,
														"second-value": "20"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 418489713775023,
													"disabled": true,
													"parameters": {
														"instance-variable": "followerMod",
														"value": "\"mouse\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 401508936849037,
													"parameters": {
														"variable": "yy",
														"value": "(20-clamp(cursor.Y,0,720))/camera.scrollSlowCoeff"
													}
												},
												{
													"id": "set-y",
													"objectClass": "camera",
													"sid": 604490359222171,
													"parameters": {
														"y": "lerp(camera.Y,Mouse.Y,yy*dt)"
													}
												}
											],
											"sid": 588780608484378
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 875716047712175
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 634534501760518,
													"parameters": {
														"first-value": "cursor.Y",
														"comparison": 4,
														"second-value": "700"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "camera",
													"sid": 183465339690548,
													"disabled": true,
													"parameters": {
														"instance-variable": "followerMod",
														"value": "\"mouse\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 592321134573300,
													"parameters": {
														"variable": "yy",
														"value": "abs(700-clamp(cursor.Y,0,720))/camera.scrollSlowCoeff"
													}
												},
												{
													"id": "set-y",
													"objectClass": "camera",
													"sid": 935951933796671,
													"parameters": {
														"y": "lerp(camera.Y,Mouse.Y,yy*dt)"
													}
												}
											],
											"sid": 331169742978648
										}
									]
								}
							],
							"sid": 597394245023089
						}
					],
					"sid": 549099305652733,
					"background-color": [
						0.8666666666666667,
						0.796078431372549,
						0.9058823529411765,
						1
					]
				}
			],
			"sid": 302481250850277,
			"background-color": [
				0.8666666666666667,
				0.796078431372549,
				0.9058823529411765,
				1
			]
		},
		{
			"eventType": "comment",
			"text": "\n   Перемещение рамки по макету"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "camMove",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 185768649404569,
							"parameters": {
								"key": 49
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 172370098238515,
							"parameters": {
								"instance-variable": "goTo",
								"value": "9"
							}
						},
						{
							"callFunction": "gotoFrame",
							"sid": 371192774155549,
							"parameters": [
								"0",
								"-1",
								"\"\"",
								"0",
								"0"
							]
						}
					],
					"sid": 821217880721507,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 379357141692255,
									"parameters": {
										"object": "Bit"
									}
								}
							],
							"actions": [],
							"sid": 340387353354981
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Bit",
									"sid": 783216773130277,
									"parameters": {
										"unique-id": "9"
									}
								}
							],
							"actions": [],
							"sid": 267260713488287
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 710081272316806,
							"parameters": {
								"key": 50
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 691776806207621,
							"parameters": {
								"instance-variable": "goTo",
								"value": "10"
							}
						},
						{
							"callFunction": "gotoFrame",
							"sid": 921303563718808,
							"parameters": [
								"0",
								"-1",
								"\"\"",
								"0",
								"0"
							]
						}
					],
					"sid": 819646823427640,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 654029724948572,
									"parameters": {
										"object": "Bit"
									}
								}
							],
							"actions": [],
							"sid": 985581767856688
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Bit",
									"sid": 839336750644360,
									"parameters": {
										"unique-id": "10"
									}
								}
							],
							"actions": [],
							"sid": 204017971615993
						}
					]
				}
			],
			"sid": 856156497187537,
			"background-color": [
				0.8666666666666667,
				0.796078431372549,
				0.9058823529411765,
				1
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "setupCamLoc",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 854785034056571,
							"parameters": {
								"key": 50
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 573854644864297,
							"parameters": {
								"instance-variable": "goTo",
								"value": "10"
							}
						},
						{
							"callFunction": "gotoFrame",
							"sid": 831492570408222,
							"parameters": [
								"0",
								"-1",
								"\"\"",
								"0",
								"0"
							]
						}
					],
					"sid": 247403502642343,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 755736040393570,
									"parameters": {
										"object": "Bit"
									}
								}
							],
							"actions": [],
							"sid": 129435149319118
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Bit",
									"sid": 856254964327338,
									"parameters": {
										"unique-id": "10"
									}
								}
							],
							"actions": [],
							"sid": 914349338879868
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Bit",
							"sid": 199064324751074,
							"parameters": {
								"unique-id": "camera.goTo"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "camera",
							"sid": 436679377757963,
							"disabled": true,
							"parameters": {
								"x": "lerp(Self.X,Bit.X,0.1)",
								"y": "lerp(Self.Y,Bit.Y,0.1)"
							}
						},
						{
							"id": "set-position",
							"objectClass": "camera",
							"sid": 282477460980543,
							"parameters": {
								"x": "lerp(Self.X,Mouse.X,0.1)",
								"y": "lerp(Self.Y,Mouse.Y,0.1)"
							}
						}
					],
					"sid": 512746843380491
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 429474822958088,
							"parameters": {
								"mouse-button": "right"
							}
						}
					],
					"actions": [],
					"sid": 685564166613371,
					"children": [
						{
							"eventType": "variable",
							"name": "a",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 781427037775361
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "move-at-angle",
									"objectClass": "frame",
									"sid": 736331328501768,
									"parameters": {
										"angle": "a",
										"distance": "1"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 521265823404219,
									"parameters": {
										"variable": "a",
										"value": "1"
									}
								},
								{
									"callFunction": "reClamp",
									"sid": 949486862091102
								}
							],
							"sid": 249439653186044
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 135399340495058,
							"parameters": {
								"mouse-button": "left"
							}
						}
					],
					"actions": [],
					"sid": 832047131511844,
					"children": [
						{
							"eventType": "variable",
							"name": "a",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 668978274285425
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-width",
									"objectClass": "frame",
									"sid": 355836674105199,
									"parameters": {
										"width": "Self.Width+cos(a)*2"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 327349749162125,
									"parameters": {
										"variable": "a",
										"value": "1"
									}
								},
								{
									"callFunction": "reZoom",
									"sid": 730837127083609
								}
							],
							"sid": 693422485991846
						}
					]
				}
			],
			"sid": 409130788157128,
			"background-color": [
				0.8666666666666667,
				0.796078431372549,
				0.9058823529411765,
				1
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\n"
		},
		{
			"eventType": "include",
			"includeSheet": "_onStartLayouts"
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n    масштабирование персонажей и объектов"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "cameraPerspective",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "comment",
					"text": "\n\n\n    постоянное масштабирование персонажей на базах"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "basis",
							"sid": 229352143411467
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "basis",
							"sid": 791100785052771,
							"parameters": {
								"instance-variable": "outsideScale"
							}
						}
					],
					"actions": [],
					"sid": 665151547059219,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "camera",
									"sid": 327663809455913,
									"parameters": {
										"instance-variable": "index",
										"comparison": 0,
										"value": "aTools.camindex"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 348152832308220,
									"disabled": true,
									"parameters": {
										"instance-variable": "n",
										"comparison": 0,
										"value": "aTools.camindex"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 795347740129038,
									"parameters": {
										"object": "basis"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 897614561358909,
									"parameters": {
										"instance-variable": "z",
										"value": "clamp(round(Self.Y-camera.horizon),camera.horizonLimit,5000)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 470664743508413,
									"parameters": {
										"instance-variable": "zScale",
										"value": "abs(Self.z/camera.zField)"
									}
								}
							],
							"sid": 561924348011134,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 393661034942254,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "basis.name"
											}
										}
									],
									"actions": [],
									"sid": 250206164831893,
									"children": [
										{
											"eventType": "comment",
											"text": "  !\n Какой-то баг с масштабированием через размеры. Через scale всё в порядке."
										},
										{
											"bookmark": true,
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "basis",
													"sid": 507868456261694,
													"parameters": {
														"instance-variable": "move"
													}
												},
												{
													"id": "every-x-seconds",
													"objectClass": "System",
													"sid": 819228472724388,
													"disabled": true,
													"parameters": {
														"interval-seconds": "0.1"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 220506441832624,
													"parameters": {
														"instance-variable": "fullScale",
														"value": "Self.zScale*Self.coeff"
													}
												},
												{
													"id": "set-size",
													"objectClass": "person",
													"sid": 161032633472056,
													"disabled": true,
													"parameters": {
														"width": "Self.ImageWidth*basis.fullScale",
														"height": "Self.ImageHeight*basis.fullScale"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 481748171726024,
													"parameters": {
														"instance-variable": "basisFullScale",
														"value": "basis.fullScale"
													}
												},
												{
													"id": "set-scale",
													"objectClass": "person",
													"sid": 401799896261053,
													"parameters": {
														"scale": "basis.fullScale"
													}
												}
											],
											"sid": 100271609536924,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "basis",
															"sid": 896808458006426,
															"parameters": {
																"instance-variable": "jumpAbil"
															},
															"isInverted": true
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "shad",
															"sid": 453673394142088,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "basis.name"
															}
														}
													],
													"actions": [
														{
															"id": "set-size",
															"objectClass": "shad",
															"sid": 196527563606716,
															"parameters": {
																"width": "Self.w*basis.zScale",
																"height": "Self.w*basis.zScale*Self.isoCoeff"
															}
														}
													],
													"sid": 212032172143737
												}
											]
										},
										{
											"eventType": "comment",
											"text": "    тени, масштабирование и прозрачность"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "jumper",
													"sid": 116218539752858,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "shad",
													"sid": 119349321204299,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "jumper.name"
													}
												}
											],
											"actions": [],
											"sid": 965827720838654,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "jumper",
															"sid": 171038052313605,
															"parameters": {
																"instance-variable": "jump"
															}
														}
													],
													"actions": [
														{
															"id": "set-size",
															"objectClass": "shad",
															"sid": 739107180152448,
															"parameters": {
																"width": "Self.w*basis.zScale+distance(0,Self.Y,0,person.Y)/2",
																"height": "(Self.w*basis.zScale+distance(0,Self.Y,0,person.Y)/2)*Self.isoCoeff"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "shad",
															"sid": 422924740719295,
															"parameters": {
																"opacity": "Self.opas-distance(0,Self.Y,0,person.Y)/5"
															}
														}
													],
													"sid": 714117447537000
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "jumper",
															"sid": 979746772529737,
															"parameters": {
																"instance-variable": "jump"
															},
															"isInverted": true
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "basis",
															"sid": 932059632889726,
															"parameters": {
																"instance-variable": "move"
															}
														}
													],
													"actions": [
														{
															"id": "set-size",
															"objectClass": "shad",
															"sid": 963559632601928,
															"parameters": {
																"width": "Self.w*basis.zScale",
																"height": "Self.w*basis.zScale*Self.isoCoeff"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "shad",
															"sid": 418612436374656,
															"disabled": true,
															"parameters": {
																"opacity": "Self.opas-distance(0,Self.Y,0,person.Y)/5"
															}
														}
													],
													"sid": 924410764988192
												}
											]
										}
									]
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "    постоянное масштабирование движущихся объектов"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "zScale",
							"sid": 333785376877949,
							"parameters": {
								"instance-variable": "moveZScale"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 779750039988689,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.camindex"
							}
						}
					],
					"actions": [],
					"sid": 592789920453761,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "zScale",
									"sid": 838328822768864,
									"parameters": {
										"instance-variable": "nLocation",
										"comparison": 0,
										"value": "aTools.camindex"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "zScale",
									"sid": 453108036085880,
									"parameters": {
										"instance-variable": "nLocation",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 955817051164738,
									"parameters": {
										"instance-variable": "zet",
										"value": "clamp(Self.Y-camera.horizon,camera.horizonLimit,5000)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 825125382623677,
									"parameters": {
										"instance-variable": "zetScale",
										"value": "abs(Self.zet/camera.zField)"
									}
								}
							],
							"sid": 604448429702033,
							"isOrBlock": true
						}
					]
				}
			],
			"sid": 696074733549383
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n\n   персональное масштабирование функцией"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "onselffunction0",
					"objectClass": "zScale",
					"sid": 576965311604834,
					"behaviorType": "sfZScale",
					"parameters": {
						"function_name:0": "\"zScale\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 456803727492890,
					"disabled": true,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 389489501676421,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.camindex"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "zScale",
					"sid": 425918873642361,
					"parameters": {
						"instance-variable": "coeff",
						"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
					}
				}
			],
			"sid": 342399865533489,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "camera",
							"sid": 600451174988409,
							"parameters": {
								"instance-variable": "perspective"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "zScale",
							"sid": 334610839357730,
							"parameters": {
								"instance-variable": "zet",
								"value": "clamp(Self.Y,camera.horizonLimit,5000)-camera.horizon"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "zScale",
							"sid": 467648911995047,
							"parameters": {
								"instance-variable": "zetScale",
								"value": "abs(Self.zet/camera.zField)"
							}
						}
					],
					"sid": 972785961807873
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "zScale",
							"sid": 342456105968623,
							"disabled": true,
							"parameters": {
								"width": "Self.zetScale*Self.coeff*Self.ImageWidth",
								"height": "Self.zetScale*Self.coeff*Self.ImageHeight"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "zScale",
							"sid": 497157606822457,
							"parameters": {
								"scale": "Self.zetScale*Self.coeff"
							}
						}
					],
					"sid": 979831850980646
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "onselffunction0",
					"objectClass": "basis",
					"sid": 379890795630051,
					"behaviorType": "sf",
					"parameters": {
						"function_name:0": "\"zScale\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 814092371043581,
					"disabled": true,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.n"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 261709411547933,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.camindex"
					}
				}
			],
			"actions": [],
			"sid": 912450759368685,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "camera",
							"sid": 819953676253180,
							"parameters": {
								"instance-variable": "perspective"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 774707408115355,
							"parameters": {
								"instance-variable": "z",
								"value": "clamp(round(Self.Y-camera.horizon),camera.horizonLimit,5000)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 574026954872371,
							"parameters": {
								"instance-variable": "zScale",
								"value": "abs(Self.z/camera.zField)"
							}
						}
					],
					"sid": 131494535367074
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 576398749385501,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "basis.name"
							}
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "shad",
							"sid": 846493022986742,
							"parameters": {
								"width": "Self.w*basis.zScale",
								"height": "Self.w*basis.zScale*Self.isoCoeff"
							}
						}
					],
					"sid": 210880785882229
				},
				{
					"bookmark": true,
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 440939872155917,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "basis.name"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 537363910146635,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "person.name"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 466713216349224,
							"parameters": {
								"instance-variable": "startScaleCoeff",
								"value": "person.startScaleCoeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 635387352035344,
							"parameters": {
								"instance-variable": "coeff",
								"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "person",
							"sid": 214876942479685,
							"disabled": true,
							"parameters": {
								"instance-variable": "coeff",
								"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
							}
						},
						{
							"id": "set-size",
							"objectClass": "person",
							"sid": 301170815071655,
							"disabled": true,
							"parameters": {
								"width": "Self.ImageWidth*basis.zScale*Self.coeff",
								"height": "Self.ImageHeight*basis.zScale*Self.coeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 748594961545690,
							"parameters": {
								"instance-variable": "fullScale",
								"value": "Self.zScale*Self.coeff"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "person",
							"sid": 314695100784150,
							"parameters": {
								"instance-variable": "basisFullScale",
								"value": "basis.fullScale"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "person",
							"sid": 955219576794715,
							"parameters": {
								"scale": "basis.fullScale"
							}
						}
					],
					"sid": 925747586366777
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n\n\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "onselffunction0",
					"objectClass": "basis",
					"sid": 583950900584726,
					"behaviorType": "sf",
					"parameters": {
						"function_name:0": "\"selfScale\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 496174000021636,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "basis.name"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "shad",
					"sid": 576977541017787,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "basis.name"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "camera",
					"sid": 409709285840252,
					"disabled": true,
					"parameters": {
						"instance-variable": "index",
						"comparison": 0,
						"value": "aTools.camindex"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 185964141173372,
					"disabled": true,
					"parameters": {
						"instance-variable": "coeff",
						"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "basis",
					"sid": 122856273644908,
					"parameters": {
						"instance-variable": "startScaleCoeff",
						"value": "person.startScaleCoeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "basis",
					"sid": 550643392279177,
					"parameters": {
						"instance-variable": "coeff",
						"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
					}
				},
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 905722875317668,
					"disabled": true,
					"parameters": {
						"text": "aBook.heroScaleCoeff&\"  \"&basis.coeff&\"  \"&basis.startScaleCoeff"
					}
				},
				{
					"id": "set-size",
					"objectClass": "person",
					"sid": 604456892668656,
					"disabled": true,
					"parameters": {
						"width": "Self.ImageWidth*Self.coeff",
						"height": "Self.ImageHeight*Self.coeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "basis",
					"sid": 391686096042189,
					"parameters": {
						"instance-variable": "fullScale",
						"value": "Self.zScale*Self.coeff"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 951087294491391,
					"parameters": {
						"instance-variable": "basisFullScale",
						"value": "basis.fullScale"
					}
				},
				{
					"id": "set-scale",
					"objectClass": "person",
					"sid": 908367654103045,
					"parameters": {
						"scale": "basis.fullScale"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "shad",
					"sid": 388543212964487,
					"parameters": {
						"instance-variable": "w",
						"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "shad",
					"sid": 179252828021854,
					"parameters": {
						"instance-variable": "isoCoeff",
						"value": "aTools.isoCoeff+0.2"
					}
				},
				{
					"id": "set-size",
					"objectClass": "shad",
					"sid": 570890265286404,
					"parameters": {
						"width": "Self.w",
						"height": "Self.w*Self.isoCoeff"
					}
				},
				{
					"id": "set-opacity",
					"objectClass": "shad",
					"sid": 994940784676023,
					"parameters": {
						"opacity": "Self.opas"
					}
				}
			],
			"sid": 568757837928281
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "cameraIsometric",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "camera",
							"sid": 904565144075649,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"startFrame\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "frame",
							"sid": 756776881037807,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "aTools.n"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "groundPoint",
							"sid": 287315948999594,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "camera.index"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "horizonPoint",
							"sid": 186193662693933,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "camera.index"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "horizonLimit",
							"sid": 195705319512257,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "camera.index"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "    размеры поля и коэффициент изометрии"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 579137764308639,
							"parameters": {
								"instance-variable": "horizon",
								"value": "horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 715929757047104,
							"parameters": {
								"instance-variable": "ground",
								"value": "groundPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 721116608447128,
							"parameters": {
								"instance-variable": "horizonLimit",
								"value": "horizonLimit.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 224213049429865,
							"parameters": {
								"instance-variable": "zField",
								"value": "groundPoint.Y-horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 977192405026164,
							"parameters": {
								"instance-variable": "isoCoeff",
								"value": "roundToDp((camera.zField/(frame.Height*1.7777)*65)/100,2)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 670591511235726,
							"parameters": {
								"instance-variable": "heroScaleCoeff",
								"value": "camera.heroScaleCoeff"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 663321580488098,
							"disabled": true,
							"parameters": {
								"text": "\"start!\""
							}
						}
					],
					"sid": 176472828479704,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 974984009499723,
									"parameters": {
										"instance-variable": "onBase"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 673991895905577,
									"parameters": {
										"object": "person"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 566577567665845,
									"disabled": true,
									"parameters": {
										"instance-variable": "zScaleLikeHero",
										"value": "aBook.heroScaleCoeff"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 349013143590599,
									"parameters": {
										"instance-variable": "coeff",
										"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
									}
								},
								{
									"id": "set-size",
									"objectClass": "person",
									"sid": 964681889453826,
									"parameters": {
										"width": "Self.ImageWidth*Self.coeff",
										"height": "Self.ImageHeight*Self.coeff"
									}
								}
							],
							"sid": 254302126051872,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "shad",
											"sid": 120455713897078,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "person.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "shad",
											"sid": 155049395351344,
											"parameters": {
												"instance-variable": "w",
												"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "shad",
											"sid": 313498119050967,
											"parameters": {
												"instance-variable": "isoCoeff",
												"value": "aTools.isoCoeff+0.2"
											}
										},
										{
											"id": "set-size",
											"objectClass": "shad",
											"sid": 265008616392934,
											"parameters": {
												"width": "Self.w",
												"height": "Self.w*Self.isoCoeff"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "shad",
											"sid": 485288261099748,
											"parameters": {
												"opacity": "Self.opas"
											}
										}
									],
									"sid": 645330849559245,
									"disabled": true
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "zScale",
									"sid": 871239247118536,
									"parameters": {
										"instance-variable": "scalable"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 715240407133888,
									"parameters": {
										"instance-variable": "zet",
										"value": "1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 782673937320364,
									"parameters": {
										"instance-variable": "zetScale",
										"value": "1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 255746551073068,
									"parameters": {
										"instance-variable": "coeff",
										"value": "Self.ImageWidth*Self.startScaleCoeff*aBook.heroScaleCoeff"
									}
								}
							],
							"sid": 163619663222817,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 172417420909407,
									"parameters": {
										"instance-variable": "onBase"
									}
								}
							],
							"actions": [],
							"sid": 642735207260481,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 801384642730357,
											"parameters": {
												"object": "basis"
											}
										}
									],
									"actions": [],
									"sid": 510731876715606,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 972657000436469,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 433903762980530,
													"parameters": {
														"instance-variable": "zScale",
														"value": "1"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 808729337425051,
													"parameters": {
														"instance-variable": "coeff",
														"value": "Self.startScaleCoeff*aBook.heroScaleCoeff"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "person",
													"sid": 406455557748369,
													"disabled": true,
													"parameters": {
														"instance-variable": "zScaleLikeHero",
														"value": "aBook.heroScaleCoeff"
													}
												},
												{
													"id": "set-size",
													"objectClass": "person",
													"sid": 977386933664168,
													"parameters": {
														"width": "Self.ImageWidth*Self.coeff",
														"height": "Self.ImageHeight*Self.coeff"
													}
												}
											],
											"sid": 655867264244392
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "shad",
													"sid": 353009397819395,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "shad",
													"sid": 950355706008305,
													"parameters": {
														"instance-variable": "w",
														"value": "Self.startScaleCoeff*aBook.heroScaleCoeff*Self.ImageWidth"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "shad",
													"sid": 227565414094538,
													"parameters": {
														"instance-variable": "isoCoeff",
														"value": "aTools.isoCoeff+0.2"
													}
												},
												{
													"id": "set-size",
													"objectClass": "shad",
													"sid": 105598220113643,
													"parameters": {
														"width": "Self.w",
														"height": "Self.w*Self.isoCoeff"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "shad",
													"sid": 587084565681528,
													"parameters": {
														"opacity": "Self.opas"
													}
												}
											],
											"sid": 175397613139614
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "person",
							"sid": 858063739071817,
							"disabled": true,
							"parameters": {
								"instance-variable": "isometricLevitation"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 721651165969059,
							"parameters": {
								"object": "person"
							}
						}
					],
					"actions": [],
					"sid": 773843156999889,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 488331259326302,
									"disabled": true,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "shad.name"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "shad",
									"sid": 776836600942164,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "person.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "shad",
									"sid": 561528988977182,
									"parameters": {
										"instance-variable": "isoCoeff",
										"value": "aTools.isoCoeff+0.2"
									}
								},
								{
									"id": "set-size",
									"objectClass": "shad",
									"sid": 608487868934911,
									"disabled": true,
									"parameters": {
										"width": "Self.w",
										"height": "Self.w*Self.isoCoeff"
									}
								},
								{
									"id": "set-size",
									"objectClass": "shad",
									"sid": 463560442133402,
									"parameters": {
										"width": "Self.w+distance(0,Self.Y,0,person.Y)/2",
										"height": "(Self.w+distance(0,Self.Y,0,person.Y)/2)*Self.isoCoeff"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "shad",
									"sid": 875294867422611,
									"disabled": true,
									"parameters": {
										"opacity": "Self.opas"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "shad",
									"sid": 441489585312833,
									"parameters": {
										"opacity": "Self.opas-distance(0,Self.Y,0,person.Y)/5"
									}
								}
							],
							"sid": 309977967147899
						}
					]
				}
			],
			"sid": 596785631277177
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-group-active",
					"objectClass": "System",
					"sid": 939436411155817,
					"parameters": {
						"group-name": "\"cameraPerspective\""
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "info",
					"sid": 823130886363545,
					"parameters": {
						"text": "\"on\""
					}
				}
			],
			"sid": 265418599743451,
			"disabled": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-group-active",
					"objectClass": "System",
					"sid": 614948079133828,
					"parameters": {
						"group-name": "\"cameraPerspective\""
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "info",
					"sid": 290075150333985,
					"parameters": {
						"text": "\"off\""
					}
				}
			],
			"sid": 957914403790849,
			"disabled": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-group-active",
					"objectClass": "System",
					"sid": 336603734468480,
					"parameters": {
						"group-name": "\"speedPerspective\""
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 963943361326371,
					"parameters": {
						"text": "\"on\""
					}
				}
			],
			"sid": 196741731418394,
			"disabled": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-group-active",
					"objectClass": "System",
					"sid": 486525352424383,
					"parameters": {
						"group-name": "\"speedPerspective\""
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 203565253742956,
					"parameters": {
						"text": "\"off\""
					}
				}
			],
			"sid": 646389718476448,
			"disabled": true
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "cameraTop",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 706628366085103
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 902582299532793,
							"disabled": true,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.n"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "camera",
							"sid": 461654941604806,
							"parameters": {
								"instance-variable": "index",
								"comparison": 0,
								"value": "aTools.camindex"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 897450249492812,
							"disabled": true,
							"parameters": {
								"instance-variable": "horizon",
								"value": "horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 252799146707482,
							"disabled": true,
							"parameters": {
								"instance-variable": "ground",
								"value": "groundPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "camera",
							"sid": 345270894922456,
							"disabled": true,
							"parameters": {
								"instance-variable": "zField",
								"value": "groundPoint.Y-horizonPoint.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "zScale",
							"sid": 882037110309046,
							"parameters": {
								"instance-variable": "zet",
								"value": "1"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "zScale",
							"sid": 751091032473275,
							"parameters": {
								"instance-variable": "zetScale",
								"value": "1"
							}
						}
					],
					"sid": 207327574460178,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "zScale",
									"sid": 820008601827011,
									"parameters": {
										"instance-variable": "scalable"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "zScale",
									"sid": 478749413646218,
									"parameters": {
										"instance-variable": "coeff",
										"value": "Self.ImageWidth*Self.startScaleCoeff*aBook.heroScaleCoeff"
									}
								}
							],
							"sid": 302285915611576
						}
					]
				}
			],
			"sid": 837172537283093
		},
		{
			"eventType": "comment",
			"text": " \n\n   прикрепление персонажей и теней к базам и джамперам"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "pinPersons",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "\n    однократное масштабирование каркаса персонажа"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "camera",
							"sid": 735846891360765,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"startFrame\""
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 522533593781282,
							"disabled": true,
							"parameters": {
								"text": "aTools.n"
							}
						}
					],
					"sid": 171387375145440,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 617951485441614,
									"parameters": {
										"instance-variable": "jumpAbil"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "jumper",
									"sid": 877927969504429,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "jumper",
									"sid": 364939197377363,
									"parameters": {
										"x": "basis.X"
									}
								},
								{
									"id": "set-y",
									"objectClass": "jumper",
									"sid": 878760554637254,
									"parameters": {
										"y": "basis.Y"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "jumper",
									"sid": 758559339272848,
									"parameters": {
										"instance-variable": "w",
										"value": "Self.ImageWidth*Self.scaleCoeff*aBook.heroScaleCoeff*2"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "jumper",
									"sid": 975917262684411,
									"parameters": {
										"instance-variable": "h",
										"value": "Self.ImageHeight*Self.scaleCoeff*aBook.heroScaleCoeff*2"
									}
								},
								{
									"id": "set-size",
									"objectClass": "jumper",
									"sid": 562833378333583,
									"parameters": {
										"width": "Self.w*basis.zScale",
										"height": "Self.h*basis.zScale"
									}
								}
							],
							"sid": 980551545606997,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "jumper",
											"sid": 694689996378803,
											"parameters": {
												"instance-variable": "jump"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 730710958138761,
									"disabled": true
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 444504518821521,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aBook.hero"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 585918035006400,
									"parameters": {
										"instance-variable": "heroUID",
										"value": "hero.UID"
									}
								}
							],
							"sid": 375427141419212
						},
						{
							"eventType": "comment",
							"text": "    стартовое прикрепление персонажа"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 927168817215331,
									"parameters": {
										"object": "jumper"
									}
								}
							],
							"actions": [],
							"sid": 287360361605989,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 920580311259167,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "jumper.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-position-to-another-object",
											"objectClass": "person",
											"sid": 793150522788957,
											"parameters": {
												"object": "jumper",
												"image-point-optional": "0"
											}
										},
										{
											"id": "pin-to-object-properties",
											"objectClass": "person",
											"sid": 519145768915095,
											"behaviorType": "Pin",
											"parameters": {
												"pin-to": "jumper",
												"x": true,
												"y": true,
												"angle": false,
												"width-type": "no",
												"height-type": "no",
												"z": false
											}
										}
									],
									"sid": 584823008091078
								}
							]
						},
						{
							"eventType": "comment",
							"text": "платформы высоты"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "element",
									"sid": 301953990312474,
									"parameters": {
										"instance-variable": "platform",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "map",
									"sid": 331298469422043,
									"parameters": {
										"unique-id": "element.platform"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "map",
									"sid": 958936472316124,
									"parameters": {
										"where": "in-front",
										"object": "element"
									}
								}
							],
							"sid": 860953624624147
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n    прикрепление теней, каркасов и анимаций"
				},
				{
					"eventType": "comment",
					"text": "\n    прикрепление теней, каркасов и анимаций"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "basis",
							"sid": 471389974289758,
							"parameters": {
								"instance-variable": "base"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 616551999278233,
							"parameters": {
								"object": "basis"
							}
						}
					],
					"actions": [],
					"sid": 363890731134478,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 233082461632376,
									"disabled": true,
									"parameters": {
										"instance-variable": "jumpAbil"
									}
								}
							],
							"actions": [],
							"sid": 430655445241445,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "map",
											"sid": 127794782967833,
											"parameters": {
												"instance-variable": "platform",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 817490226982236,
									"children": [
										{
											"eventType": "comment",
											"text": "запрыгивания на объекты с высотой"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "senseDist",
													"sid": 586997958145166,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [],
											"sid": 544171469057388,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "on-collision-with-another-object",
															"objectClass": "senseDist",
															"sid": 142201776993175,
															"parameters": {
																"object": "map"
															}
														}
													],
													"actions": [],
													"sid": 340919224263236,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "basis",
																	"sid": 748363650036368,
																	"disabled": true,
																	"parameters": {
																		"instance-variable": "hi",
																		"comparison": 2,
																		"value": "map.mHi"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "basis",
																	"sid": 451199235554486,
																	"parameters": {
																		"instance-variable": "hi",
																		"comparison": 2,
																		"value": "map.mHi-33"
																	}
																},
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "basis",
																	"sid": 739365407555915,
																	"parameters": {
																		"instance-variable": "jumpAbil"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "basis",
																	"sid": 412040345913008,
																	"disabled": true,
																	"parameters": {
																		"instance-variable": "hiUID",
																		"value": "map.UID"
																	}
																},
																{
																	"callFunction": "jump",
																	"sid": 868014345534714,
																	"disabled": true,
																	"parameters": [
																		"basis.name",
																		"-map.mHi*12",
																		"4000",
																		"0",
																		"\"\"",
																		"1",
																		"0",
																		false,
																		true,
																		"\"zero\"",
																		"0"
																	]
																},
																{
																	"callFunction": "jump",
																	"sid": 969840417124122,
																	"parameters": [
																		"basis.name",
																		"-500",
																		"4000",
																		"0",
																		"\"map\"",
																		"1",
																		"0",
																		false,
																		true,
																		"\"zero\"",
																		"0"
																	]
																},
																{
																	"callFunction": "jump",
																	"sid": 766068469085549,
																	"disabled": true,
																	"parameters": [
																		"basis.name",
																		"-(abs(basis.hi-map.mHi))*1.5",
																		"4000",
																		"0",
																		"\"map\"",
																		"1",
																		"0",
																		false,
																		true,
																		"\"zero\"",
																		"0"
																	]
																}
															],
															"sid": 909454654722820
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "basis",
													"sid": 544656857064786,
													"parameters": {
														"object": "map"
													}
												}
											],
											"actions": [],
											"sid": 411588996507012,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-highestlowest",
															"objectClass": "map",
															"sid": 381197443802461,
															"parameters": {
																"which": "highest",
																"instance-variable": "mHi"
															}
														}
													],
													"actions": [],
													"sid": 739648803847906,
													"children": [
														{
															"eventType": "comment",
															"text": "спрыгивания с объектов с высотой"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "map",
																	"sid": 172399688480992,
																	"parameters": {
																		"instance-variable": "mHi",
																		"comparison": 2,
																		"value": "basis.hi"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "basis",
																	"sid": 500745580257861,
																	"disabled": true,
																	"parameters": {
																		"instance-variable": "hi",
																		"comparison": 1,
																		"value": "Self.hiOld"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "basis",
																	"sid": 604800157323222,
																	"disabled": true,
																	"parameters": {
																		"instance-variable": "hiUID",
																		"comparison": 1,
																		"value": "map.UID"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "basis",
																	"sid": 101221220640428,
																	"parameters": {
																		"instance-variable": "hiOld",
																		"value": "Self.hi"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "basis",
																	"sid": 160795086079499,
																	"parameters": {
																		"instance-variable": "hiUID",
																		"value": "map.UID"
																	}
																}
															],
															"sid": 589076681833225,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "trigger-once-while-true",
																			"objectClass": "System",
																			"sid": 917760538272524
																		},
																		{
																			"id": "is-boolean-instance-variable-set",
																			"objectClass": "basis",
																			"sid": 497558885009008,
																			"parameters": {
																				"instance-variable": "jump"
																			},
																			"isInverted": true
																		},
																		{
																			"id": "is-boolean-instance-variable-set",
																			"objectClass": "basis",
																			"sid": 961409188904037,
																			"parameters": {
																				"instance-variable": "jumpAbil"
																			}
																		}
																	],
																	"actions": [
																		{
																			"callFunction": "jump",
																			"sid": 535986056369101,
																			"disabled": true,
																			"parameters": [
																				"basis.name",
																				"-(abs(basis.hi-map.mHi))*1.5",
																				"4000",
																				"0",
																				"\"map\"",
																				"1",
																				"0",
																				false,
																				true,
																				"\"zero\"",
																				"0"
																			]
																		},
																		{
																			"callFunction": "jump",
																			"sid": 889661224926396,
																			"parameters": [
																				"basis.name",
																				"-200",
																				"4000",
																				"0",
																				"\"map\"",
																				"1",
																				"0",
																				false,
																				true,
																				"\"zero\"",
																				"0"
																			]
																		}
																	],
																	"sid": 349443195182506
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "basis",
																	"sid": 730702674016479,
																	"parameters": {
																		"instance-variable": "hi",
																		"value": "map.mHi"
																	}
																}
															],
															"sid": 860634538693954
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": ""
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "shad",
									"sid": 571753719592013,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 423112651636472,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 374275746015918,
									"disabled": true,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "shad.name"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 725304396466737,
									"parameters": {
										"instance-variable": "onBase"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "shad",
									"sid": 402613587903943,
									"disabled": true,
									"parameters": {
										"x": "basis.X",
										"y": "basis.Y+Self.hi"
									}
								},
								{
									"id": "set-position",
									"objectClass": "shad",
									"sid": 375802670280019,
									"parameters": {
										"x": "basis.X",
										"y": "basis.Y-basis.hi"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "person",
									"sid": 170072868005892,
									"parameters": {
										"where": "in-front",
										"object": "basis"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "shad",
									"sid": 195809483894166,
									"parameters": {
										"where": "behind",
										"object": "person"
									}
								}
							],
							"sid": 720233691995445,
							"children": [
								{
									"eventType": "comment",
									"text": "    прикрепление анимаций персонажей без способности прыжка"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "basis",
											"sid": 124332815532217,
											"parameters": {
												"instance-variable": "jumpAbil"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "person",
											"sid": 439813777176818,
											"parameters": {
												"x": "basis.X",
												"y": "shad.Y-Self.hi"
											}
										}
									],
									"sid": 537347511935089
								},
								{
									"eventType": "comment",
									"text": "    прикрепление каркасов и анимаций персонажей со способностью прыжка"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "basis",
											"sid": 599386218294667,
											"parameters": {
												"instance-variable": "jumpAbil"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "jumper",
											"sid": 415506796160148,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "basis.name"
											}
										}
									],
									"actions": [
										{
											"id": "set-x",
											"objectClass": "jumper",
											"sid": 271257269302892,
											"parameters": {
												"x": "basis.X"
											}
										}
									],
									"sid": 461503486322304,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "jumper",
													"sid": 984334678123006,
													"parameters": {
														"instance-variable": "jump"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "shad",
													"sid": 674582546554336,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "basis.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-y",
													"objectClass": "jumper",
													"sid": 576160811420361,
													"parameters": {
														"y": "shad.Y-person.hi"
													}
												}
											],
											"sid": 445878723013952
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "    масштабирование каркаса персонажа в движении"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "basis",
							"sid": 519008084034669,
							"parameters": {
								"instance-variable": "base"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aTools",
							"sid": 527308317309254,
							"parameters": {
								"instance-variable": "cameraType",
								"comparison": 0,
								"value": "\"cameraPerspective\""
							}
						}
					],
					"actions": [],
					"sid": 642217102521021,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 358921013673788,
									"parameters": {
										"instance-variable": "move"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "jumper",
									"sid": 472763098648409,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 665975442676514,
									"parameters": {
										"interval-seconds": "0.1"
									}
								}
							],
							"actions": [
								{
									"id": "set-size",
									"objectClass": "jumper",
									"sid": 927769882374491,
									"disabled": true,
									"parameters": {
										"width": "Self.w*basis.zScale",
										"height": "Self.h*basis.zScale"
									}
								},
								{
									"id": "set-size",
									"objectClass": "jumper",
									"sid": 532906626995704,
									"parameters": {
										"width": "Self.w*basis.fullScale",
										"height": "Self.h*basis.fullScale"
									}
								}
							],
							"sid": 585382850311139
						}
					]
				},
				{
					"eventType": "comment",
					"text": "  секретность дороги исчезает под ногами гг"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 720232950816327,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "basis",
							"sid": 899142341540722,
							"parameters": {
								"object": "map"
							}
						}
					],
					"actions": [],
					"sid": 205288084482076,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "map",
									"sid": 283762718694429,
									"disabled": true,
									"parameters": {
										"instance-variable": "mType",
										"comparison": 0,
										"value": "\"road\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "map",
									"sid": 505408434442948,
									"parameters": {
										"instance-variable": "secret",
										"comparison": 3,
										"value": "2"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "map",
									"sid": 857778988096194,
									"parameters": {
										"instance-variable": "secret",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 608296639226955
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "map",
									"sid": 452519612395086,
									"parameters": {
										"instance-variable": "secret",
										"value": "1"
									}
								}
							],
							"sid": 600903022722106
						}
					]
				}
			],
			"sid": 358768713313515
		},
		{
			"eventType": "comment",
			"text": "\n\n    временная - манипуляторы камеры"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "tempPerspectiveSetup",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 625331944552258
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "groundPoint",
							"sid": 413880822148467,
							"parameters": {
								"instance-variable": "selfY",
								"value": "Self.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "horizonPoint",
							"sid": 521403658492990,
							"parameters": {
								"instance-variable": "selfY",
								"value": "Self.Y"
							}
						},
						{
							"id": "set-value",
							"objectClass": "cameraGP",
							"sid": 938166007443963,
							"parameters": {
								"value": "groundPoint.Y-(LayoutHeight-500)"
							}
						},
						{
							"id": "set-value",
							"objectClass": "cameraHP",
							"sid": 399248444305179,
							"parameters": {
								"value": "horizonPoint.Y+500"
							}
						}
					],
					"sid": 965786067269222
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 776310732073947,
							"parameters": {
								"key": 67
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "cameraGP",
							"sid": 643702781880159,
							"parameters": {
								"visibility": "toggle"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "cameraHP",
							"sid": 881589102265751,
							"parameters": {
								"visibility": "toggle"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "temp1",
							"sid": 851040683425758,
							"parameters": {
								"visibility": "toggle"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "temp2",
							"sid": 763460830845612,
							"parameters": {
								"visibility": "toggle"
							}
						}
					],
					"sid": 263470625657855
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-visible",
							"objectClass": "cameraGP",
							"sid": 104868245379712
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "temp1",
							"sid": 542062002033322,
							"parameters": {
								"text": "groundPoint.Y"
							}
						},
						{
							"id": "set-text",
							"objectClass": "temp2",
							"sid": 161838995432068,
							"parameters": {
								"text": "horizonPoint.Y"
							}
						}
					],
					"sid": 841875053397503,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-focused",
									"objectClass": "cameraGP",
									"sid": 362584516184438
								},
								{
									"id": "is-focused",
									"objectClass": "cameraHP",
									"sid": 243563947108637
								}
							],
							"actions": [],
							"sid": 861031163536056,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "camera",
											"sid": 418163385295937,
											"parameters": {
												"instance-variable": "index",
												"comparison": 0,
												"value": "aTools.n"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "camera",
											"sid": 791022160486481,
											"parameters": {
												"instance-variable": "horizon",
												"value": "horizonPoint.Y"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "camera",
											"sid": 129099482324744,
											"parameters": {
												"instance-variable": "ground",
												"value": "groundPoint.Y"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "camera",
											"sid": 648589305879842,
											"parameters": {
												"instance-variable": "zField",
												"value": "groundPoint.Y-horizonPoint.Y"
											}
										},
										{
											"id": "set-y",
											"objectClass": "groundPoint",
											"sid": 323768088151712,
											"parameters": {
												"y": "LayoutHeight-500+cameraGP.Value"
											}
										},
										{
											"id": "set-y",
											"objectClass": "horizonPoint",
											"sid": 680003089482816,
											"parameters": {
												"y": "cameraHP.Value-500"
											}
										}
									],
									"sid": 902370830739360
								}
							],
							"isOrBlock": true
						}
					]
				}
			],
			"sid": 282957914677707
		}
	],
	"sid": 475257564465595
}