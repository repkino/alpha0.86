{
	"name": "_portal",
	"events": [
		{
			"eventType": "comment",
			"text": "\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 438659050762725
				}
			],
			"actions": [
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 506555308246308,
					"parameters": {
						"seconds": "0.11",
						"use-timescale": true
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "port",
					"sid": 378632580304455,
					"parameters": {
						"instance-variable": "active",
						"value": "true"
					}
				}
			],
			"sid": 260779498053083
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "basis",
					"sid": 808428256828314,
					"parameters": {
						"object": "port"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 506202909921646,
					"disabled": true,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "basis.name"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "port",
					"sid": 735369792942550,
					"parameters": {
						"instance-variable": "on"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "port",
					"sid": 656251890116035,
					"parameters": {
						"instance-variable": "active"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "port",
					"sid": 534513735464455,
					"parameters": {
						"instance-variable": "charge",
						"comparison": 0,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"customAction": "portCharge",
					"objectClass": "aaa",
					"sid": 514347720676299,
					"parameters": [
						"basis.name",
						"port.UID"
					]
				}
			],
			"sid": 144632633818137
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-object-clicked",
					"objectClass": "Mouse",
					"sid": 162321928051240,
					"parameters": {
						"mouse-button": "right",
						"click-type": "clicked",
						"object-clicked": "port"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "port",
					"sid": 989038462781449,
					"parameters": {
						"instance-variable": "on"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "port",
					"sid": 330317045803279,
					"parameters": {
						"instance-variable": "active"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "port",
					"sid": 979124819551107,
					"parameters": {
						"instance-variable": "charge",
						"comparison": 0,
						"value": "0"
					}
				},
				{
					"id": "is-overlapping-another-object",
					"objectClass": "basis",
					"sid": 530486871596547,
					"parameters": {
						"object": "port"
					}
				}
			],
			"actions": [],
			"sid": 956143414467162
		},
		{
			"eventType": "comment",
			"text": "",
			"background-color": [
				0.4,
				0.8980392156862745,
				0.7098039215686275,
				1
			]
		},
		{
			"aceType": "action",
			"aceName": "portCharge",
			"objectClass": "aaa",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "name",
					"type": "string",
					"initialValue": "Bit",
					"comment": "",
					"sid": 659949412454790
				},
				{
					"name": "portUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 372868495455315
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 999782659063686,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "name"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 672758319177617,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "name"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "port",
					"sid": 336525631997513,
					"parameters": {
						"unique-id": "portUID"
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "port",
					"sid": 816050101763186,
					"parameters": {
						"instance-variable": "active",
						"value": "false"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "port",
					"sid": 989892708623846,
					"parameters": {
						"instance-variable": "charge",
						"value": "1"
					}
				},
				{
					"id": "callselffunction0",
					"objectClass": "basis",
					"sid": 819860683338942,
					"behaviorType": "sf",
					"parameters": {
						"function_name:0": "\"stop\""
					}
				},
				{
					"customAction": "NoMOUSE",
					"objectClass": "aIns",
					"sid": 962955801486700,
					"parameters": [
						true,
						true,
						true,
						true,
						"0"
					]
				},
				{
					"id": "move-to-position",
					"objectClass": "basis",
					"sid": 964409287441290,
					"disabled": true,
					"behaviorType": "mt",
					"parameters": {
						"x": "portal.X",
						"y": "portal.Y",
						"mode": "direct"
					}
				},
				{
					"id": "set-position-to-another-object",
					"objectClass": "basis",
					"sid": 222794130128699,
					"parameters": {
						"object": "port",
						"image-point-optional": "0"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "basis",
					"sid": 336285826999130,
					"parameters": {
						"instance-variable": "portalUID",
						"value": "port.UID"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "person",
					"sid": 652330337924268,
					"parameters": {
						"animation": "\"portal\"",
						"from": "beginning"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "person",
					"sid": 560443299061207,
					"parameters": {
						"instance-variable": "port",
						"value": "true"
					}
				},
				{
					"id": "instance-signal",
					"objectClass": "basis",
					"sid": 266294963196898,
					"parameters": {
						"tag": "\"portal\""
					}
				},
				{
					"customAction": "anim",
					"objectClass": "aaa",
					"sid": 190093374343960,
					"parameters": [
						"\"portal\"",
						"4",
						"0",
						"\"zero\"",
						false,
						false,
						"person.name",
						"12",
						"0",
						true,
						"\"zero\""
					]
				}
			],
			"sid": 722213651016313
		},
		{
			"eventType": "comment",
			"text": "",
			"background-color": [
				0.4,
				0.8980392156862745,
				0.7098039215686275,
				1
			]
		},
		{
			"aceType": "action",
			"aceName": "portDepart",
			"objectClass": "aaa",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": true,
			"functionParameters": [
				{
					"name": "name",
					"type": "string",
					"initialValue": "Bit",
					"comment": "",
					"sid": 387624198944871
				},
				{
					"name": "portUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 636018223459620
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 198678980912070,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "name"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 400306195119154,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "name"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "port",
					"sid": 227774378770160,
					"parameters": {
						"unique-id": "portUID"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "shad",
					"sid": 281107809138232,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "person.name"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "port",
					"sid": 889206705289313,
					"parameters": {
						"instance-variable": "charge",
						"value": "2"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "person",
					"sid": 192380793881975,
					"parameters": {
						"instance-variable": "port",
						"value": "false"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "basis",
					"sid": 531226560451015,
					"parameters": {
						"instance-variable": "portal",
						"value": "true"
					}
				},
				{
					"id": "set-visible",
					"objectClass": "person",
					"sid": 836053297349049,
					"parameters": {
						"visibility": "invisible"
					}
				},
				{
					"id": "set-visible",
					"objectClass": "shad",
					"sid": 571481153110070,
					"parameters": {
						"visibility": "invisible"
					}
				},
				{
					"id": "set-opacity",
					"objectClass": "shad",
					"sid": 233421468963212,
					"disabled": true,
					"parameters": {
						"opacity": "0"
					}
				},
				{
					"id": "set-opacity",
					"objectClass": "person",
					"sid": 923896822202706,
					"disabled": true,
					"parameters": {
						"opacity": "0"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aaa",
					"sid": 399021979237291,
					"parameters": {
						"instance-variable": "portIND",
						"value": "port.portIND"
					}
				},
				{
					"callFunction": "go",
					"sid": 169653340545530,
					"parameters": [
						"port.goN",
						"port.portIND",
						"0",
						"0"
					]
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 800179037527084,
					"parameters": {
						"seconds": "0.1",
						"use-timescale": true
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "port",
					"sid": 657724229297398,
					"parameters": {
						"instance-variable": "charge",
						"value": "0"
					}
				}
			],
			"sid": 844199139797410
		},
		{
			"eventType": "comment",
			"text": "\n?\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-animation-finished",
					"objectClass": "person",
					"sid": 249463212677041,
					"parameters": {
						"animation": "\"portal\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 786573919778277,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "person.name"
					}
				}
			],
			"actions": [],
			"sid": 586228248560597,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "person",
							"sid": 195108043722448,
							"parameters": {
								"instance-variable": "port"
							}
						},
						{
							"id": "compare-animation-speed",
							"objectClass": "person",
							"sid": 867526854888311,
							"parameters": {
								"comparison": 4,
								"number": "0"
							}
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "person",
							"sid": 140953670063698,
							"parameters": {
								"comparison": 4,
								"number": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 461245009221808,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "person.name"
							}
						}
					],
					"actions": [
						{
							"customAction": "portDepart",
							"objectClass": "aaa",
							"sid": 660805751200433,
							"parameters": [
								"person.name",
								"basis.portalUID"
							]
						}
					],
					"sid": 924325301851275
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 212957077837098
						},
						{
							"id": "compare-animation-speed",
							"objectClass": "person",
							"sid": 632358161356917,
							"parameters": {
								"comparison": 2,
								"number": "0"
							}
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "person",
							"sid": 388749779192176,
							"parameters": {
								"comparison": 0,
								"number": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 268322288334931,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "person.name"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 932334945660332,
							"disabled": true,
							"parameters": {
								"visibility": "visible"
							}
						}
					],
					"sid": 888600335044786
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-instance-signal",
					"objectClass": "basis",
					"sid": 133087011936121,
					"parameters": {
						"tag": "\"portal\""
					}
				}
			],
			"actions": [],
			"sid": 417479081138081,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "port",
							"sid": 116832312350701,
							"parameters": {
								"unique-id": "basis.portalUID"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "port",
							"sid": 118980650719651,
							"disabled": true,
							"parameters": {
								"object": "basis"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "port",
							"sid": 393398149277991,
							"parameters": {
								"instance-variable": "FX"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "florPortalFX",
							"sid": 336172643664749,
							"parameters": {
								"instance-variable": "persName",
								"value": "basis.name"
							}
						},
						{
							"id": "set-position",
							"objectClass": "florPortalFX",
							"sid": 687879509241872,
							"parameters": {
								"x": "basis.X",
								"y": "basis.Y"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "florPortalFX",
							"sid": 878121265121297,
							"parameters": {
								"animation": "port.FXanim",
								"from": "beginning"
							}
						}
					],
					"sid": 646343132240577,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "shad",
									"sid": 356445394395252,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 699131180737608,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "set-visible",
									"objectClass": "shad",
									"sid": 145432779083137,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 614652538820645
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "LumyPortal",
							"sid": 462347704954891,
							"parameters": {
								"object": "basis"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 334915005917557,
							"parameters": {
								"frame-number": "3"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 443557232553495,
							"parameters": {
								"seconds": "0.7",
								"use-timescale": true
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 441280219310949,
							"parameters": {
								"frame-number": "2"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 848267464399702,
							"parameters": {
								"seconds": "0.5",
								"use-timescale": true
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 992453933370213,
							"parameters": {
								"frame-number": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 663300829429528,
							"parameters": {
								"seconds": "0.05",
								"use-timescale": true
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 179865125712277,
							"parameters": {
								"frame-number": "0"
							}
						}
					],
					"sid": 634556912862669
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-instance-signal",
					"objectClass": "basis",
					"sid": 868343063947192,
					"parameters": {
						"tag": "\"portalArrival\""
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "florPortalFX",
					"sid": 733225241367168,
					"parameters": {
						"instance-variable": "persName",
						"value": "basis.name"
					}
				},
				{
					"id": "set-position",
					"objectClass": "florPortalFX",
					"sid": 143921593780065,
					"parameters": {
						"x": "basis.X",
						"y": "basis.Y"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "florPortalFX",
					"sid": 589867465031646,
					"parameters": {
						"animation": "port.FXanim",
						"from": "beginning"
					}
				}
			],
			"sid": 242614614803241,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-animation-frame",
							"objectClass": "port",
							"sid": 322279210232850,
							"parameters": {
								"comparison": 0,
								"number": "aaa.portIND"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "port",
							"sid": 946835350868480,
							"parameters": {
								"instance-variable": "FX"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 821321471862532,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "basis.name"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 325430533431716,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 978503659686409,
							"parameters": {
								"seconds": "0.7",
								"use-timescale": true
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 312967426909444,
							"parameters": {
								"visibility": "visible"
							}
						}
					],
					"sid": 131147169615102
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "LumyPortal",
							"sid": 135376828603865,
							"parameters": {
								"object": "person"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 217665066388253,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "basis.name"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 421052103196874,
							"parameters": {
								"frame-number": "2"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 651802765279379,
							"parameters": {
								"seconds": "0.5",
								"use-timescale": true
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 362399668901781,
							"parameters": {
								"frame-number": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 635697955194359,
							"parameters": {
								"seconds": "0.05",
								"use-timescale": true
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "LumyPortal",
							"sid": 606064260810827,
							"parameters": {
								"frame-number": "0"
							}
						}
					],
					"sid": 751910591746552
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-on-screen",
					"objectClass": "florPortalFX",
					"sid": 669811171486992
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 186709258554954,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "florPortalFX.persName"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 719005524468291,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "florPortalFX.persName"
					}
				},
				{
					"id": "is-overlapping-another-object",
					"objectClass": "person",
					"sid": 854057491753949,
					"disabled": true,
					"parameters": {
						"object": "florPortalFX"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 692957305090443,
					"disabled": true,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				}
			],
			"actions": [
				{
					"id": "move-to-object",
					"objectClass": "florPortalFX",
					"sid": 959836241472653,
					"parameters": {
						"where": "behind",
						"object": "person"
					}
				}
			],
			"sid": 420935444363327,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 247676861393357
						}
					],
					"actions": [
						{
							"id": "set-scale",
							"objectClass": "florPortalFX",
							"sid": 453420738529546,
							"parameters": {
								"scale": "basis.fullScale*1.2"
							}
						}
					],
					"sid": 105596181850014
				}
			]
		},
		{
			"eventType": "comment",
			"text": "убираем эффект портала"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-animation-finished",
					"objectClass": "florPortalFX",
					"sid": 848257999494484
				}
			],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "florPortalFX",
					"sid": 810449860919989,
					"parameters": {
						"x": "-3888",
						"y": "-2888"
					}
				}
			],
			"sid": 312388169930037
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n\n\n\n\n\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "basis",
					"sid": 836134665574159,
					"parameters": {
						"object": "portal"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "portal",
					"sid": 945006828594315,
					"parameters": {
						"instance-variable": "mType",
						"comparison": 1,
						"value": "\"button\""
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "basis",
					"sid": 696385197119054,
					"parameters": {
						"instance-variable": "jump"
					},
					"isInverted": true
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 654285518804767,
					"disabled": true,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "\"Bip\""
					},
					"isInverted": true
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "basis",
					"sid": 103461758732613,
					"parameters": {
						"instance-variable": "portalAbil"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "help",
					"sid": 301815530451055,
					"disabled": true,
					"parameters": {
						"text": "\"coliz\""
					}
				}
			],
			"sid": 223301438447440,
			"disabled": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "portal",
							"sid": 152474261915755,
							"parameters": {
								"instance-variable": "holdPortal"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "portal",
							"sid": 520818461279691,
							"parameters": {
								"instance-variable": "active"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "portal",
							"sid": 325897050623505,
							"parameters": {
								"instance-variable": "onArrivalOff"
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 514670445115379,
							"parameters": {
								"instance-variable": "task",
								"comparison": 0,
								"value": "\"portal\""
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 881151212505182,
							"parameters": {
								"instance-variable": "task",
								"comparison": 0,
								"value": "\"portalEnd\""
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 339759880690041,
							"parameters": {
								"instance-variable": "task",
								"comparison": 0,
								"value": "\"jumpToPortal\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 219294397171176,
							"parameters": {
								"group-name": "\"portal\"",
								"state": "activated"
							}
						},
						{
							"callFunction": "portal",
							"sid": 679719108791522,
							"parameters": [
								"0"
							]
						}
					],
					"sid": 860255954728331,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "portal",
							"sid": 495342045221171,
							"parameters": {
								"instance-variable": "onArrivalOff"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "portal",
							"sid": 419233057591463,
							"parameters": {
								"instance-variable": "holdPortal"
							},
							"isInverted": true
						},
						{
							"id": "is-timer-running",
							"objectClass": "portal",
							"sid": 795013317316199,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"recharge\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 722836659887562,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 356630598957079,
									"parameters": {
										"instance-variable": "move"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 332363376839575,
									"parameters": {
										"instance-variable": "teleport"
									}
								}
							],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 183462583469566,
									"parameters": {
										"group-name": "\"portal\"",
										"state": "activated"
									}
								},
								{
									"callFunction": "portal",
									"sid": 308413533820936,
									"parameters": [
										"0"
									]
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 721413107172308,
									"disabled": true,
									"parameters": {
										"text": "\"  P\""
									}
								}
							],
							"sid": 483083501611917,
							"disabled": true,
							"isOrBlock": true
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\n можно сделать!  прыжок на портал и клик по порталу-кнопке\n\n",
			"background-color": [
				0.7450980392156863,
				0.7529411764705882,
				0.996078431372549,
				1
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "onselffunction0",
					"objectClass": "basis",
					"sid": 409528073234861,
					"behaviorType": "sf",
					"parameters": {
						"function_name:0": "\"land\""
					}
				},
				{
					"id": "on-object-clicked",
					"objectClass": "Mouse",
					"sid": 518279305131736,
					"parameters": {
						"mouse-button": "left",
						"click-type": "clicked",
						"object-clicked": "portal"
					}
				}
			],
			"actions": [],
			"sid": 259878745577890,
			"disabled": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "portal",
							"sid": 463996193486439,
							"parameters": {
								"instance-variable": "mType",
								"comparison": 1,
								"value": "\"button\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "basis",
							"sid": 529823696110885,
							"parameters": {
								"object": "portal"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aGame",
							"sid": 215153709615352,
							"parameters": {
								"instance-variable": "blackout"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 351877879649317,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "portal",
									"sid": 888018064183863,
									"parameters": {
										"instance-variable": "active"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "portal",
									"sid": 412584060069530,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"recharge\""
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 956483993318247,
									"parameters": {
										"instance-variable": "task",
										"comparison": 0,
										"value": "\"portal\""
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 596286852274329,
									"parameters": {
										"instance-variable": "task",
										"comparison": 0,
										"value": "\"portalEnd\""
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 653108342680068,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [],
							"sid": 428580451961691,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "portal",
											"sid": 903200393561613,
											"parameters": {
												"instance-variable": "holdPortal"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "person",
											"sid": 795818678576349,
											"parameters": {
												"instance-variable": "animPriority",
												"value": "0"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 293873895090427,
											"parameters": {
												"group-name": "\"portal\"",
												"state": "activated"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "basis",
											"sid": 856856050194435,
											"parameters": {
												"instance-variable": "task",
												"value": "\"jumpToPortal\""
											}
										},
										{
											"callFunction": "portal",
											"sid": 179630260018560,
											"parameters": [
												"0"
											]
										}
									],
									"sid": 583868480680451,
									"disabled": true
								}
							]
						}
					]
				}
			],
			"isOrBlock": true
		},
		{
			"eventType": "group",
			"disabled": true,
			"title": "portal",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"functionName": "portal",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "targetUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 956901227019908
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 992856466253831,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 363796440814147,
							"parameters": {
								"instance-variable": "portal",
								"value": "true"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "portal",
							"sid": 973942809254025,
							"parameters": {
								"instance-variable": "active",
								"value": "false"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "portal",
							"sid": 884903117712007,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Self.notActiveTime",
								"type": "once",
								"tag": "\"noActive\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "portal",
							"sid": 114480563251311,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 393670847596325,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 970559013162722,
									"parameters": {
										"instance-variable": "portToMyImagepoint",
										"comparison": 1,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "basis",
									"sid": 167327068981136,
									"parameters": {
										"object": "portal",
										"image-point-optional": "portal.portToMyImagepoint"
									}
								}
							],
							"sid": 477318130026811,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 910314010945910,
									"parameters": {
										"instance-variable": "jump",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "jump",
									"sid": 106883513583252,
									"parameters": [
										"basis.name",
										"portal.jump",
										"4000",
										"0",
										"\"\"",
										"1",
										"0",
										false,
										true,
										"\"zero\"",
										"0"
									]
								}
							],
							"sid": 122187542467067,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 407872153728946,
									"parameters": {
										"instance-variable": "portToTag",
										"comparison": 1,
										"value": "\"zero\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "map",
									"sid": 101221661447185,
									"parameters": {
										"instance-variable": "tagPortal",
										"comparison": 0,
										"value": "portal.portToTag"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 562319625282570,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 893592651689490,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "map.UID"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 252753640747391,
									"disabled": true,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"portalSignal\""
									}
								},
								{
									"id": "instance-signal",
									"objectClass": "basis",
									"sid": 287255670293700,
									"parameters": {
										"tag": "\"portal\""
									}
								},
								{
									"id": "instance-signal",
									"objectClass": "portal",
									"sid": 257832744762703,
									"disabled": true,
									"parameters": {
										"tag": "\"portal\""
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "basis",
									"sid": 538191903430336,
									"parameters": {
										"collisions": "disabled"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 497239416196063,
									"parameters": {
										"instance-variable": "task",
										"value": "\"portal\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 499845528407712,
									"parameters": {
										"seconds": "0",
										"use-timescale": true
									}
								},
								{
									"callFunction": "animPers",
									"sid": 596314969312316,
									"parameters": [
										"person.UID",
										"portal.animation",
										"3",
										"0",
										"777",
										"0"
									]
								},
								{
									"id": "start-timer",
									"objectClass": "person",
									"sid": 149376644371275,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.63",
										"type": "once",
										"tag": "\"portalStart\""
									}
								}
							],
							"sid": 356383447758403,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 359100668616155,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "aBook.hero"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 709496914870428,
											"parameters": {
												"instance-variable": "mod",
												"value": "\"noControl\""
											}
										}
									],
									"sid": 472490118656565,
									"disabled": true
								}
							]
						},
						{
							"eventType": "comment",
							"text": "порт к UID включая порт на другие локации"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 180086237011496
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 904461382805014,
									"parameters": {
										"instance-variable": "portToUID",
										"comparison": 1,
										"value": "-1"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 370730648619914,
									"disabled": true,
									"parameters": {
										"instance-variable": "goToFrame",
										"comparison": 0,
										"value": "-1"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "map",
									"sid": 552691470264086,
									"disabled": true,
									"parameters": {
										"unique-id": "portal.portToUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 396485103427817,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "basis.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 428459665828756,
									"disabled": true,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "map.UID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 719455754677771,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "portal.portToUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 662722346361717,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portal.goToFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 659559039868329,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "portal.portToUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 420568001177082,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portal.goToFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 996571385878845,
									"parameters": {
										"instance-variable": "portName",
										"value": "basis.name"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 875247142495328,
									"disabled": true,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"portalSignal\""
									}
								},
								{
									"id": "instance-signal",
									"objectClass": "basis",
									"sid": 581923504450712,
									"parameters": {
										"tag": "\"portal\""
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "basis",
									"sid": 520126278891176,
									"parameters": {
										"collisions": "disabled"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 819793425053162,
									"parameters": {
										"instance-variable": "task",
										"value": "\"portal\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 297334903880792,
									"disabled": true,
									"parameters": {
										"text": "basis.portalUID"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 260896345809868,
									"parameters": {
										"seconds": "0",
										"use-timescale": true
									}
								},
								{
									"callFunction": "animPers",
									"sid": 187207654534182,
									"disabled": true,
									"parameters": [
										"person.UID",
										"portal.animation",
										"3",
										"0",
										"777",
										"0"
									]
								},
								{
									"callFunction": "animPers",
									"sid": 536536835361014,
									"parameters": [
										"person.UID",
										"portal.noAnimation=1?person.AnimationName : portal.animation",
										"3",
										"0",
										"777",
										"0"
									]
								},
								{
									"id": "start-timer",
									"objectClass": "person",
									"sid": 786406744272563,
									"disabled": true,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "1.2",
										"type": "once",
										"tag": "\"portalStart\""
									}
								},
								{
									"id": "start-timer",
									"objectClass": "person",
									"sid": 356256970855462,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "portal.noAnimation=1?0:1.2",
										"type": "once",
										"tag": "\"portalStart\""
									}
								}
							],
							"sid": 615757514607508,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 371042278205791,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "aBook.hero"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 754644662388657,
											"parameters": {
												"instance-variable": "mod",
												"value": "\"noControl\""
											}
										}
									],
									"sid": 614274251903383,
									"disabled": true
								}
							]
						},
						{
							"eventType": "comment",
							"text": ""
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 898163876331812
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 333887728085488,
									"parameters": {
										"instance-variable": "goToTag",
										"comparison": 1,
										"value": "\"zero\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "map",
									"sid": 117049280790046,
									"parameters": {
										"instance-variable": "tagPortal",
										"comparison": 0,
										"value": "portal.goToTag"
									}
								}
							],
							"actions": [
								{
									"callFunction": "pfmt",
									"sid": 111999305365704,
									"parameters": [
										"basis.UID",
										"basis.name",
										"map.X",
										"map.y",
										"1",
										"portal.impulsPort",
										"1",
										"\"zero\"",
										"portal.UID",
										"0"
									]
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 692163867186998,
									"parameters": {
										"instance-variable": "portal",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 147690323142955,
									"parameters": {
										"instance-variable": "task",
										"value": "\"go\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 217819694461483,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "basis.task"
									}
								}
							],
							"sid": 135609047133005,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 732203125414568
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 572135037290867,
									"parameters": {
										"instance-variable": "goToUID",
										"comparison": 1,
										"value": "-1"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "map",
									"sid": 953929979697616,
									"parameters": {
										"unique-id": "portal.goToUID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "pfmt",
									"sid": 806917425457783,
									"parameters": [
										"basis.UID",
										"basis.name",
										"map.X",
										"map.y",
										"1",
										"portal.impulsPort",
										"1",
										"\"zero\"",
										"portal.UID",
										"0"
									]
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 233312502092917,
									"parameters": {
										"instance-variable": "portal",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 452235700422506,
									"parameters": {
										"instance-variable": "task",
										"value": "\"go\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 542918422132620,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "basis.task"
									}
								}
							],
							"sid": 317062199770856,
							"disabled": true
						},
						{
							"eventType": "comment",
							"text": " Cила гравитации или всасываемого воздуха притягивающего всех персонажей вокруг, усливается при приближении. В теории тоже ограничена радиусом"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 844765953088729,
									"parameters": {
										"instance-variable": "magnetMouth",
										"comparison": 0,
										"value": "1111"
									}
								}
							],
							"actions": [],
							"sid": 283917049328959
						},
						{
							"eventType": "comment",
							"text": ""
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "portal",
									"sid": 822149682679747,
									"parameters": {
										"instance-variable": "goToFrame",
										"comparison": 5,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 935263319055227,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portal.goToFrame"
									}
								}
							],
							"sid": 588164467897961,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "aBook",
									"sid": 862394505527293,
									"parameters": {
										"instance-variable": "mod",
										"comparison": 0,
										"value": "\"ballTarget\""
									}
								}
							],
							"actions": [
								{
									"id": "callselffunction0",
									"objectClass": "cursor",
									"sid": 846791548789506,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"endBallTarget\""
									}
								}
							],
							"sid": 897015591354564,
							"disabled": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n\n\n\n\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "person",
							"sid": 859336059754622,
							"parameters": {
								"animation": "\"portal\""
							}
						},
						{
							"id": "on-animation-finished",
							"objectClass": "person",
							"sid": 973982358344709,
							"parameters": {
								"animation": "\"portal\""
							}
						},
						{
							"id": "on-timer",
							"objectClass": "person",
							"sid": 897666569486627,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"portalStart\""
							}
						}
					],
					"actions": [],
					"sid": 516122666907858,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 316324416547323,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "person.name"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 345134680874500,
									"parameters": {
										"instance-variable": "task",
										"comparison": 0,
										"value": "\"portalEnd\""
									},
									"isInverted": true
								},
								{
									"id": "compare-animation-speed",
									"objectClass": "person",
									"sid": 254042356613556,
									"parameters": {
										"comparison": 4,
										"number": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 868163215423141,
									"disabled": true,
									"parameters": {
										"text": "basis.portalUID"
									}
								}
							],
							"sid": 850504127905084,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 725842065913936,
											"parameters": {
												"instance-variable": "portToFrame",
												"comparison": 0,
												"value": "-1"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "map",
											"sid": 453456698007241,
											"parameters": {
												"unique-id": "basis.portalUID"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "map",
											"sid": 958645176855968,
											"disabled": true,
											"parameters": {
												"unique-id": "aTools.portalUID"
											}
										}
									],
									"actions": [
										{
											"id": "monitorstr1",
											"objectClass": "vm",
											"sid": 383861174698829,
											"parameters": {
												"tag0": "\"portal\"",
												"string1": "basis.task"
											}
										},
										{
											"id": "set-position-to-another-object",
											"objectClass": "basis",
											"sid": 253803835840546,
											"parameters": {
												"object": "map",
												"image-point-optional": "0"
											}
										},
										{
											"callFunction": "animPers",
											"sid": 492828180125564,
											"parameters": [
												"person.UID",
												"portal.animation",
												"3",
												"10",
												"888",
												"0"
											]
										},
										{
											"id": "set-instvar-value",
											"objectClass": "basis",
											"sid": 398515679492410,
											"parameters": {
												"instance-variable": "task",
												"value": "\"portalEnd\""
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 552597737440870,
											"parameters": {
												"seconds": "0",
												"use-timescale": true
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 136397032158002,
											"parameters": {
												"seconds": "0",
												"use-timescale": true
											}
										},
										{
											"id": "callselffunction0",
											"objectClass": "basis",
											"sid": 540167518940538,
											"disabled": true,
											"behaviorType": "sf",
											"parameters": {
												"function_name:0": "\"portalArrivalSignal\""
											}
										},
										{
											"id": "instance-signal",
											"objectClass": "basis",
											"sid": 649919036044891,
											"parameters": {
												"tag": "\"portalArrival\""
											}
										}
									],
									"sid": 190502173097541,
									"disabled": true,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "portal",
													"sid": 721122535171383,
													"parameters": {
														"unique-id": "map.UID"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "portal",
													"sid": 998014297162644,
													"parameters": {
														"instance-variable": "onArrivalOff"
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "portal",
													"sid": 192672929805819,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "1.5",
														"type": "once",
														"tag": "\"recharge\""
													}
												}
											],
											"sid": 873827138160699,
											"disabled": true
										}
									]
								},
								{
									"bookmark": true,
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 810484453943413,
											"disabled": true
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 538514620991333,
											"parameters": {
												"instance-variable": "portToFrame",
												"comparison": 4,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 854178376019555,
											"disabled": true,
											"parameters": {
												"group-name": "\"follower\"",
												"state": "deactivated"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 545253755304805,
											"disabled": true,
											"parameters": {
												"seconds": "0.1",
												"use-timescale": true
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "camera",
											"sid": 331201339528930,
											"disabled": true,
											"parameters": {
												"instance-variable": "followerMod",
												"value": "\"free\""
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "aBook",
											"sid": 385931424748922,
											"disabled": true,
											"parameters": {
												"instance-variable": "portalHero",
												"value": "true"
											}
										},
										{
											"callFunction": "gotoFrame",
											"sid": 319069922115327,
											"disabled": true,
											"parameters": [
												"basis.portToFrame",
												"portal.portToUID",
												"\"\"",
												"0",
												"0"
											]
										},
										{
											"id": "monitorstr1",
											"objectClass": "vm",
											"sid": 857007420723444,
											"parameters": {
												"tag0": "\"portal\"",
												"string1": "basis.task"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aTools",
											"sid": 923362313267477,
											"parameters": {
												"instance-variable": "n",
												"value": "Self.portToFrame"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 126760771036178,
											"parameters": {
												"group-name": "\"gotoLocation\"",
												"state": "activated"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aTools",
											"sid": 290385736438627,
											"disabled": true,
											"parameters": {
												"instance-variable": "controlSet",
												"value": "\"mouseAnim\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aIns",
											"sid": 578793734401436,
											"disabled": true,
											"parameters": {
												"instance-variable": "gameState",
												"value": "\"play\""
											}
										},
										{
											"id": "start-timer",
											"objectClass": "cursor",
											"sid": 421648934095936,
											"disabled": true,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "0.1",
												"type": "once",
												"tag": "\"controlSet\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 197167614651281,
											"disabled": true,
											"parameters": {
												"instance-variable": "portalTime",
												"value": "0.3"
											}
										},
										{
											"callFunction": "gamePause",
											"sid": 426643454806760,
											"disabled": true,
											"parameters": [
												"\"play\""
											]
										},
										{
											"callFunction": "gotoLayout",
											"sid": 839085887146100,
											"parameters": [
												"\"\"",
												"\"\"",
												"aTools.portalUID",
												"basis.name",
												"0",
												"0"
											]
										},
										{
											"id": "set-instvar-value",
											"objectClass": "basis",
											"sid": 753290429274270,
											"parameters": {
												"instance-variable": "task",
												"value": "\"portalEnd\""
											}
										}
									],
									"sid": 934654162980411,
									"disabled": true,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "portal",
													"sid": 715940375730820,
													"parameters": {
														"unique-id": "basis.portalUID"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "portal",
													"sid": 443983232552619,
													"parameters": {
														"instance-variable": "onArrivalOff"
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "portal",
													"sid": 431734625291008,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "0.1",
														"type": "once",
														"tag": "\"recharge\""
													}
												}
											],
											"sid": 739948766052119,
											"disabled": true
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 606030334594379
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 509299224928732,
									"parameters": {
										"instance-variable": "portToFrame",
										"comparison": 0,
										"value": "-1"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 584814884331062,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "person.name"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 906738223418715,
									"parameters": {
										"instance-variable": "task",
										"comparison": 0,
										"value": "\"portalEnd\""
									}
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "person",
									"sid": 437728897208740,
									"parameters": {
										"comparison": 0,
										"number": "0"
									}
								},
								{
									"id": "compare-animation-speed",
									"objectClass": "person",
									"sid": 618111739869119,
									"parameters": {
										"comparison": 2,
										"number": "0"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "aGame",
									"sid": 736387480692075,
									"parameters": {
										"instance-variable": "blackout"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 983385706547071,
									"parameters": {
										"instance-variable": "portal",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 563440736991150,
									"parameters": {
										"instance-variable": "task",
										"value": "\"zero\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 923959781151776,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "basis.task"
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "basis",
									"sid": 355290423504339,
									"parameters": {
										"collisions": "enabled"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "person",
									"sid": 309879893949028,
									"parameters": {
										"instance-variable": "animPriority",
										"value": "0"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 679970944137460,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"portEnd\""
									}
								}
							],
							"sid": 600094796191164,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 775141143520167,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "aBook.hero"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 245464731967340,
											"parameters": {
												"instance-variable": "mod",
												"value": "\"zero\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 860324046110772,
											"disabled": true,
											"parameters": {
												"instance-variable": "heroTask",
												"value": "\"zero\""
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 632568166394691,
											"disabled": true,
											"parameters": {
												"group-name": "\"follower\"",
												"state": "activated"
											}
										}
									],
									"sid": 919114336511932,
									"disabled": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "basis",
											"sid": 542531592669300,
											"parameters": {
												"instance-variable": "portToFrame",
												"comparison": 4,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 121484008546425,
											"disabled": true,
											"parameters": {
												"seconds": "0.1",
												"use-timescale": true
											}
										},
										{
											"callFunction": "gotoFrame",
											"sid": 560838884999223,
											"parameters": [
												"basis.portToFrame",
												"portal.portToUID",
												"\"\"",
												"0",
												"0"
											]
										}
									],
									"sid": 119088303105455
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "portal",
							"sid": 241160055139920,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"recharge\""
							}
						}
					],
					"actions": [],
					"sid": 966523515555330
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onvaluechange0",
							"objectClass": "vm",
							"sid": 323431097689391,
							"parameters": {
								"tag0": "\"portal\""
							}
						}
					],
					"actions": [],
					"sid": 585673015993694,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "basis",
									"sid": 819147678482571,
									"parameters": {
										"instance-variable": "portal"
									}
								}
							],
							"actions": [],
							"sid": 961298547642842,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 151038852099123
								}
							],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 666053866924416,
									"parameters": {
										"group-name": "\"portal\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 342332850337169,
							"disabled": true
						}
					]
				}
			],
			"sid": 793755450165895
		},
		{
			"eventType": "comment",
			"text": "\n\n\n   телепорт к объекту по клику"
		},
		{
			"functionName": "telePortal",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": true,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "portalUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 963664139524470
				},
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 965009438447647
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 705573353060165
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "hero",
					"sid": 698617507896520,
					"parameters": {
						"instance-variable": "heroName",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 215012646673731,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "shad",
					"sid": 326503747928504,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "port",
					"sid": 727466111890494,
					"parameters": {
						"unique-id": "portalUID"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "aBook",
					"sid": 229059340989938,
					"disabled": true,
					"parameters": {
						"instance-variable": "mod",
						"comparison": 1,
						"value": "\"noControl\""
					}
				}
			],
			"actions": [],
			"sid": 210411391097982,
			"children": [
				{
					"eventType": "comment",
					"text": "телепорт к другому объекту"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "port",
							"sid": 649502900749069,
							"parameters": {
								"instance-variable": "teleportToUID",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "map",
							"sid": 223440459751904,
							"parameters": {
								"unique-id": "port.teleportToUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 997547361411389,
							"disabled": true,
							"parameters": {
								"text": "\"hold\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 655185280396228,
							"parameters": {
								"variable": "x",
								"value": "map.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 854380810883423,
							"parameters": {
								"variable": "y",
								"value": "map.y"
							}
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "map",
							"sid": 467746595364103,
							"parameters": {
								"collisions": "enabled"
							}
						}
					],
					"sid": 560017304280425,
					"children": [
						{
							"eventType": "comment",
							"text": "если другой объект - hold портал с ожиданием сигнала"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "map",
									"sid": 462029370260933,
									"parameters": {
										"instance-variable": "holdPortal"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 366305486475065,
									"disabled": true,
									"parameters": {
										"text": "\"hold\""
									}
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 299741262667911,
									"disabled": true,
									"parameters": {
										"text": "\"P\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 965123444948969,
									"parameters": {
										"seconds": "0.21",
										"use-timescale": true
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 238220195889493,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"noControl\""
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 960538542394736,
									"parameters": {
										"group-name": "\"portalHold\"",
										"state": "activated"
									}
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 917887943373142,
									"disabled": true,
									"parameters": {
										"text": "\"O\""
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "aMico",
									"sid": 629788636173341,
									"parameters": {
										"instance-variable": "holdPortal",
										"value": "true"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aMico",
									"sid": 262452356153898,
									"parameters": {
										"instance-variable": "holdPortalNextUID",
										"value": "map.UID"
									}
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 898674158719362,
									"parameters": {
										"tag": "\"portalHoldTeleport\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 575883731975921,
									"parameters": {
										"seconds": "0",
										"use-timescale": true
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 129625842492783,
									"parameters": {
										"group-name": "\"portal\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 123808085885588,
							"disabled": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "стандартная portToMe"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "basis",
							"sid": 951678397964688,
							"parameters": {
								"object": "port"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 213891111707530,
							"parameters": {
								"instance-variable": "teleport",
								"value": "true"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 740891707329955,
							"parameters": {
								"instance-variable": "mod",
								"value": "\"noControl\""
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "teleportFX",
							"sid": 715267553583203,
							"parameters": {
								"object": "hero",
								"image-point-optional": "2"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "teleportFX",
							"sid": 913687296671076,
							"disabled": true,
							"parameters": {
								"x": "x",
								"y": "y-hero.Height/2"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "teleportFX",
							"sid": 913335845689617,
							"parameters": {
								"x": "port.X",
								"y": "port.Y-hero.Height/2"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "teleportFX",
							"sid": 980182408377762,
							"parameters": {
								"scale": "basis.zScale*Self.startScaleCoeff*aBook.heroScaleCoeff"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "teleportFX",
							"sid": 168516876881704,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "teleportFX",
							"sid": 922484170571859,
							"parameters": {
								"animation": "\"fx\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "basis",
							"sid": 940778731281687,
							"parameters": {
								"x": "port.X",
								"y": "port.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 718460281474841,
							"parameters": {
								"instance-variable": "direct",
								"value": "int(((Self.Angle+360+22.5) %360)/45)"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 427019031078174,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 607995399785891,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 309992677420341,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 850319959284459,
							"parameters": {
								"instance-variable": "move",
								"value": "true"
							}
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "port",
							"sid": 144881249407466,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "port",
							"sid": 324243792294128,
							"parameters": {
								"instance-variable": "active",
								"value": "false"
							}
						},
						{
							"id": "set-position",
							"objectClass": "basis",
							"sid": 364252290243597,
							"disabled": true,
							"parameters": {
								"x": "port.X",
								"y": "port.Y"
							}
						},
						{
							"id": "set-position",
							"objectClass": "basis",
							"sid": 335312678929167,
							"parameters": {
								"x": "x>0?x:port.X",
								"y": "y>0?y:port.Y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 460439997187014,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"goToPort\""
							}
						},
						{
							"id": "monitorstr1",
							"objectClass": "vm",
							"sid": 534733303222860,
							"parameters": {
								"tag0": "\"portal\"",
								"string1": "aBook.heroTask"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 469111588467669,
							"parameters": {
								"seconds": "0.21",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 402873681730774,
							"parameters": {
								"instance-variable": "move",
								"value": "false"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 456191342086781,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 606918096289395,
							"disabled": true,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"zScale\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 880636329226562,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 152728518799361,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 333705343681147,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 506858770602954,
							"parameters": {
								"instance-variable": "mod",
								"value": "\"zero\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 233711260991458,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"zero\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "port",
							"sid": 992876718607616,
							"parameters": {
								"instance-variable": "active",
								"value": "true"
							}
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "port",
							"sid": 254272914865370,
							"parameters": {
								"collisions": "enabled"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 862945969855981,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 980907097429015,
							"parameters": {
								"instance-variable": "teleport",
								"value": "false"
							}
						}
					],
					"sid": 620956823048609
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 805276013808973
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "port",
							"sid": 483627235731593,
							"parameters": {
								"instance-variable": "active"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "port",
							"sid": 473183338299922,
							"parameters": {
								"instance-variable": "charge",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"customAction": "portCharge",
							"objectClass": "aaa",
							"sid": 547332298625463,
							"parameters": [
								"basis.name",
								"port.UID"
							]
						}
					],
					"sid": 279223142396764
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-animation-finished",
					"objectClass": "teleportFX",
					"sid": 178425454045278,
					"parameters": {
						"animation": "\"fx\""
					}
				}
			],
			"actions": [
				{
					"id": "set-visible",
					"objectClass": "teleportFX",
					"sid": 859452365462477,
					"parameters": {
						"visibility": "invisible"
					}
				}
			],
			"sid": 765373500300661
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-timer",
					"objectClass": "portal",
					"sid": 869617099155110,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"noActive\""
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "portal",
					"sid": 764152119324860,
					"parameters": {
						"instance-variable": "active",
						"value": "true"
					}
				},
				{
					"id": "set-visible",
					"objectClass": "portal",
					"sid": 431360477914816,
					"disabled": true,
					"parameters": {
						"visibility": "visible"
					}
				}
			],
			"sid": 448577121351794,
			"disabled": true
		},
		{
			"eventType": "comment",
			"text": "\n\n\nмигание"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-visible",
					"objectClass": "portal",
					"sid": 778296101107787,
					"isInverted": true
				}
			],
			"actions": [],
			"sid": 728928719204683,
			"disabled": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 326689392198645
						}
					],
					"actions": [
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 935099083446870,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-visible",
							"objectClass": "portal",
							"sid": 120629604903401,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "portal",
							"sid": 345220333747630,
							"parameters": {
								"opacity": "70"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 828497473241708,
							"parameters": {
								"seconds": "0.3",
								"use-timescale": true
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "portal",
							"sid": 664711608316737,
							"parameters": {
								"opacity": "100"
							}
						}
					],
					"sid": 608811437511585,
					"disabled": true
				}
			]
		},
		{
			"eventType": "comment",
			"text": "\n\n\nперетаскивание особых порталов"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-drag-start",
					"objectClass": "portal",
					"sid": 456068329368521,
					"behaviorType": "DragDrop"
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "portal",
					"sid": 571750108153234,
					"parameters": {
						"instance-variable": "dragNdrop"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-enabled",
					"objectClass": "portal",
					"sid": 762313022240719,
					"behaviorType": "DragDrop",
					"parameters": {
						"state": "disabled"
					}
				}
			],
			"sid": 646662757689128,
			"disabled": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-drop",
					"objectClass": "portal",
					"sid": 748708002749099,
					"behaviorType": "DragDrop"
				}
			],
			"actions": [
				{
					"id": "set-enabled",
					"objectClass": "portal",
					"sid": 942952760696573,
					"behaviorType": "DragDrop",
					"parameters": {
						"state": "disabled"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "portal",
					"sid": 952766009703220,
					"parameters": {
						"instance-variable": "selfX",
						"value": "Self.X"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "portal",
					"sid": 233016996476668,
					"parameters": {
						"instance-variable": "selfY",
						"value": "Self.Y"
					}
				}
			],
			"sid": 783978503988553,
			"disabled": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 368733449089234
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "portal",
					"sid": 672678152233267,
					"parameters": {
						"instance-variable": "selfX",
						"comparison": 1,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "portal",
					"sid": 921615701222546,
					"parameters": {
						"x": "Self.selfX",
						"y": "Self.selfY"
					}
				}
			],
			"sid": 192507657454584,
			"disabled": true
		},
		{
			"eventType": "comment",
			"text": "\n\n\n Порталы с сигналами: герой удерживается в портале, после клика по кнопке этажа проигрываются различные анимации, после этого срабатывает сигнал перемещения на др локацию, после перемещения снова анимация и сигнал прибытия. Только для перемещения между фреймами одного макета."
		},
		{
			"eventType": "group",
			"disabled": true,
			"title": "portalHold",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "portButt",
							"sid": 284707643984107,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"portLevel\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 981724456047381,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "portal",
							"sid": 215095511303983,
							"parameters": {
								"unique-id": "portButt.index"
							}
						}
					],
					"actions": [],
					"sid": 278746331560446,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "point",
									"sid": 657934349914050,
									"parameters": {
										"instance-variable": "index",
										"comparison": 0,
										"value": "portal.UID"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "aMico",
									"sid": 833918465153476,
									"parameters": {
										"instance-variable": "holdPortal"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "point",
									"sid": 839446656259957,
									"parameters": {
										"instance-variable": "on",
										"value": "false"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "point",
									"sid": 192211645988846,
									"parameters": {
										"frame-number": "0"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "portButt",
									"sid": 286919030981246,
									"parameters": {
										"instance-variable": "on",
										"value": "true"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "portButt",
									"sid": 613072985758654,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "portal",
									"sid": 697086136002383,
									"parameters": {
										"instance-variable": "portToUID",
										"value": "portButt.targetPortalUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "portal",
									"sid": 373927536576899,
									"parameters": {
										"instance-variable": "goToFrame",
										"value": "portButt.targetPortalFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "portal",
									"sid": 524297878229473,
									"parameters": {
										"instance-variable": "portToTag",
										"value": "portButt.targetPortalTag"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 395130624616582,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "portal.portToUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 484656435632277,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portal.goToFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 525073448052676,
									"parameters": {
										"instance-variable": "portalUID",
										"value": "portal.portToUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 765336029998612,
									"disabled": true,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portal.goToFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 894297295511554,
									"parameters": {
										"instance-variable": "portToFrame",
										"value": "portButt.targetPortalFrame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aTools",
									"sid": 892371065383826,
									"parameters": {
										"instance-variable": "portName",
										"value": "basis.name"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aMico",
									"sid": 309904402813752,
									"parameters": {
										"instance-variable": "holdPortalNextUID",
										"value": "portal.portToUID"
									}
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 122905961104791,
									"parameters": {
										"tag": "\"portalHoldRun\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 226688847085887,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 826758373351299,
									"parameters": {
										"tag": "portal.holdSignal"
									}
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 371757538579675,
									"disabled": true,
									"parameters": {
										"text": "portal.holdSignal"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 159816659664041,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 848945177245812,
									"parameters": {
										"tag": "portal.holdSignalRun"
									}
								},
								{
									"id": "append-text",
									"objectClass": "help",
									"sid": 592615090689452,
									"disabled": true,
									"parameters": {
										"text": "portal.holdSignalRun"
									}
								}
							],
							"sid": 524286117573123,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "aMico",
									"sid": 709321210882593,
									"parameters": {
										"instance-variable": "holdPortal"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "portButt",
									"sid": 159202702473291,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 252408921064698,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "portButt",
									"sid": 621517400013024,
									"parameters": {
										"frame-number": "0"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 910724018870595,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "portButt",
									"sid": 466136553155579,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 365714371816054,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "portButt",
									"sid": 175032120462087,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 256404624768686,
							"disabled": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 931064234432726,
							"parameters": {
								"tag": "\"portalHoldArrival\""
							}
						},
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 340738069715733,
							"parameters": {
								"tag": "\"portalHoldTeleport\""
							}
						}
					],
					"actions": [],
					"sid": 574394283599239,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 253190553492952,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 939224618112332,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "shad",
									"sid": 519980883779313,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "aMico",
									"sid": 798436677878476,
									"parameters": {
										"instance-variable": "holdPortal"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "portal",
									"sid": 414753747215081,
									"parameters": {
										"unique-id": "aMico.holdPortalNextUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 229285439153665,
									"disabled": true,
									"parameters": {
										"instance-variable": "task",
										"value": "\"portalEnd\""
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "aMico",
									"sid": 456004575159762,
									"disabled": true,
									"parameters": {
										"instance-variable": "holdPortal",
										"value": "true"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 703392831069677,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"noControl\""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 429089675773781,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-visible",
									"objectClass": "shad",
									"sid": 411523207209524,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 907719268908466,
									"parameters": {
										"instance-variable": "move",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "portal",
									"sid": 515133625499515,
									"parameters": {
										"instance-variable": "active",
										"value": "false"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 166409757524180,
									"parameters": {
										"instance-variable": "heroTask",
										"value": "\"goToPort\""
									}
								},
								{
									"id": "monitorstr1",
									"objectClass": "vm",
									"sid": 869532144414026,
									"parameters": {
										"tag0": "\"portal\"",
										"string1": "aBook.heroTask"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 541985165350960,
									"disabled": true,
									"parameters": {
										"seconds": "0.21",
										"use-timescale": true
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 101456039338390,
									"parameters": {
										"instance-variable": "portal",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "basis",
									"sid": 957587913668524,
									"parameters": {
										"instance-variable": "move",
										"value": "false"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 626169802365714,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"type": "comment",
									"text": ""
								},
								{
									"callFunction": "animPers",
									"sid": 826040085668704,
									"parameters": [
										"hero.UID",
										"portal.holdAnimation",
										"4",
										"0",
										"777",
										"0"
									]
								},
								{
									"id": "set-visible",
									"objectClass": "hero",
									"sid": 192158505464471,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aMico",
									"sid": 473625485268594,
									"parameters": {
										"instance-variable": "holdPortalUID",
										"value": "Self.holdPortalNextUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aMico",
									"sid": 626881628801343,
									"parameters": {
										"instance-variable": "holdPortalNextUID",
										"value": "-1"
									}
								},
								{
									"callFunction": "animPers",
									"sid": 662879882274616,
									"parameters": [
										"hero.UID",
										"portal.holdAnimation",
										"4",
										"0",
										"777",
										"0"
									]
								}
							],
							"sid": 349146639947921,
							"disabled": true
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 854129930443612,
							"parameters": {
								"tag": "\"portalHoldRun\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aMico",
							"sid": 543349583192630,
							"parameters": {
								"instance-variable": "holdPortal"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 427689391054813,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aMico",
							"sid": 592446782387830,
							"disabled": true,
							"parameters": {
								"instance-variable": "holdPortalNextUID",
								"value": "aTools.portalUID"
							}
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 399589004565191,
							"parameters": {
								"tag": "\"groundAnimationOut\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 272472167058635,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 749750726169543,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 654146640507480,
							"parameters": {
								"tag": "\"portalHoldOut\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aMico",
							"sid": 862758709374364,
							"parameters": {
								"instance-variable": "holdPortal"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aMico",
							"sid": 919841771775044,
							"parameters": {
								"instance-variable": "portalLimit"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "portButt",
							"sid": 115980288452685,
							"parameters": {
								"instance-variable": "on",
								"value": "false"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "portButt",
							"sid": 288122746218786,
							"parameters": {
								"frame-number": "0"
							}
						},
						{
							"id": "monitorstr1",
							"objectClass": "vm",
							"sid": 521153377852173,
							"parameters": {
								"tag0": "\"portal\"",
								"string1": "basis.task"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 273834892235268,
							"parameters": {
								"group-name": "\"gotoLocation\"",
								"state": "activated"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aTools",
							"sid": 280386882966170,
							"parameters": {
								"instance-variable": "n",
								"value": "Self.portToFrame"
							}
						},
						{
							"callFunction": "gotoLayout",
							"sid": 593860735080671,
							"parameters": [
								"\"\"",
								"\"\"",
								"aTools.portalUID",
								"basis.name",
								"0",
								"0"
							]
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "aMico",
							"sid": 258185132852921,
							"parameters": {
								"instance-variable": "portalLimit",
								"value": "true"
							}
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 405204960967277,
							"parameters": {
								"tag": "\"groundAnimationIn\""
							}
						}
					],
					"sid": 304631186169918,
					"disabled": true
				}
			],
			"sid": 975095766680799
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-animation-finished",
					"objectClass": "hero",
					"sid": 437626126069146,
					"parameters": {
						"animation": "\"portalLevitation\""
					}
				},
				{
					"id": "compare-animation-speed",
					"objectClass": "hero",
					"sid": 118276936155115,
					"parameters": {
						"comparison": 4,
						"number": "0"
					}
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "hero",
					"sid": 103770801079760,
					"parameters": {
						"animation": "\"rotateLevitation\"",
						"from": "beginning"
					}
				}
			],
			"sid": 454487267884631
		},
		{
			"eventType": "comment",
			"text": "\n\n\nТелепортация героя к точке координат. Например, телепортация из портала к курсору."
		},
		{
			"aceType": "action",
			"aceName": "teleRoad",
			"objectClass": "aaa",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 250258789911842
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 379467661649017
				},
				{
					"name": "levitation",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 257264540005732
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "basis",
					"sid": 886825749787237,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 354608637582970,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "shad",
					"sid": 499745821867856,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "hero",
					"sid": 985720266901855,
					"parameters": {
						"instance-variable": "heroName",
						"comparison": 0,
						"value": "aBook.hero"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "aBook",
					"sid": 504912199865069,
					"disabled": true,
					"parameters": {
						"instance-variable": "mod",
						"comparison": 1,
						"value": "\"noControl\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "aBook",
					"sid": 288720516276406,
					"disabled": true,
					"parameters": {
						"instance-variable": "mod",
						"comparison": 1,
						"value": "\"noMouse\""
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "aaa",
					"sid": 184003644853908,
					"disabled": true,
					"parameters": {
						"instance-variable": "controlBlock"
					},
					"isInverted": true
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "basis",
					"sid": 250234388408961,
					"parameters": {
						"instance-variable": "teleport"
					},
					"isInverted": true
				}
			],
			"actions": [],
			"sid": 449521508210955,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 617250249524422,
							"parameters": {
								"instance-variable": "teleport",
								"value": "true"
							}
						},
						{
							"customAction": "rotateTo",
							"objectClass": "basis",
							"sid": 943610784237998,
							"parameters": [
								"basis.name",
								"x",
								"y",
								false,
								"-1",
								false,
								"0"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 655831648263939,
							"disabled": true,
							"parameters": {
								"instance-variable": "mod",
								"value": "\"noControl\""
							}
						},
						{
							"customAction": "NoControl",
							"objectClass": "aIns",
							"sid": 634101865727077,
							"parameters": [
								true,
								true,
								"0"
							]
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "teleportFX",
							"sid": 787168656178624,
							"parameters": {
								"object": "hero",
								"image-point-optional": "2"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "teleportFX",
							"sid": 534584294447017,
							"parameters": {
								"x": "x",
								"y": "y-hero.Height/2"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "teleportFX",
							"sid": 820898135888687,
							"parameters": {
								"scale": "basis.zScale*Self.startScaleCoeff*aBook.heroScaleCoeff"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "teleportFX",
							"sid": 644276783793422,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "teleportFX",
							"sid": 512305692429212,
							"parameters": {
								"animation": "\"fx\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "basis",
							"sid": 328864766483442,
							"disabled": true,
							"parameters": {
								"x": "x",
								"y": "y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 236428421053965,
							"disabled": true,
							"parameters": {
								"instance-variable": "direct",
								"value": "int(((Self.Angle+360+22.5) %360)/45)"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 950466444423248,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 381440740217107,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 951999207363896,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 321393592492637,
							"disabled": true,
							"parameters": {
								"instance-variable": "move",
								"value": "true"
							}
						},
						{
							"id": "set-position",
							"objectClass": "basis",
							"sid": 284714226039812,
							"parameters": {
								"x": "x",
								"y": "y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 259971377830878,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"goToRoad\""
							}
						},
						{
							"id": "monitorstr1",
							"objectClass": "vm",
							"sid": 644675116763004,
							"parameters": {
								"tag0": "\"portal\"",
								"string1": "aBook.heroTask"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "person",
							"sid": 989324430454726,
							"parameters": {
								"instance-variable": "animPriority",
								"value": "0"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 621532829237307,
							"parameters": {
								"seconds": "0.21",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 264283040043611,
							"parameters": {
								"instance-variable": "move",
								"value": "false"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 291761962158943,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 760888687925088,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"zScale\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 648487810630460,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 635006704718892,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "person",
							"sid": 192592869170411,
							"parameters": {
								"instance-variable": "animPriority",
								"value": "0"
							}
						}
					],
					"sid": 865321625058622
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 969819408502122,
							"parameters": {
								"variable": "levitation"
							}
						}
					],
					"actions": [
						{
							"callFunction": "animPers",
							"sid": 831623579427687,
							"parameters": [
								"hero.UID",
								"\"portalLevitation\"",
								"1",
								"0",
								"777",
								"0"
							]
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 573742682354250,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 522753334962840,
							"disabled": true,
							"parameters": {
								"instance-variable": "mod",
								"value": "\"zero\""
							}
						},
						{
							"customAction": "controlBack",
							"objectClass": "aIns",
							"sid": 142457196682767,
							"parameters": [
								true,
								true
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 348765219627903,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"zero\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 247203005973405,
							"parameters": {
								"instance-variable": "heroState",
								"value": "\"postLevitation\""
							}
						},
						{
							"id": "set-text",
							"objectClass": "info",
							"sid": 712978789202147,
							"disabled": true,
							"parameters": {
								"text": "basis.Angle"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 220267182413963,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 556703954028594,
							"parameters": {
								"instance-variable": "teleport",
								"value": "false"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 639312592246506,
							"parameters": {
								"seconds": "2",
								"use-timescale": true
							}
						},
						{
							"callFunction": "animPers",
							"sid": 271692599891938,
							"parameters": [
								"hero.UID",
								"\"au\"",
								"0",
								"0",
								"777",
								"0"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 153964565155994,
							"parameters": {
								"instance-variable": "heroState",
								"value": "\"stop\""
							}
						}
					],
					"sid": 496942694048334
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 577309386367275
						}
					],
					"actions": [
						{
							"customAction": "controlBack",
							"objectClass": "aIns",
							"sid": 991754987018260,
							"parameters": [
								true,
								true
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 359171561306747,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"zero\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 250287144620990,
							"parameters": {
								"seconds": "0.1",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 133415283534975,
							"parameters": {
								"instance-variable": "teleport",
								"value": "false"
							}
						}
					],
					"sid": 843986814599423
				}
			]
		}
	],
	"sid": 463296444124415
}