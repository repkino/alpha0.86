{
	"name": "_contact",
	"events": [
		{
			"eventType": "comment",
			"text": "\n    движение к точке контакта"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "goToContact",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "basis",
							"sid": 164217499758994,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"move\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 446825711835379,
							"parameters": {
								"instance-variable": "dialogSpotPerson",
								"value": "\"zero\""
							}
						}
					],
					"sid": 766127739942587
				},
				{
					"eventType": "comment",
					"text": "    клик по point запускает функцию в его objFunction, у персонажей это call"
				},
				{
					"functionName": "call",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "pointName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 664143696083351
						},
						{
							"name": "contactSide",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 759790857051877
						},
						{
							"name": "xPlus",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 582955229342808
						},
						{
							"name": "yPlus",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 762573824930305
						},
						{
							"name": "contactAngle",
							"type": "number",
							"initialValue": "45",
							"comment": "",
							"sid": 361713479797010
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 805516611238116,
							"parameters": {
								"instance-variable": "mod",
								"comparison": 1,
								"value": "\"noControl\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 921900371391895,
							"parameters": {
								"instance-variable": "mod",
								"comparison": 1,
								"value": "\"onlyRoad\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 394677013812421,
							"parameters": {
								"instance-variable": "mod",
								"comparison": 1,
								"value": "\"onlyJump\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 768623944957627,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"respawn\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aIns",
							"sid": 721873934788780,
							"parameters": {
								"instance-variable": "serpentStrikeUID",
								"comparison": 2,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aIns",
							"sid": 417484671783487,
							"parameters": {
								"instance-variable": "serpentWinerUID",
								"comparison": 2,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 180122934649520,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"hi\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 344809087857456,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"piton\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 267820419243418,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"serpentHit\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 563116141853752,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"trapHit\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aMico",
							"sid": 540058858004458,
							"parameters": {
								"instance-variable": "BitSerpStatus",
								"comparison": 1,
								"value": "\"trapHitRespawn\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aBit",
							"sid": 379270676486236,
							"parameters": {
								"instance-variable": "note"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "aBit",
							"sid": 938351927527584,
							"parameters": {
								"instance-variable": "hey"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 197461651039394,
							"disabled": true,
							"parameters": {
								"text": "\"call\""
							}
						}
					],
					"sid": 937224614184779,
					"children": [
						{
							"eventType": "comment",
							"text": "    выбираем персонажа, проверяем не выбран ли он уже, устанавливаем радиус малой телепортации и назначаем персонажа контактным лицом"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 742677993201977,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "pointName"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "shad",
									"sid": 718227522353663,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "basis",
									"sid": 242036663434668,
									"parameters": {
										"instance-variable": "name",
										"comparison": 0,
										"value": "aBook.hero"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "hero",
									"sid": 117133949514679,
									"parameters": {
										"instance-variable": "heroName",
										"comparison": 0,
										"value": "aBook.hero"
									}
								}
							],
							"actions": [],
							"sid": 534693707744552,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 907996320120224,
											"parameters": {
												"instance-variable": "noContact"
											}
										}
									],
									"actions": [
										{
											"id": "instance-signal",
											"objectClass": "person",
											"sid": 527236705598578,
											"parameters": {
												"tag": "\"noContact\""
											}
										}
									],
									"sid": 123237260386440
								},
								{
									"eventType": "comment",
									"text": "?!."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 897583848493302
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "aBook",
											"sid": 117725986149952,
											"parameters": {
												"instance-variable": "contactUID",
												"comparison": 0,
												"value": "-1"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 956399761910846,
											"parameters": {
												"instance-variable": "noContact"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 536527211553137,
											"parameters": {
												"instance-variable": "contactName",
												"value": "pointName"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 966864912478250,
											"parameters": {
												"instance-variable": "contactUID",
												"value": "aTools.pointUID"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "person",
											"sid": 148433075262540,
											"parameters": {
												"instance-variable": "inContact",
												"value": "true"
											}
										},
										{
											"id": "set-text",
											"objectClass": "dialHero",
											"sid": 188723772534247,
											"parameters": {
												"text": "hero.heroName"
											}
										},
										{
											"id": "set-text",
											"objectClass": "dialPerson1",
											"sid": 362771652559801,
											"parameters": {
												"text": "person.name"
											}
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 246742571575324,
											"disabled": true,
											"parameters": {
												"text": "\"1\""
											}
										}
									],
									"sid": 196378991688783
								},
								{
									"eventType": "comment",
									"text": "?!."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 650864407561740
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 689100510048141,
											"parameters": {
												"instance-variable": "noContact"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "DClose",
											"sid": 274091471093450,
											"parameters": [
												"-1",
												"hero.UID",
												"-1"
											]
										},
										{
											"callFunction": "DClose",
											"sid": 372186094720192,
											"disabled": true,
											"parameters": [
												"-1",
												"aBook.contactUID",
												"-1"
											]
										},
										{
											"callFunction": "endDialog",
											"sid": 222701290426588
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 846080162041265,
											"parameters": {
												"instance-variable": "contactName",
												"value": "pointName"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 939591837161320,
											"parameters": {
												"instance-variable": "contactUID",
												"value": "aTools.pointUID"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "person",
											"sid": 251534034105687,
											"parameters": {
												"instance-variable": "inContact",
												"value": "true"
											}
										},
										{
											"id": "set-text",
											"objectClass": "dialHero",
											"sid": 558755842693312,
											"parameters": {
												"text": "hero.heroName"
											}
										},
										{
											"id": "set-text",
											"objectClass": "dialPerson1",
											"sid": 696806741671908,
											"parameters": {
												"text": "person.name"
											}
										}
									],
									"sid": 410526402718365
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "base",
											"sid": 704529396668204,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "pointName"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 449338780407569,
											"parameters": {
												"instance-variable": "noContact"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "base",
											"sid": 177094538790785,
											"parameters": {
												"instance-variable": "inContact",
												"value": "true"
											}
										},
										{
											"id": "callselffunction0",
											"objectClass": "base",
											"sid": 375783864342774,
											"behaviorType": "sf",
											"parameters": {
												"function_name:0": "\"stop\""
											}
										}
									],
									"sid": 139477605483579
								},
								{
									"eventType": "comment",
									"text": "    Определение точки контакта"
								},
								{
									"eventType": "comment",
									"text": "    Если контакт тот же самый, гг не двигается"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "aBook",
											"sid": 310578519407334,
											"parameters": {
												"instance-variable": "dialogSpotPerson",
												"comparison": 0,
												"value": "Self.contactName"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "hero",
											"sid": 586775989312689,
											"disabled": true,
											"parameters": {
												"instance-variable": "active"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 382539208094153,
											"parameters": {
												"instance-variable": "noContact"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 447493128712600,
											"parameters": {
												"instance-variable": "heroTask",
												"value": "\"goToContact\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "hero",
											"sid": 900477632373892,
											"parameters": {
												"animation": "\"dialog\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 864130226082281,
											"parameters": {
												"group-name": "\"contact\"",
												"state": "activated"
											}
										},
										{
											"type": "comment",
											"text": "?"
										},
										{
											"callFunction": "pfmt",
											"sid": 369215946570306,
											"parameters": [
												"0",
												"aBook.hero",
												"basis.X",
												"basis.Y",
												"1",
												"1",
												"1",
												"\"zero\"",
												"0",
												"0"
											]
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 114287023081263,
											"disabled": true,
											"parameters": {
												"text": "\"1s\""
											}
										}
									],
									"sid": 176779990550008,
									"children": [
										{
											"eventType": "comment",
											"text": "    определение угла для типов free, fix, mirror"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 893052673948421,
													"parameters": {
														"instance-variable": "contactAngType",
														"comparison": 0,
														"value": "\"free\""
													}
												}
											],
											"actions": [
												{
													"id": "set-angle",
													"objectClass": "basis",
													"sid": 718900089984692,
													"parameters": {
														"angle": "angle(basis.X,basis.Y,person.X,person.Y)"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 675359509679898,
													"parameters": {
														"instance-variable": "direct",
														"value": "int(((Self.Angle+360+22.5) %360)/45)"
													}
												}
											],
											"sid": 632735102597516
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 537507580202790,
													"parameters": {
														"instance-variable": "contactAngType",
														"comparison": 0,
														"value": "\"fix\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 663484957803296,
													"parameters": {
														"instance-variable": "contactAngType",
														"comparison": 0,
														"value": "\"xy\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 698147011574983,
													"parameters": {
														"variable": "contactSide",
														"value": "person.contactSide"
													}
												},
												{
													"id": "set-angle",
													"objectClass": "basis",
													"sid": 860782027316173,
													"parameters": {
														"angle": "person.contactAng"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 557073561747381,
													"parameters": {
														"instance-variable": "direct",
														"value": "int(((Self.Angle+360+22.5) %360)/45)"
													}
												},
												{
													"id": "callselffunction0",
													"objectClass": "basis",
													"sid": 979175030492552,
													"behaviorType": "sf",
													"parameters": {
														"function_name:0": "\"stop\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "info",
													"sid": 513840895686574,
													"disabled": true,
													"parameters": {
														"text": "basis.Angle"
													}
												},
												{
													"id": "set-text",
													"objectClass": "help",
													"sid": 294819956753135,
													"disabled": true,
													"parameters": {
														"text": "\"тот же контакт фикс\""
													}
												}
											],
											"sid": 592377464409618,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 991381662141416,
															"parameters": {
																"variable": "contactSide",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "set-mirrored",
															"objectClass": "hero",
															"sid": 725838387441396,
															"parameters": {
																"state": "not-mirrored"
															}
														}
													],
													"sid": 504785349102031
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 737555442775277,
															"parameters": {
																"variable": "contactSide",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-mirrored",
															"objectClass": "hero",
															"sid": 331870250306701,
															"parameters": {
																"state": "mirrored"
															}
														}
													],
													"sid": 879014607497641
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 936437455710298,
													"parameters": {
														"instance-variable": "contactAngType",
														"comparison": 0,
														"value": "\"mirror\""
													}
												}
											],
											"actions": [
												{
													"id": "set-angle",
													"objectClass": "basis",
													"sid": 222223595415700,
													"parameters": {
														"angle": "person.contactAng"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "basis",
													"sid": 650773504317014,
													"parameters": {
														"instance-variable": "direct",
														"value": "int(((Self.Angle+360+22.5) %360)/45)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 391316618877934,
													"parameters": {
														"variable": "contactSide",
														"value": "basis.X<person.X? 0 : 1"
													}
												},
												{
													"id": "callselffunction0",
													"objectClass": "basis",
													"sid": 225022859093312,
													"behaviorType": "sf",
													"parameters": {
														"function_name:0": "\"stop\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "info",
													"sid": 101683637235556,
													"disabled": true,
													"parameters": {
														"text": "basis.Angle"
													}
												},
												{
													"id": "set-text",
													"objectClass": "help",
													"sid": 185041660689440,
													"disabled": true,
													"parameters": {
														"text": "\"тот же контакт миррор\""
													}
												}
											],
											"sid": 518052688993706,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 925763055073039,
															"parameters": {
																"variable": "contactSide",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "set-mirrored",
															"objectClass": "hero",
															"sid": 605691871749190,
															"parameters": {
																"state": "not-mirrored"
															}
														},
														{
															"id": "set-mirrored",
															"objectClass": "person",
															"sid": 229171876544311,
															"parameters": {
																"state": "mirrored"
															}
														}
													],
													"sid": 132308292928227
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 145311150579351,
															"parameters": {
																"variable": "contactSide",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-mirrored",
															"objectClass": "hero",
															"sid": 575544026385750,
															"parameters": {
																"state": "mirrored"
															}
														},
														{
															"id": "set-mirrored",
															"objectClass": "person",
															"sid": 607753886568504,
															"parameters": {
																"state": "not-mirrored"
															}
														}
													],
													"sid": 704421125323965
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "    Если к контактеру надо двигаться"
								},
								{
									"eventType": "comment",
									"text": "    определение расcтояния диалога для подвижного объекта"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 972705619897593
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 638847275714438,
											"parameters": {
												"instance-variable": "noContact"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 197033714508618,
											"parameters": {
												"variable": "xPlus",
												"value": "person.xDistContact*person.ZScaleLikeHero"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 257874735393249,
											"parameters": {
												"variable": "yPlus",
												"value": "person.yDistContact*person.ZScaleLikeHero"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 234960620172087,
											"parameters": {
												"variable": "contactSide",
												"value": "person.contactAngType=\"mirror\"&basis.X<person.X? 0 : person.contactAngType=\"mirror\"&basis.X>person.X? 1 : person.contactAngType=\"fix\" ? person.contactSide : 3"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "aBook",
											"sid": 819118149213940,
											"parameters": {
												"instance-variable": "heroTask",
												"value": "\"goToContact\""
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 122536588783276,
											"parameters": {
												"group-name": "\"contact\"",
												"state": "activated"
											}
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 434387532834883,
											"disabled": true,
											"parameters": {
												"text": "\"2\""
											}
										}
									],
									"sid": 275873819896742,
									"children": [
										{
											"eventType": "comment",
											"text": "    если герой не Бит, то идёт"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "aBook",
													"sid": 540545604643500,
													"disabled": true,
													"parameters": {
														"instance-variable": "hero",
														"comparison": 1,
														"value": "\"Bit\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "aBook",
													"sid": 566485219599396,
													"disabled": true,
													"parameters": {
														"instance-variable": "hero",
														"comparison": 1,
														"value": "\"Nordik\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "aBook",
													"sid": 277118887778199,
													"parameters": {
														"instance-variable": "hero",
														"comparison": 0,
														"value": "\"Nord\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "pfmt",
													"sid": 390860532510725,
													"parameters": [
														"0",
														"aBook.hero",
														"person.contactAngType=\"xy\"?  person.contactX : contactSide=0? person.X-xPlus : contactSide=3? person.X :   person.X+xPlus",
														"person.contactAngType=\"xy\"?  person.contactY : contactSide=3? person.Y :  person.Y+yPlus",
														"1",
														"1",
														"1",
														"\"zero\"",
														"-1",
														"0"
													]
												},
												{
													"id": "set-text",
													"objectClass": "help",
													"sid": 376890027774175,
													"disabled": true,
													"parameters": {
														"text": "\"3\""
													}
												}
											],
											"sid": 897627033531066,
											"isOrBlock": true
										},
										{
											"eventType": "comment",
											"text": "    Бит выбирает между бегом и ближней телепортацией"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 381782366783900
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "help",
													"sid": 442070799669949,
													"disabled": true,
													"parameters": {
														"text": "\"2T\""
													}
												}
											],
											"sid": 854154102177437,
											"children": [
												{
													"eventType": "comment",
													"text": "    близкая телепортация"
												},
												{
													"eventType": "variable",
													"name": "xx",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": true,
													"isConstant": false,
													"sid": 372607758589534
												},
												{
													"eventType": "variable",
													"name": "yy",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": true,
													"isConstant": false,
													"sid": 259088848698929
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "person",
															"sid": 712101966671989,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "aBook.contactName"
															}
														}
													],
													"actions": [
														{
															"id": "set-text",
															"objectClass": "help",
															"sid": 100641473369091,
															"disabled": true,
															"parameters": {
																"text": "\"3T\""
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 149011150983547,
															"parameters": {
																"variable": "xx",
																"value": "person.contactAngType=\"xy\"?  person.contactX : contactSide=0? person.X-xPlus : contactSide=3? person.X : person.X+xPlus"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 477069404255470,
															"parameters": {
																"variable": "yy",
																"value": "person.contactAngType=\"xy\"?  person.contactY : contactSide=3? person.Y :  person.Y"
															}
														}
													],
													"sid": 852955852226196,
													"children": [
														{
															"eventType": "comment",
															"text": "    телепортация"
														},
														{
															"eventType": "variable",
															"name": "lowerDist",
															"type": "number",
															"initialValue": "120",
															"comment": "",
															"isStatic": false,
															"isConstant": true,
															"sid": 833242656712027
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-between-values",
																	"objectClass": "System",
																	"sid": 508280671586965,
																	"parameters": {
																		"value": "((abs(distance(basis.X,basis.Y,xx,yy)*cos(angle(basis.X,basis.Y,xx,yy)))+abs(distance(basis.X,basis.Y,xx,yy)/aTools.isoCoeff*sin(angle(basis.X,basis.Y,xx,yy)))))*basis.zScale*basis.coeff",
																		"lower-bound": "lowerDist*basis.zScale*basis.coeff",
																		"upper-bound": "aBook.teleportDistance*basis.zScale*basis.coeff"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-text",
																	"objectClass": "help",
																	"sid": 857046355467233,
																	"disabled": true,
																	"parameters": {
																		"text": "\"4T\""
																	}
																},
																{
																	"id": "set-group-active",
																	"objectClass": "System",
																	"sid": 626499857909527,
																	"parameters": {
																		"group-name": "\"teleport\"",
																		"state": "activated"
																	}
																},
																{
																	"id": "callselffunction0",
																	"objectClass": "basis",
																	"sid": 534900773400402,
																	"behaviorType": "sf",
																	"parameters": {
																		"function_name:0": "\"stop\""
																	}
																},
																{
																	"callFunction": "teleport",
																	"sid": 915635198924051,
																	"parameters": [
																		"person.UID",
																		"xx",
																		"yy",
																		"\"quest\"",
																		"contactSide"
																	]
																}
															],
															"sid": 493761441861657
														},
														{
															"eventType": "comment",
															"text": "    совсем близко - пешком"
														},
														{
															"eventType": "comment",
															"text": "    пешком"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 798106508413254
																}
															],
															"actions": [
																{
																	"id": "set-text",
																	"objectClass": "help",
																	"sid": 244036669351715,
																	"disabled": true,
																	"parameters": {
																		"text": "\"4TW\""
																	}
																},
																{
																	"callFunction": "pfmt",
																	"sid": 712811419324647,
																	"disabled": true,
																	"parameters": [
																		"0",
																		"aBook.hero",
																		"xx",
																		"yy",
																		"1",
																		"1",
																		"1",
																		"\"zero\"",
																		"0",
																		"0"
																	]
																},
																{
																	"callFunction": "pfmt",
																	"sid": 493356710753725,
																	"parameters": [
																		"0",
																		"aBook.hero",
																		"person.contactAngType=\"xy\"?  person.contactX : contactSide=0? person.X-xPlus : contactSide=3? person.X :    person.X+xPlus",
																		"person.contactAngType=\"xy\"?  person.contactY : contactSide=3? person.Y :   person.Y",
																		"1",
																		"1",
																		"1",
																		"\"zero\"",
																		"0",
																		"0"
																	]
																}
															],
															"sid": 857066730781552
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 583520292757189
		},
		{
			"eventType": "comment",
			"text": "    ближняя телепортация"
		},
		{
			"eventType": "comment",
			"text": "    contactSide: 0 - noMirror, 1- mirror, 2 - fix, 3 - free"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "teleport",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"functionName": "teleport",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "personUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 453890153611556
						},
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 397066787533987
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 527024210835989
						},
						{
							"name": "type",
							"type": "string",
							"initialValue": "quest",
							"comment": "",
							"sid": 861061309840066
						},
						{
							"name": "contactSide",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 647549092324295
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "hero",
							"sid": 504934076183327,
							"parameters": {
								"instance-variable": "active"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 491989581177446,
							"disabled": true,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "\"Bit\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 378320545603695,
							"disabled": true,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "\"Bit\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 896660815364053,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "shad",
							"sid": 206862164065644,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "person",
							"sid": 222104760104432,
							"parameters": {
								"unique-id": "personUID"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 254416890133424,
							"parameters": {
								"instance-variable": "mod",
								"comparison": 1,
								"value": "\"noControl\""
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 778922458520562,
							"disabled": true,
							"parameters": {
								"text": "\"5T\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 816998552935456,
							"parameters": {
								"instance-variable": "teleport",
								"value": "true"
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "teleportFX",
							"sid": 381309480949464,
							"parameters": {
								"object": "hero",
								"image-point-optional": "2"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "teleportFX",
							"sid": 278443932182932,
							"parameters": {
								"x": "x",
								"y": "y-hero.Height/2"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "teleportFX",
							"sid": 314541278610373,
							"parameters": {
								"scale": "person.startScaleCoeff*basis.zScale*Self.startScaleCoeff*aBook.heroScaleCoeff"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "teleportFX",
							"sid": 553590107016476,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "teleportFX",
							"sid": 381638559633598,
							"parameters": {
								"animation": "\"fx\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 301165602973895,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 863860910611243,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 857327112519522,
							"parameters": {
								"instance-variable": "move",
								"value": "true"
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 773410664478272,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"move\""
							}
						},
						{
							"id": "set-position",
							"objectClass": "basis",
							"sid": 953759128229121,
							"parameters": {
								"x": "x",
								"y": "y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 627503849368659,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"goToContact\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "basis",
							"sid": 129036279238603,
							"parameters": {
								"angle": "contactSide=2? person.contactAng : contactSide=0? 45 : contactSide=1? 135 : Self.Angle"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "basis",
							"sid": 814148237544077,
							"parameters": {
								"instance-variable": "direct",
								"value": "int(((Self.Angle+360+22.5) %360)/45)"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "hero",
							"sid": 659145748512692,
							"parameters": {
								"animation": "\"dialog\"",
								"from": "beginning"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 648319789765064,
							"parameters": {
								"seconds": "0.21",
								"use-timescale": true
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 733620486007862,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stop\""
							}
						},
						{
							"id": "callselffunction0",
							"objectClass": "basis",
							"sid": 107845497039700,
							"disabled": true,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"zScale\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "hero",
							"sid": 307157515278930,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "shad",
							"sid": 855591762329039,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 439968100101917,
							"parameters": {
								"instance-variable": "move",
								"value": "false"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aBook",
							"sid": 786670619344322,
							"disabled": true,
							"parameters": {
								"instance-variable": "heroTask",
								"value": "\"dialog\""
							}
						},
						{
							"id": "set-animation",
							"objectClass": "hero",
							"sid": 573070125095450,
							"disabled": true,
							"parameters": {
								"animation": "\"dialog\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-text",
							"objectClass": "info",
							"sid": 783263125110135,
							"disabled": true,
							"parameters": {
								"text": "basis.Angle"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 151978006398280,
							"disabled": true,
							"parameters": {
								"text": "\"телепорт миррор\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 464736638061598,
							"parameters": {
								"seconds": "0.21",
								"use-timescale": true
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "basis",
							"sid": 145771197055599,
							"parameters": {
								"instance-variable": "teleport",
								"value": "false"
							}
						}
					],
					"sid": 681038522532342,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 784327585920751,
									"parameters": {
										"instance-variable": "contactAngType",
										"comparison": 0,
										"value": "\"mirror\""
									}
								}
							],
							"actions": [
								{
									"id": "set-angle",
									"objectClass": "basis",
									"sid": 869425430688869,
									"parameters": {
										"angle": "person.contactAng"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 288669676580837,
									"parameters": {
										"instance-variable": "direct",
										"value": "int(((Self.Angle+360+22.5) %360)/45)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 682168902761491,
									"parameters": {
										"variable": "contactSide",
										"value": "basis.X<person.X? 0 : 1"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 498498964389488,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 404944973685453,
									"disabled": true,
									"parameters": {
										"text": "\"тот же контакт миррор\""
									}
								}
							],
							"sid": 674332299650133,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 385264226105905,
											"parameters": {
												"variable": "contactSide",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "hero",
											"sid": 556507377385223,
											"parameters": {
												"state": "not-mirrored"
											}
										},
										{
											"id": "set-mirrored",
											"objectClass": "person",
											"sid": 548743341437768,
											"parameters": {
												"state": "mirrored"
											}
										}
									],
									"sid": 989927063132348
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 419115470865529,
											"parameters": {
												"variable": "contactSide",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "hero",
											"sid": 316947544611380,
											"parameters": {
												"state": "mirrored"
											}
										},
										{
											"id": "set-mirrored",
											"objectClass": "person",
											"sid": 102487443515091,
											"parameters": {
												"state": "not-mirrored"
											}
										}
									],
									"sid": 527687714913079
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 946348143614149,
									"parameters": {
										"instance-variable": "contactAngType",
										"comparison": 0,
										"value": "\"fix\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "person",
									"sid": 272940948804357,
									"parameters": {
										"instance-variable": "contactAngType",
										"comparison": 0,
										"value": "\"xy\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 903148022988704,
									"parameters": {
										"variable": "contactSide",
										"value": "person.contactSide"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "basis",
									"sid": 678909923200706,
									"parameters": {
										"angle": "person.contactAng"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 370347325762205,
									"parameters": {
										"instance-variable": "direct",
										"value": "int(((Self.Angle+360+22.5) %360)/45)"
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 801874433679877,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "info",
									"sid": 910283736177326,
									"disabled": true,
									"parameters": {
										"text": "basis.Angle"
									}
								}
							],
							"sid": 901875746751266,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 434358625628626,
											"parameters": {
												"variable": "contactSide",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "hero",
											"sid": 615407827633626,
											"parameters": {
												"state": "not-mirrored"
											}
										}
									],
									"sid": 381107739169039
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 682381047874165,
											"parameters": {
												"variable": "contactSide",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "hero",
											"sid": 858499755651644,
											"parameters": {
												"state": "mirrored"
											}
										}
									],
									"sid": 780177231271956
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "teleportFX",
							"sid": 399472113459090,
							"parameters": {
								"animation": "\"fx\""
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "teleportFX",
							"sid": 160437580954578,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 220217214835984,
					"children": [
						{
							"bookmark": true,
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 258838768208854,
									"parameters": {
										"seconds": "0.22",
										"use-timescale": true
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 712209476995816,
									"parameters": {
										"group-name": "\"teleport\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 415526470412296
						}
					]
				}
			],
			"sid": 995950200222559
		},
		{
			"eventType": "comment",
			"text": "    запуск диалога (сценария)"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "contact",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "basis",
							"sid": 218526807513893,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"stopped\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 839564905124086,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 831754861788712,
							"parameters": {
								"instance-variable": "heroTask",
								"comparison": 0,
								"value": "\"goToContact\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "aBook",
							"sid": 475831634451044,
							"parameters": {
								"instance-variable": "mod",
								"comparison": 1,
								"value": "\"noControl\""
							}
						}
					],
					"actions": [],
					"sid": 312445673134287,
					"children": [
						{
							"eventType": "variable",
							"name": "contactSide",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 469905278446070
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "hero",
									"sid": 834770610116419,
									"parameters": {
										"instance-variable": "active"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "person",
									"sid": 780510323571099,
									"parameters": {
										"unique-id": "aBook.contactUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 532360686162895,
									"parameters": {
										"instance-variable": "dialogSpotPerson",
										"value": "person.name"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 690585301771642,
									"parameters": {
										"instance-variable": "heroTask",
										"value": "\"request\""
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 785579464858770,
									"parameters": {
										"group-name": "\"adventureTime\"",
										"state": "activated"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 255790479952466,
									"parameters": {
										"variable": "contactSide",
										"value": "person.contactAngType=\"mirror\"&basis.X<person.X? 0 : person.contactAngType=\"mirror\"&basis.X>person.X? 1 : person.contactAngType=\"fix\"|person.contactAngType=\"xy\" ? 2 : 3"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "basis",
									"sid": 643197877067590,
									"parameters": {
										"angle": "contactSide=2? person.contactAng : contactSide=0? 45 : contactSide=1? 135 : Self.Angle"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "basis",
									"sid": 485283324436751,
									"parameters": {
										"instance-variable": "direct",
										"value": "int(((Self.mt.MovingAngle+360+22.5) %360)/45)"
									}
								},
								{
									"callFunction": "animPers",
									"sid": 318994683831011,
									"disabled": true,
									"parameters": [
										"person.UID",
										"basis.directNumbers=8? \"stop\"&(basis.direct=3 ? 1 : basis.direct=4 ? 0 : basis.direct=5 ? 7 : basis.direct) : basis.directNumbers=6? \"stop\" & (basis.direct=2 ? 1 : basis.direct=3 ? 0 : basis.direct=4 ? 5 : basis.direct) :  \"stop1\"",
										"0",
										"0",
										"777",
										"0"
									]
								}
							],
							"sid": 696302287932905,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 810863962957308,
											"parameters": {
												"instance-variable": "contactAngType",
												"comparison": 0,
												"value": "\"fix\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 331670348341424,
											"parameters": {
												"instance-variable": "contactAngType",
												"comparison": 0,
												"value": "\"xy\""
											}
										}
									],
									"actions": [
										{
											"id": "set-angle",
											"objectClass": "basis",
											"sid": 746558712396603,
											"parameters": {
												"angle": "person.contactAng"
											}
										},
										{
											"id": "set-text",
											"objectClass": "info",
											"sid": 170249852128046,
											"disabled": true,
											"parameters": {
												"text": "basis.Angle"
											}
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 771938316315653,
											"disabled": true,
											"parameters": {
												"text": "\"пешком фикс\""
											}
										}
									],
									"sid": 657162751046529,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 490445458110849,
											"parameters": {
												"instance-variable": "contactAngType",
												"comparison": 0,
												"value": "\"mirror\""
											}
										}
									],
									"actions": [
										{
											"id": "set-angle",
											"objectClass": "basis",
											"sid": 938187125755963,
											"parameters": {
												"angle": "basis.X<person.X? 45 : 135"
											}
										},
										{
											"id": "set-text",
											"objectClass": "info",
											"sid": 541843263892574,
											"disabled": true,
											"parameters": {
												"text": "basis.Angle"
											}
										},
										{
											"id": "set-text",
											"objectClass": "help",
											"sid": 908553410795604,
											"disabled": true,
											"parameters": {
												"text": "\"пешком миррор\""
											}
										}
									],
									"sid": 981165121207537,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 240434472071980,
													"parameters": {
														"first-value": "contactSide",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-mirrored",
													"objectClass": "hero",
													"sid": 296451279318290,
													"parameters": {
														"state": "mirrored"
													}
												},
												{
													"id": "set-mirrored",
													"objectClass": "person",
													"sid": 774996675004465,
													"parameters": {
														"state": "not-mirrored"
													}
												}
											],
											"sid": 679407562278828
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 417976086196164
												}
											],
											"actions": [
												{
													"id": "set-mirrored",
													"objectClass": "hero",
													"sid": 346797396918917,
													"parameters": {
														"state": "not-mirrored"
													}
												},
												{
													"id": "set-mirrored",
													"objectClass": "person",
													"sid": 139986140461817,
													"parameters": {
														"state": "mirrored"
													}
												}
											],
											"sid": 663109689242833
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "person",
													"sid": 645626306278829,
													"parameters": {
														"instance-variable": "onBase"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "base",
													"sid": 735953196042108,
													"parameters": {
														"instance-variable": "name",
														"comparison": 0,
														"value": "person.name"
													}
												}
											],
											"actions": [
												{
													"id": "set-angle",
													"objectClass": "base",
													"sid": 938576616213233,
													"parameters": {
														"angle": "base.X<basis.X? 45 : 135"
													}
												}
											],
											"sid": 227757391107324
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "frame",
											"sid": 427505904262361,
											"parameters": {
												"instance-variable": "n",
												"comparison": 0,
												"value": "aTools.camindex"
											}
										}
									],
									"actions": [
										{
											"id": "instance-signal",
											"objectClass": "hero",
											"sid": 250338506359419,
											"parameters": {
												"tag": "\"autoQuest\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "hero",
											"sid": 511404761884349,
											"parameters": {
												"animation": "\"dialog\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 868733977785226,
											"parameters": {
												"group-name": "\"goToArc\"",
												"state": "activated"
											}
										},
										{
											"callFunction": "goToArc",
											"sid": 206268436806478,
											"parameters": [
												"aBook.hero",
												"person.name",
												"aGame.specialPlace=\"zero\"?frame.locationName:aGame.specialPlace",
												"aGame.specialTime=\"zero\"?aGame.act:aGame.specialTime",
												"hero.heroForm",
												"person.forms",
												"hero.mainTask"
											]
										}
									],
									"sid": 669391023887361
								},
								{
									"eventType": "comment",
									"text": "тест"
								},
								{
									"eventType": "comment",
									"text": "выбрасывание Торника"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "person",
											"sid": 461860111380528,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "\"Thornik\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "aBook",
											"sid": 317344371695042,
											"parameters": {
												"instance-variable": "hero",
												"comparison": 0,
												"value": "\"Bit\""
											}
										}
									],
									"actions": [
										{
											"id": "callselffunction0",
											"objectClass": "aIns",
											"sid": 455709956056337,
											"behaviorType": "sf",
											"parameters": {
												"function_name:0": "\"ThornikFly\""
											}
										}
									],
									"sid": 583217552336265
								}
							]
						}
					]
				}
			],
			"sid": 304834404335552
		},
		{
			"eventType": "comment",
			"text": "клики по персонажам, если герой недоступен"
		},
		{
			"functionName": "selfPerson",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 472306276543582,
					"parameters": {
						"group-name": "\"goToArc\"",
						"state": "activated"
					}
				}
			],
			"sid": 596209687000654,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "frame",
							"sid": 385607382776011,
							"parameters": {
								"instance-variable": "n",
								"comparison": 0,
								"value": "aTools.camindex"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "person",
							"sid": 399886478807110,
							"parameters": {
								"unique-id": "aTools.pointUID"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 743840766389746,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "instance-signal",
							"objectClass": "hero",
							"sid": 365504399562188,
							"parameters": {
								"tag": "\"autoQuest\""
							}
						},
						{
							"callFunction": "goToArc",
							"sid": 568197469031967,
							"parameters": [
								"aBook.hero&\"_\"&aBook.mod&\"_\"",
								"person.name",
								"aGame.specialPlace=\"zero\"?frame.locationName:aGame.specialPlace",
								"aGame.specialTime=\"zero\"?aGame.act:aGame.specialTime",
								"hero.heroForm",
								"person.forms",
								"hero.mainTask"
							]
						}
					],
					"sid": 910737923503157
				}
			]
		},
		{
			"eventType": "comment",
			"text": "сигнал перед началом диалога"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-instance-signal",
					"objectClass": "Bit",
					"sid": 334820804718656,
					"parameters": {
						"tag": "\"autoQuest\""
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "person",
					"sid": 899691294305188,
					"parameters": {
						"instance-variable": "name",
						"comparison": 0,
						"value": "aBook.contactName"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "Bit",
					"sid": 121280927348537,
					"parameters": {
						"instance-variable": "storySpline",
						"value": "\"normal\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Bit",
					"sid": 684267363648481,
					"parameters": {
						"instance-variable": "storyAnimation",
						"value": "Self.storyAnimation"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Bit",
					"sid": 568285108075628,
					"parameters": {
						"instance-variable": "storyScale",
						"value": "0.55"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Bit",
					"sid": 876372431078735,
					"parameters": {
						"instance-variable": "dialogHeyAnim",
						"value": "\"au\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 124816026619928,
					"parameters": {
						"instance-variable": "dialogAnim",
						"value": "\"dialog\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 735104994994737,
					"parameters": {
						"instance-variable": "storySpline",
						"value": "Self.storySpline"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 621598952069057,
					"parameters": {
						"instance-variable": "storyAnimation",
						"value": "Self.storyAnimation"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "person",
					"sid": 544536833804623,
					"parameters": {
						"instance-variable": "storyScale",
						"value": "Self.storyScale"
					}
				}
			],
			"sid": 701800136370747,
			"disabled": true
		},
		{
			"eventType": "comment",
			"text": "параметры sf:\n0 - главная задача героя, например, escapePlan\n1 - арка персонажа, например toyHummer\n2 - название главы, или, если указано, специальное время. Примеры: Prisoner, или OctopusJorney\n3 - форма героя, например, Nord\n4 - форма персонажа, например FoehnMaskAngry\n5 - место, например, RifDark (название записано в рамке локации или специальное место)\n6 - имя героя, например, Nordik\n7 - имя персонажа, например, Foehn"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "goToArc",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"functionName": "goToArc",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "hero",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 934252603430376
						},
						{
							"name": "person",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 837919279041224
						},
						{
							"name": "place",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 186224655083722
						},
						{
							"name": "theTime",
							"type": "string",
							"initialValue": "",
							"comment": "chapters",
							"sid": 681595384173637
						},
						{
							"name": "heroForm",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 471816052965605
						},
						{
							"name": "personForm",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 671097150679799
						},
						{
							"name": "heroMTask",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 898722228424545
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "hero",
							"sid": 648756940120497,
							"parameters": {
								"instance-variable": "heroName",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 442170887591216,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "person"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "!"
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 680840827920254,
							"disabled": true,
							"parameters": {
								"group-name": "\"dialog\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 564771841332274,
							"parameters": {
								"group-name": "\"story\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "сигнал о начале контакта"
						},
						{
							"id": "instance-signal",
							"objectClass": "person",
							"sid": 851576061982462,
							"parameters": {
								"tag": "\"vs\"&hero"
							}
						}
					],
					"sid": 865624739636849,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-key",
									"objectClass": "aStory",
									"sid": 720805605736962,
									"parameters": {
										"key": "person.name"
									}
								}
							],
							"actions": [
								{
									"id": "instance-signal",
									"objectClass": "person",
									"sid": 584893528255561,
									"parameters": {
										"tag": "\"vs\"&hero&aStory.Get(person.name)+1"
									}
								}
							],
							"sid": 134205061318889
						},
						{
							"eventType": "comment",
							"text": "персонаж готов вступать в диалог"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "person",
									"sid": 372458022545519,
									"parameters": {
										"instance-variable": "story"
									}
								}
							],
							"actions": [
								{
									"id": "disableGroupsOfType",
									"objectClass": "groups",
									"sid": 800328967955827,
									"parameters": {
										"groupType": "\"Tale\""
									}
								},
								{
									"id": "enableGroupsOfType",
									"objectClass": "groups",
									"sid": 379067514128482,
									"parameters": {
										"groupType": "person&\"Tale\""
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 634366498285168,
									"disabled": true,
									"parameters": {
										"group-name": "person&\"Tale\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 726667049265315,
									"disabled": true,
									"parameters": {
										"group-name": "person&\"Tale\"&aTools.n",
										"state": "activated"
									}
								}
							],
							"sid": 728760935614276,
							"children": [
								{
									"eventType": "comment",
									"text": "первый диалог, начинает персонаж, если пассионарность не в минусе"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 312385342732701,
											"parameters": {
												"instance-variable": "dialogStartFirst"
											}
										}
									],
									"actions": [
										{
											"callFunction": "hey",
											"sid": 988080989410036,
											"parameters": [
												"hero.heroName",
												"person.name"
											]
										}
									],
									"sid": 247034966686133,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 839489014182456,
													"parameters": {
														"instance-variable": "passionarity",
														"comparison": 5,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "instance-signal",
													"objectClass": "person",
													"sid": 184127684777178,
													"disabled": true,
													"parameters": {
														"tag": "\"startDialog\""
													}
												}
											],
											"sid": 768761693187540,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "person",
															"sid": 328150557912220,
															"parameters": {
																"instance-variable": "onBase"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "base",
															"sid": 697309741722350,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "person.name"
															}
														}
													],
													"actions": [
														{
															"callFunction": "dCloud",
															"sid": 984971329575024,
															"parameters": [
																"person.UID",
																"person.storySpline",
																"\"\"",
																"person.storyAnimation",
																false,
																"person.storyScale*base.zScale",
																"0.1",
																"0",
																"0",
																"1"
															]
														}
													],
													"sid": 827340729701572
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 149850318783525
														}
													],
													"actions": [
														{
															"callFunction": "dCloud",
															"sid": 405937757684634,
															"parameters": [
																"person.UID",
																"person.storySpline",
																"\"\"",
																"person.storyAnimation",
																false,
																"person.storyScale",
																"0.1",
																"0",
																"0",
																"1"
															]
														}
													],
													"sid": 703621916860396
												},
												{
													"eventType": "comment",
													"text": "знак знакомства, далее преимущественно Бит будет начинать диалог",
													"background-color": [
														0.4666666666666667,
														0.8862745098039215,
														0.43529411764705883,
														1
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "has-key",
															"objectClass": "aStory",
															"sid": 234575505040509,
															"parameters": {
																"key": "person.name"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "add-key",
															"objectClass": "aStory",
															"sid": 370807398488679,
															"parameters": {
																"key": "person.name",
																"value": "1"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "person",
															"sid": 388702358649837,
															"parameters": {
																"instance-variable": "dialogStartFirst",
																"value": "false"
															}
														}
													],
													"sid": 495849376847382
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 452057027740473
												}
											],
											"actions": [
												{
													"id": "instance-signal",
													"objectClass": "hero",
													"sid": 533324239905594,
													"parameters": {
														"tag": "\"startDialog\""
													}
												}
											],
											"sid": 889267527407543
										}
									]
								},
								{
									"eventType": "comment",
									"text": "прочие диалоги начинает Бит, если пассионарность персонажа меньше или равна его пассионарности"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 458022604075809
										}
									],
									"actions": [],
									"sid": 276105948408904,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "person",
													"sid": 330960590577348,
													"parameters": {
														"instance-variable": "passionarity",
														"comparison": 4,
														"value": "aBook.BitPassionarity"
													}
												}
											],
											"actions": [
												{
													"id": "instance-signal",
													"objectClass": "person",
													"sid": 393821661478260,
													"disabled": true,
													"parameters": {
														"tag": "\"startDialog\""
													}
												}
											],
											"sid": 128525151361042,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "person",
															"sid": 551437036606469,
															"parameters": {
																"instance-variable": "onBase"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "base",
															"sid": 349924626936775,
															"parameters": {
																"instance-variable": "name",
																"comparison": 0,
																"value": "person.name"
															}
														}
													],
													"actions": [
														{
															"callFunction": "dCloud",
															"sid": 950381171426920,
															"parameters": [
																"person.UID",
																"person.storySpline",
																"\"\"",
																"person.storyAnimation",
																false,
																"person.storyScale*base.zScale",
																"0.1",
																"0",
																"1",
																"1"
															]
														}
													],
													"sid": 359791131596737
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 179539091520232
														}
													],
													"actions": [
														{
															"callFunction": "dCloud",
															"sid": 584584432394168,
															"parameters": [
																"person.UID",
																"person.storySpline",
																"\"\"",
																"person.storyAnimation",
																false,
																"person.storyScale",
																"0.1",
																"0",
																"1",
																"1"
															]
														}
													],
													"sid": 129819674884330
												},
												{
													"bookmark": true,
													"eventType": "block",
													"conditions": [
														{
															"id": "has-key",
															"objectClass": "aStory",
															"sid": 749854260051859,
															"parameters": {
																"key": "person.name"
															}
														}
													],
													"actions": [
														{
															"id": "set-key",
															"objectClass": "aStory",
															"sid": 640215291827903,
															"parameters": {
																"key": "person.name",
																"value": "aStory.Get(person.name)+1"
															}
														}
													],
													"sid": 908385696423767
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 852709695959970
												}
											],
											"actions": [
												{
													"id": "instance-signal",
													"objectClass": "hero",
													"sid": 958406647920668,
													"parameters": {
														"tag": "\"startDialog\""
													}
												}
											],
											"sid": 372592512378091
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "персонаж ограничивается нотификатором"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 855671030576160
								}
							],
							"actions": [],
							"sid": 382376755563368,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "person",
											"sid": 469989144513196,
											"parameters": {
												"instance-variable": "onBase"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "base",
											"sid": 672643485085677,
											"parameters": {
												"instance-variable": "name",
												"comparison": 0,
												"value": "person.name"
											}
										}
									],
									"actions": [
										{
											"callFunction": "note",
											"sid": 429570866861712,
											"parameters": [
												"person.UID",
												"person.noteSpline",
												"person.storyScale*base.zScale"
											]
										}
									],
									"sid": 849166034079525
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 885634717946822
										}
									],
									"actions": [
										{
											"callFunction": "note",
											"sid": 742301613874995,
											"parameters": [
												"person.UID",
												"person.noteSpline",
												"person.storyScale"
											]
										}
									],
									"sid": 457488040759712
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 641769725305243,
									"parameters": {
										"group-name": "\"contact\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 906726663763819,
									"parameters": {
										"group-name": "\"goToArc\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 965905165850460
						},
						{
							"eventType": "comment",
							"text": "",
							"background-color": [
								0.7607843137254902,
								0.7607843137254902,
								0.7607843137254902,
								1
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "info",
									"sid": 531384743569917,
									"disabled": true,
									"parameters": {
										"text": "person"
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 143684460051121,
									"disabled": true,
									"parameters": {
										"text": "hero"
									}
								}
							],
							"sid": 118401156098296,
							"disabled": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\nпервым диалог начинает герой",
					"background-color": [
						0.4666666666666667,
						0.8862745098039215,
						0.43529411764705883,
						1
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-instance-signal",
							"objectClass": "Bit",
							"sid": 909431790842351,
							"parameters": {
								"tag": "\"startDialog\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "person",
							"sid": 477996601417566,
							"parameters": {
								"unique-id": "aBook.contactUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "dCloud",
							"sid": 932494913889268,
							"parameters": [
								"Bit.UID",
								"Bit.storySpline",
								"\"\"",
								"Bit.storyAnimation",
								false,
								"Bit.storyScale*base.zScale",
								"0.1",
								"1",
								"0",
								"1"
							]
						}
					],
					"sid": 291009199222396,
					"children": [
						{
							"bookmark": true,
							"eventType": "block",
							"conditions": [
								{
									"id": "has-key",
									"objectClass": "aStory",
									"sid": 341302222790236,
									"parameters": {
										"key": "person.name"
									}
								}
							],
							"actions": [
								{
									"id": "set-key",
									"objectClass": "aStory",
									"sid": 346690408249631,
									"parameters": {
										"key": "person.name",
										"value": "aStory.Get(person.name)+1"
									}
								}
							],
							"sid": 940045752729937
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 167088337134195
								},
								{
									"id": "has-key",
									"objectClass": "aStory",
									"sid": 156001555389234,
									"parameters": {
										"key": "person.name"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "add-key",
									"objectClass": "aStory",
									"sid": 469474867466214,
									"parameters": {
										"key": "person.name",
										"value": "1"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "person",
									"sid": 470608926688668,
									"parameters": {
										"instance-variable": "dialogStartFirst",
										"value": "false"
									}
								}
							],
							"sid": 652937888857042
						}
					]
				}
			],
			"sid": 724994797756340
		},
		{
			"eventType": "comment",
			"text": "\n\n\n",
			"background-color": [
				0.7490196078431373,
				0.7490196078431373,
				0.7490196078431373,
				1
			]
		},
		{
			"eventType": "group",
			"disabled": true,
			"title": "CEmod",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "hero",
							"sid": 545212026751244,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"msInfo\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "person",
							"sid": 443324125913922,
							"parameters": {
								"unique-id": "hero.UID"
							}
						}
					],
					"actions": [
						{
							"customAction": "msInfo",
							"objectClass": "person",
							"sid": 332244468842512
						}
					],
					"sid": 169231257481881,
					"disabled": true
				},
				{
					"aceType": "action",
					"aceName": "msInfo",
					"objectClass": "person",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [
						{
							"id": "is-timer-running",
							"objectClass": "person",
							"sid": 839877034966235,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"timeOut\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "person",
							"sid": 250170755770361,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.3",
								"type": "once",
								"tag": "\"timeOut\""
							}
						}
					],
					"sid": 871422371727802,
					"disabled": true
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"functionName": "script",
					"functionDescription": "miniScript story",
					"functionCategory": "miniScript",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "person",
							"type": "string",
							"initialValue": "Bit",
							"comment": "",
							"sid": 863960221026716
						},
						{
							"name": "miniScript",
							"type": "string",
							"initialValue": "default",
							"comment": "",
							"sid": 969024993072817
						},
						{
							"name": "priority",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 118393370115803
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 645083899819056,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "person"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "!"
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 594826096490532,
							"disabled": true,
							"parameters": {
								"group-name": "\"dialog\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "!"
						}
					],
					"sid": 860245243534717,
					"disabled": true
				},
				{
					"eventType": "comment",
					"text": "\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "person",
							"sid": 214807914965465
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "на всякий"
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 596610389161114,
							"parameters": {
								"seconds": "dt*5",
								"use-timescale": true
							}
						},
						{
							"id": "request-url",
							"objectClass": "AJAX",
							"sid": 629073778268053,
							"parameters": {
								"tag": "person.name&person.UID",
								"url": "\"miniScripts/\"&person.name&\".json\""
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 853992608052788,
							"disabled": true
						}
					],
					"sid": 880907832590614,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-completed",
							"objectClass": "AJAX",
							"sid": 156698121000391
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 859077993464432,
							"parameters": {
								"first-value": "AJAX.LastStatusCode",
								"comparison": 0,
								"second-value": "200"
							}
						}
					],
					"actions": [],
					"sid": 284645843935879,
					"disabled": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "person",
									"sid": 910993220112948,
									"parameters": {
										"object": "miniscripts",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "load",
									"objectClass": "miniscripts",
									"sid": 404944916744706,
									"parameters": {
										"json": "AJAX.LastData"
									}
								}
							],
							"sid": 696543348081478,
							"disabled": true
						}
					]
				}
			],
			"sid": 521708224194730
		}
	],
	"sid": 628066808265145
}