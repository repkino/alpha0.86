{
	"name": "_AI",
	"events": [
		{
			"eventType": "comment",
			"text": "\n\n  механика сквозного геймплея\n\n"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 731604772195814
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "aTools",
					"sid": 244877678104139,
					"parameters": {
						"instance-variable": "n",
						"comparison": 0,
						"value": "frame.n"
					}
				}
			],
			"actions": [],
			"sid": 746036873739495,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 776380224878524,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"mico\""
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "indiPuls",
							"sid": 416380766024544,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "indiPuls",
							"sid": 312472786227160,
							"parameters": {
								"animation": "\"stop\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "indiAnim",
							"sid": 481290884579607,
							"parameters": {
								"animation": "\"zero\"",
								"from": "beginning"
							}
						}
					],
					"sid": 617874216873194
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 805319727747192,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Lumy\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "запуск элементов пульса"
						},
						{
							"id": "set-visible",
							"objectClass": "indiPuls",
							"sid": 431640608131302,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-blend-mode",
							"objectClass": "indiPuls",
							"sid": 558895633063595,
							"parameters": {
								"blend-mode": "source-atop"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "indiPuls",
							"sid": 623191162249479,
							"parameters": {
								"animation": "\"stop\"",
								"from": "beginning"
							}
						},
						{
							"callFunction": "pulsStart",
							"sid": 285340247242459
						}
					],
					"sid": 508880701758675
				},
				{
					"eventType": "comment",
					"text": "назначение объектам семьи map значений воздействия на гг в движении и неподвижности"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 973665514703675,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"grass\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 618866760089368,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.01"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 274256158862968,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.01"
							}
						}
					],
					"sid": 850518945625807
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 428226188666669,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"bio\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 312203829256880,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.1"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 374396046179919,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.01"
							}
						}
					],
					"sid": 126520414520441
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 911071600334811,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"forest\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 129446331086101,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.2"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 617496236266644,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.06"
							}
						}
					],
					"sid": 926352411019113
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 319208094701807,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"gaser\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 655523354064826,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.2"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 234895506676986,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.2"
							}
						}
					],
					"sid": 842768173063108
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 755231438312105,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"swamp\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 816738912830335,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.1"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 303894031423729,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.3"
							}
						}
					],
					"sid": 874004792459291
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 847837360171838,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"water\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 806172849939611,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.5"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 436671097494362,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.3"
							}
						}
					],
					"sid": 140430048998461
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "map",
							"sid": 787787851102532,
							"parameters": {
								"instance-variable": "mName",
								"comparison": 0,
								"value": "\"thorns\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 342812648255611,
							"parameters": {
								"instance-variable": "sense",
								"value": "-0.6"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "map",
							"sid": 282079542477391,
							"parameters": {
								"instance-variable": "senseIdle",
								"value": "-0.4"
							}
						}
					],
					"sid": 731472996504248
				}
			]
		},
		{
			"eventType": "comment",
			"text": "запуск пульса"
		},
		{
			"functionName": "pulsStart",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-group-active",
					"objectClass": "System",
					"sid": 604312332104242,
					"parameters": {
						"group-name": "\"AI\"",
						"state": "activated"
					}
				},
				{
					"id": "start-timer",
					"objectClass": "indicator",
					"sid": 694833754628071,
					"behaviorType": "Timer",
					"parameters": {
						"duration": "0",
						"type": "once",
						"tag": "\"puls\""
					}
				},
				{
					"id": "start-timer",
					"objectClass": "indicator",
					"sid": 631691354127518,
					"disabled": true,
					"behaviorType": "Timer",
					"parameters": {
						"duration": "aGame.puls",
						"type": "once",
						"tag": "\"puls\""
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aGame",
					"sid": 982589924433190,
					"disabled": true,
					"parameters": {
						"instance-variable": "mind",
						"value": "10"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "aGame",
					"sid": 102887079713621,
					"disabled": true,
					"parameters": {
						"instance-variable": "mind",
						"value": "1"
					}
				}
			],
			"sid": 896886557170687
		},
		{
			"eventType": "comment",
			"text": "\n\n   воздействие на сознание, ключевая игровая механика\n\n"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "AI",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "comment",
					"text": "Всё в игре влияет на сознание героя через функцию sense. Герой, прыгнул, ему что-то сказали, толкнули - вызывается функция с мгновенным уроном или прибавкой. Он идёт по траве или по болоту, или стоит или сидит в медитации - постоянно, как сердце, бьётся таймер пульса, вызывающий ту же функцию sense передающую герою воздействие от поверхности, окружения, зачарования и других постоянных воздействий. Пульс убыстряется при опасности и замедляется в покое."
				},
				{
					"eventType": "comment",
					"text": "\nвычислители:"
				},
				{
					"eventType": "comment",
					"text": "mind - сознание героя от 10 до 0. Действующее поле индикатора меняется целыми числами. Например, mind =6.47 - проигрывается анимация \"a3\", тернии захватывают радиус круга на 3 из 10. Если 5.9 - \"а4\" и т.д. обратная пропорциональность."
				},
				{
					"eventType": "comment",
					"text": "sense - переменная, прибавляемое к mind воздействие, нейтральное в нуле ( ниже 0 уменьшает, выше 0 увеличивает), sense передаётся из спрайтов, составляющих карту - через пульс - и из различных действий гг и окружения. При беге и ходьбе карта передаёт разные значения, прыжки, бросание мяча, толкание героя - отрицательный sense."
				},
				{
					"eventType": "comment",
					"text": "sensePlus - это sense, плюс зачарование и буст. Сумма воздействий."
				},
				{
					"eventType": "comment",
					"text": "hit - по умолчанию 0 - ему присваивается сумма воздействий sensePlus, поделённая на защиту, иначе говоря, итоговое воздействие. Защита накладывается только на отрицательное sensePlus, положительное проходит без деления. \nЕсли hit передаётся функцией не равный 0, то становится прямым уроном, игнорируя защиту."
				},
				{
					"eventType": "comment",
					"text": "mindDefend - отрицательное воздействие sensePlus делится на mindDefend. Это позитивный балансный коэффициент. Меняется ситуативно. Отображать пиктограммой в центре индикатора."
				},
				{
					"eventType": "comment",
					"text": "level - то же что и mindDefend, только делит весь \"урон\", и позитивный и негативный. Обе переменные полезны для отладки играбельности. Аналог повышения уровня персонажа или ослабления, если меньше 1.\nМаксимальное значение 3 (или меньше), в сумме с mindDefend разумный максимум не выше 6. Отображать как  |  ||  |||   ?"
				},
				{
					"eventType": "comment",
					"text": "impact - уровень воздействия (влияния) на sense, умножается на sense, от 0 до 1, является характеристикой которая нужна для физических игровых воздействий в мини-играх, вроде силы попадания, для обычной игры не нужен"
				},
				{
					"eventType": "comment",
					"text": "\nинформаторы и условия:"
				},
				{
					"eventType": "comment",
					"text": "influencer - актор вызвавший воздействие - мяч, прыжок, пульс и т.п."
				},
				{
					"eventType": "comment",
					"text": "action - название мгновенного воздействия на сознание, уточняющая действие инфлюэнсера. Если инфлюэнсер прыжок, то action уточняет какой - слабый, средний или сильный прыжок."
				},
				{
					"eventType": "comment",
					"text": "mindState - постоянное состояние сознания. Медитация, пробуждение, безумие, движение, неподвижность, увлеченность, опасность, нирвана."
				},
				{
					"eventType": "comment",
					"text": "map.sense - получение sense из карты под ногами, во время движения. Например если вокруг приятная атмосфера, плитки road могут быть с более высоким sense."
				},
				{
					"eventType": "comment",
					"text": "hit - прямой урон, игнорируя защиту, если равен 0 то выполняет функции калькулятора"
				},
				{
					"functionName": "sense",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "hero",
							"type": "string",
							"initialValue": "Nordik",
							"comment": "",
							"sid": 171418815654492
						},
						{
							"name": "influencer",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 844949309659223
						},
						{
							"name": "sense",
							"type": "number",
							"initialValue": "1",
							"comment": "1 to -1",
							"sid": 678387875364595
						},
						{
							"name": "hit",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 930732847493224
						},
						{
							"name": "impact",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 639815800341354
						},
						{
							"name": "action",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 459087970018203
						},
						{
							"name": "mind",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 272340930441742
						},
						{
							"name": "sensePlus",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 454285611084547
						},
						{
							"name": "level",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 516134073680996
						},
						{
							"name": "defend",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 392271637832091
						},
						{
							"name": "pulsFrame",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 802144205283430
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 212545920716508,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "hero"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "?"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 533688929149067,
							"disabled": true,
							"parameters": {
								"variable": "sense",
								"value": "action=\"ballStart\"? -0.06 : sense"
							}
						},
						{
							"type": "comment",
							"text": "сложение постоянного очарования"
						},
						{
							"id": "add-to-instvar",
							"objectClass": "aGame",
							"sid": 846775676536314,
							"parameters": {
								"instance-variable": "mEnch",
								"value": "Self.mindEnch=\"raflesia\"?0.11:0"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "aGame",
							"sid": 272635270170792,
							"disabled": true,
							"parameters": {
								"instance-variable": "mEnch",
								"value": "Self.mindState=\"meditation\"&aBook.hero=\"Nord\"?0.3: Self.mindState=\"meditation\"&aBook.hero=\"Nordik\"?0.1:0"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "aGame",
							"sid": 629108512850193,
							"disabled": true,
							"parameters": {
								"instance-variable": "mEnch",
								"value": "Self.mindMapImpact=\"inSwamp\"?0.15:0"
							}
						},
						{
							"type": "comment",
							"text": "сумма воздействий"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 518263096813262,
							"parameters": {
								"variable": "sensePlus",
								"value": "influencer=\"puls\"? sense*impact+(aGame.mBust)+(aGame.mEnch): sense*impact+(aGame.mBust)"
							}
						},
						{
							"type": "comment",
							"text": "если сумма положительная, защита отключается для максимального воздействия"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 147069140591917,
							"parameters": {
								"variable": "defend",
								"value": "sensePlus>0?1:aGame.mindDefend"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 819937635134620,
							"parameters": {
								"variable": "level",
								"value": "aGame.mindLevel"
							}
						},
						{
							"type": "comment",
							"text": "итоговое вычисление воздействия"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 371044170478762,
							"parameters": {
								"variable": "hit",
								"value": "hit=0?sensePlus/level/defend:hit"
							}
						},
						{
							"id": "set-text",
							"objectClass": "info",
							"sid": 744706426941962,
							"disabled": true,
							"parameters": {
								"text": "aGame.mEnch"
							}
						},
						{
							"id": "set-text",
							"objectClass": "help",
							"sid": 450527774516313,
							"disabled": true,
							"parameters": {
								"text": "sense"
							}
						},
						{
							"type": "comment",
							"text": "воздействие прибавляется к сознанию Нордика"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 602298343769793,
							"parameters": {
								"variable": "mind",
								"value": "clamp(aGame.mind+hit,0,10)"
							}
						},
						{
							"type": "comment",
							"text": "разовый буст обнуляется"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 794133499995939,
							"parameters": {
								"instance-variable": "mBust",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 949566647695597,
							"parameters": {
								"instance-variable": "mEnch",
								"value": "0"
							}
						},
						{
							"type": "comment",
							"text": "время пульса зависит от состояния сознания"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 960622873726976,
							"parameters": {
								"instance-variable": "puls",
								"value": "Self.mindState=\"idle\"?1.4:Self.mindState=\"run\"?0.5:Self.mindState=\"blackout\"?4:Self.mindState=\"meditation\"?1.1:Self.mindState=\"nirvana\"?1.5:Self.mindState=\"danger\"?0.3:Self.mindState=\"passion\"?0.7:1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "info",
							"sid": 280864818529741,
							"disabled": true,
							"parameters": {
								"text": "sense"
							}
						}
					],
					"sid": 835808564539666,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 257975293846851,
									"parameters": {
										"variable": "influencer",
										"comparison": 0,
										"value": "\"puls\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "перезапуск таймера пульса"
								},
								{
									"id": "start-timer",
									"objectClass": "indicator",
									"sid": 733368835203656,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "aGame.puls",
										"type": "once",
										"tag": "\"puls\""
									}
								}
							],
							"sid": 537122814595488
						},
						{
							"eventType": "comment",
							"text": "если функция была вызвана не пульсом"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 708345696274234,
									"parameters": {
										"variable": "influencer",
										"comparison": 1,
										"value": "\"ballStart\""
									}
								}
							],
							"actions": [],
							"sid": 396789177364169,
							"disabled": true
						},
						{
							"eventType": "comment",
							"text": "триггер негативного или позитивного изменения"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 646776371998167,
									"parameters": {
										"first-value": "mind",
										"comparison": 1,
										"second-value": "aGame.mind"
									}
								}
							],
							"actions": [
								{
									"id": "callselffunction0",
									"objectClass": "indicator",
									"sid": 888473437050632,
									"behaviorType": "sfPoint",
									"parameters": {
										"function_name:0": "aGame.mind<mind?\"pulsDown\":\"pulsUp\""
									}
								}
							],
							"sid": 177426178689682
						},
						{
							"eventType": "comment",
							"text": "триггер смены анимации индикатора (изменение сознания на 1/10)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 345201916363013,
									"parameters": {
										"first-value": "ceil(mind)",
										"comparison": 1,
										"second-value": "ceil(aGame.mind)"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aGame",
									"sid": 237311858236182,
									"parameters": {
										"instance-variable": "mind",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "callselffunction0",
									"objectClass": "indicator",
									"sid": 169284371178306,
									"behaviorType": "sfPoint",
									"parameters": {
										"function_name:0": "ceil(aGame.mind)<ceil(mind)?\"indiDown\":\"indiUp\""
									}
								}
							],
							"sid": 527019685968325
						},
						{
							"eventType": "comment",
							"text": "проверка окончена"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aGame",
									"sid": 811340017258446,
									"parameters": {
										"instance-variable": "mind",
										"value": "mind"
									}
								}
							],
							"sid": 400937805406651
						},
						{
							"eventType": "comment",
							"text": "полное восстановление"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "aGame",
									"sid": 718046431686421,
									"parameters": {
										"instance-variable": "mind",
										"comparison": 0,
										"value": "10"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aGame",
									"sid": 600401420644768,
									"parameters": {
										"instance-variable": "mindState",
										"comparison": 1,
										"value": "\"full\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aGame",
									"sid": 727547635030784,
									"parameters": {
										"instance-variable": "mindState",
										"value": "\"full\""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "indicator",
									"sid": 211802120571426,
									"behaviorType": "sfPoint",
									"parameters": {
										"function_name:0": "\"full\""
									}
								}
							],
							"sid": 326427680412746
						},
						{
							"eventType": "comment",
							"text": "коллапс сознания"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "aGame",
									"sid": 879854845866381,
									"parameters": {
										"instance-variable": "mind",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "aGame",
									"sid": 701477587044774,
									"parameters": {
										"instance-variable": "mindState",
										"comparison": 1,
										"value": "\"blackout\""
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "aGame",
									"sid": 913646600424223,
									"parameters": {
										"instance-variable": "blackout"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aGame",
									"sid": 281230253382576,
									"parameters": {
										"instance-variable": "mindState",
										"value": "\"blackout\""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "indicator",
									"sid": 736816122715613,
									"behaviorType": "sfPoint",
									"parameters": {
										"function_name:0": "\"blackout\""
									}
								}
							],
							"sid": 241347891830563
						},
						{
							"eventType": "comment",
							"text": "\n\nвизуализация воздействия"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "анимация уровня захвата индикатора терниями"
								},
								{
									"id": "set-animation",
									"objectClass": "indiAnim",
									"sid": 514737763112648,
									"parameters": {
										"animation": "tokenat(\"a;b;c\",aGame.mentalLevel,\";\")&ceil(aGame.mind)",
										"from": "current-frame"
									}
								},
								{
									"id": "set-text",
									"objectClass": "help",
									"sid": 185186081960308,
									"disabled": true,
									"parameters": {
										"text": "indiAnim.AnimationName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "info",
									"sid": 659597215988456,
									"disabled": true,
									"parameters": {
										"text": "hit<0&round(hit*100)=0?-1:floor(hit*100)"
									}
								}
							],
							"sid": 990335869574235,
							"children": [
								{
									"eventType": "comment",
									"text": "три объекта визуализирующие пульс"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 893617773227594,
											"parameters": {
												"variable": "influencer",
												"comparison": 0,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 121712317926420,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 102703765367036,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 806289502672104,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 701681525168077
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 475765806187604
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 189234251480331,
											"parameters": {
												"variable": "influencer",
												"comparison": 0,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 351022253320164,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "1"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 693118742342051,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 194246864470134,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 899487837899758
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 415227519819532
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 855566281160602,
											"parameters": {
												"variable": "influencer",
												"comparison": 0,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 384071324338188,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 948399587554452,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 408434936650424
								},
								{
									"eventType": "comment",
									"text": "пять объектов, визуализирующие воздействия вне пульса (тем же способом)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 224692068484768,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "3"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 141847456215443,
											"parameters": {
												"variable": "influencer",
												"comparison": 1,
												"value": "\"puls\""
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 585372016118839,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 116764786209122,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 363165024800943
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 219032023937117
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 201236317160745,
											"parameters": {
												"variable": "influencer",
												"comparison": 1,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 367510163568205,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "4"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 707909976800686,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 999409744620095,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 648372889815759
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 521399423202711
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 582895808367645,
											"parameters": {
												"variable": "influencer",
												"comparison": 1,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 927784521469111,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "5"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 281255647263311,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 886949118864262,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 630910722848682
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 103316909342623
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 946542091055687,
											"parameters": {
												"variable": "influencer",
												"comparison": 1,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 550172029401319,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "6"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "indiPuls",
											"sid": 547640923734840,
											"parameters": {
												"animation": "\"stop\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 684752761648628,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 734672265984364
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 988960059215427
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 732928044880796,
											"parameters": {
												"variable": "influencer",
												"comparison": 1,
												"value": "\"puls\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "indiPuls",
											"sid": 744810447057273,
											"parameters": {
												"instance-variable": "ind",
												"comparison": 0,
												"value": "7"
											}
										}
									],
									"actions": [
										{
											"callFunction": "puls",
											"sid": 372375793917024,
											"parameters": [
												"indiPuls.ind",
												"hit"
											]
										}
									],
									"sid": 840884279327910
								}
							]
						},
						{
							"eventType": "comment",
							"text": "тернии индикатора - процедурная анимация"
						},
						{
							"eventType": "variable",
							"name": "tact",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 202581793880877
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "indiPuls",
									"sid": 678322078318614,
									"parameters": {
										"animation": "\"a10\""
									},
									"isInverted": true
								},
								{
									"id": "is-animation-playing",
									"objectClass": "indiPuls",
									"sid": 736210571679928,
									"parameters": {
										"animation": "\"a0\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-angle",
									"objectClass": "indiAnim",
									"sid": 444645248631266,
									"parameters": {
										"angle": "random(360)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 819344942761626,
									"parameters": {
										"variable": "tact",
										"value": "1"
									}
								}
							],
							"sid": 856495571361480,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 171160134559292,
											"parameters": {
												"variable": "tact",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "indiAnim",
											"sid": 742946372062936,
											"parameters": {
												"state": "not-mirrored"
											}
										},
										{
											"id": "set-flipped",
											"objectClass": "indiAnim",
											"sid": 393005369541903,
											"parameters": {
												"state": "not-flipped"
											}
										}
									],
									"sid": 739647367427921
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 240858642787519,
											"parameters": {
												"variable": "tact",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "indiAnim",
											"sid": 292271900597599,
											"parameters": {
												"state": "mirrored"
											}
										}
									],
									"sid": 629773701299030
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 204214288457600,
											"parameters": {
												"variable": "tact",
												"comparison": 0,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-flipped",
											"objectClass": "indiAnim",
											"sid": 104329871283366,
											"parameters": {
												"state": "flipped"
											}
										}
									],
									"sid": 924426977899203
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 285523974908782,
											"parameters": {
												"variable": "tact",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "indiAnim",
											"sid": 108759545130806,
											"parameters": {
												"state": "not-mirrored"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 639577081858115,
											"parameters": {
												"variable": "tact",
												"value": "-1"
											}
										}
									],
									"sid": 699819341692602
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "визуализация пульса и воздействий"
				},
				{
					"functionName": "puls",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ind",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 153156624450661
						},
						{
							"name": "hit",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 249454363668614
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "indiPuls",
							"sid": 253504046037214,
							"parameters": {
								"instance-variable": "ind",
								"comparison": 0,
								"value": "ind"
							}
						}
					],
					"actions": [
						{
							"id": "append-text",
							"objectClass": "help",
							"sid": 223079431437788,
							"disabled": true,
							"parameters": {
								"text": "hit"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "indiPuls",
							"sid": 283880641927458,
							"parameters": {
								"animation": "hit<0?\"puls-1\":hit=0?\"puls0\":\"puls1\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-size",
							"objectClass": "indiPuls",
							"sid": 312985970790242,
							"parameters": {
								"width": "indicator.Width",
								"height": "indicator.Width"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "indiPuls",
							"sid": 104519491831499,
							"disabled": true,
							"parameters": {
								"opacity": "hit<0?75:100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "indiPuls",
							"sid": 533459749286492,
							"parameters": {
								"mode": "enable",
								"effect": "\"Water\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "indiPuls",
							"sid": 896823939762207,
							"parameters": {
								"mode": "enable",
								"effect": "\"BetterOutline\""
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "indiPuls",
							"sid": 171462550614355,
							"parameters": {
								"effect": "\"BetterOutline\"",
								"parameter-index": "1",
								"value": "abs(hit*20)"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "indiPuls",
							"sid": 783573936978489,
							"parameters": {
								"effect": "\"BetterOutline\"",
								"parameter-index": "0",
								"value": "hit<0?rgba(0,0,0,0): rgba(255,255,255,0)"
							}
						}
					],
					"sid": 537567335911360
				},
				{
					"eventType": "comment",
					"text": "пульсация - завершение"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "indiPuls",
							"sid": 497364927719272
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "indiPuls",
							"sid": 431011157960573,
							"parameters": {
								"animation": "\"stop\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "indiPuls",
							"sid": 234078737256473,
							"parameters": {
								"mode": "disable",
								"effect": "\"BetterOutline\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "indiPuls",
							"sid": 437313483183809,
							"parameters": {
								"mode": "disable",
								"effect": "\"Water\""
							}
						}
					],
					"sid": 732050720292275
				},
				{
					"eventType": "comment",
					"text": "\n\n\nтаймер пульса вызывает функцию sense"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "indicator",
							"sid": 924877864800470,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"puls\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 144148665777054,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [],
					"sid": 915717320139417,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "map",
									"sid": 677456809679831,
									"parameters": {
										"instance-variable": "hide"
									},
									"isInverted": true
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "basis",
									"sid": 317880334102486,
									"parameters": {
										"object": "map"
									}
								}
							],
							"actions": [],
							"sid": 349081683059949,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-topbottom",
											"objectClass": "map",
											"sid": 569557023025276,
											"parameters": {
												"which": "top"
											}
										}
									],
									"actions": [],
									"sid": 860955902210083,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "basis",
													"sid": 873224112645655,
													"parameters": {
														"instance-variable": "move"
													}
												}
											],
											"actions": [
												{
													"callFunction": "sense",
													"sid": 440180821374116,
													"parameters": [
														"aBook.hero",
														"\"puls\"",
														"map.sense",
														"0",
														"1",
														"\"run\"",
														"aGame.mind",
														"0",
														"1",
														"1",
														"0"
													]
												}
											],
											"sid": 770795020429386
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "basis",
													"sid": 942437043112204,
													"parameters": {
														"instance-variable": "move"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 363269623551993,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-animation-playing",
															"objectClass": "Nord",
															"sid": 437373041459507,
															"parameters": {
																"animation": "\"meditation\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "sense",
															"sid": 552801735015512,
															"parameters": [
																"aBook.hero",
																"\"puls\"",
																"map.senseIdle+Nord.mindSpirit",
																"0",
																"1",
																"\"idle\"",
																"aGame.mind",
																"0",
																"1",
																"1",
																"0"
															]
														}
													],
													"sid": 921080708915765
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 398912549732170
														},
														{
															"id": "is-animation-playing",
															"objectClass": "Nordik",
															"sid": 849829360048860,
															"parameters": {
																"animation": "\"meditation\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "sense",
															"sid": 274297398518729,
															"parameters": [
																"aBook.hero",
																"\"puls\"",
																"map.senseIdle+Nordik.mindSpirit",
																"0",
																"1",
																"\"idle\"",
																"aGame.mind",
																"0",
																"1",
																"1",
																"0"
															]
														}
													],
													"sid": 512277251939657
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 342962399323682
														}
													],
													"actions": [
														{
															"callFunction": "sense",
															"sid": 954732623433378,
															"parameters": [
																"aBook.hero",
																"\"puls\"",
																"map.senseIdle",
																"0",
																"1",
																"\"idle\"",
																"aGame.mind",
																"0",
																"1",
																"1",
																"0"
															]
														}
													],
													"sid": 725882247361952
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 272401209290082
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "basis",
													"sid": 331127606131872,
													"parameters": {
														"instance-variable": "move"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 811669541092633,
											"disabled": true
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 563978672520802
								}
							],
							"actions": [
								{
									"callFunction": "sense",
									"sid": 118938149343015,
									"parameters": [
										"aBook.hero",
										"\"puls\"",
										"0",
										"-0.01",
										"1",
										"\"nan\"",
										"aGame.mind",
										"0",
										"1",
										"1",
										"0"
									]
								}
							],
							"sid": 245340509836926
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n\n\n\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 191227295842082,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"pulsDown\""
							}
						}
					],
					"actions": [],
					"sid": 537881931051202
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 573033254959132,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"pulsUp\""
							}
						}
					],
					"actions": [],
					"sid": 889610975859164
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 829533974907328,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"indiDoun\""
							}
						}
					],
					"actions": [],
					"sid": 357453607901131
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 611622474788204,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"indiUp\""
							}
						}
					],
					"actions": [],
					"sid": 527724747997379
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "basis",
							"sid": 264081002177266,
							"behaviorType": "sf",
							"parameters": {
								"function_name:0": "\"\""
							}
						}
					],
					"actions": [],
					"sid": 991972920865363
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 261333487487255,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"meditation\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 508826627020758,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "aIns",
							"sid": 407654855174886,
							"parameters": {
								"instance-variable": "gameState",
								"value": "\"meditation\""
							}
						},
						{
							"customAction": "stop",
							"objectClass": "basis",
							"sid": 547249301528616
						}
					],
					"sid": 841231549047601
				},
				{
					"eventType": "comment",
					"text": "\n\n\n безумие"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 870614437725581,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"blackout\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "basis",
							"sid": 252976911848893,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "person",
							"sid": 797206008571371,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [
						{
							"id": "stop-timer",
							"objectClass": "indicator",
							"sid": 248919084744504,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"puls\""
							}
						},
						{
							"id": "start-timer",
							"objectClass": "indicator",
							"sid": 215148390700913,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "5",
								"type": "once",
								"tag": "\"puls\""
							}
						}
					],
					"sid": 529356213473026,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "aBook",
									"sid": 890846655143522,
									"parameters": {
										"instance-variable": "hero",
										"comparison": 0,
										"value": "\"Nord\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "aGame",
									"sid": 386944969486893,
									"parameters": {
										"instance-variable": "NordikNextForm",
										"value": "\"Nordik\""
									}
								},
								{
									"callFunction": "animPers",
									"sid": 266928140119516,
									"parameters": [
										"person.UID",
										"\"transNordik\"",
										"3",
										"0",
										"777",
										"0"
									]
								}
							],
							"sid": 959759473236834
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 680470126153285
								}
							],
							"actions": [
								{
									"callFunction": "blackout",
									"sid": 763547086807410
								}
							],
							"sid": 252267902808123
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n\n\n"
				},
				{
					"functionName": "blackout",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "jumper",
							"sid": 359696905008873,
							"parameters": {
								"instance-variable": "name",
								"comparison": 0,
								"value": "aBook.hero"
							}
						}
					],
					"actions": [],
					"sid": 278592534690409,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "jumper",
									"sid": 609386577797576,
									"parameters": {
										"instance-variable": "jump"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "ioTarget",
									"sid": 671474230268187,
									"parameters": {
										"instance-variable": "triggerName",
										"comparison": 0,
										"value": "jumper.name"
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 310336633355522,
									"parameters": {
										"tag": "\"land\""
									}
								},
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 790296701303765,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "aGame",
									"sid": 762364461681082,
									"parameters": {
										"instance-variable": "blackout",
										"value": "true"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 658961551636076,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"noControl\""
									}
								},
								{
									"callFunction": "animPers",
									"sid": 193534605435254,
									"parameters": [
										"Nordik.UID",
										"\"madness\"",
										"5",
										"0",
										"777",
										"0"
									]
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 410357103838702,
									"parameters": {
										"group-name": "\"blackout\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 840038672593033,
									"parameters": {
										"group-name": "\"blackout\"&aTools.location",
										"state": "activated"
									}
								}
							],
							"sid": 600902382090552
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 859349198537035
								}
							],
							"actions": [
								{
									"id": "callselffunction0",
									"objectClass": "basis",
									"sid": 608063334372581,
									"behaviorType": "sf",
									"parameters": {
										"function_name:0": "\"stop\""
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "aGame",
									"sid": 236869215264435,
									"parameters": {
										"instance-variable": "blackout",
										"value": "true"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "aBook",
									"sid": 499400442049580,
									"parameters": {
										"instance-variable": "mod",
										"value": "\"noControl\""
									}
								},
								{
									"callFunction": "animPers",
									"sid": 663836699278526,
									"parameters": [
										"Nordik.UID",
										"\"madness\"",
										"5",
										"0",
										"777",
										"0"
									]
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 405869857365372,
									"parameters": {
										"group-name": "\"blackout\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 614462911784807,
									"parameters": {
										"group-name": "\"blackout\"&aTools.location",
										"state": "activated"
									}
								}
							],
							"sid": 952866278925866
						}
					]
				},
				{
					"eventType": "comment",
					"text": "\n\n"
				},
				{
					"eventType": "comment",
					"text": "\n\n\n   реакция сознания"
				},
				{
					"functionName": "subconscious",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 500338162306273,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 456203962560538
						}
					]
				}
			],
			"sid": 920333260522133
		},
		{
			"eventType": "comment",
			"text": ""
		},
		{
			"eventType": "block",
			"conditions": [],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "info",
					"sid": 909197693206230,
					"parameters": {
						"x": "Nordik.X",
						"y": "Nordik.Y"
					}
				},
				{
					"id": "set-position",
					"objectClass": "help",
					"sid": 491794130256056,
					"parameters": {
						"x": "Nordik.X",
						"y": "Nordik.Y+40"
					}
				}
			],
			"sid": 501721352309622,
			"disabled": true
		},
		{
			"eventType": "comment",
			"text": "\n\n\n\n\n\nлинейный визуализатор времени жизни для отладки"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "temp1",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "variable",
					"name": "t",
					"type": "number",
					"initialValue": "10",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 508838676195001
				},
				{
					"eventType": "variable",
					"name": "tt",
					"type": "number",
					"initialValue": "10",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 501796975861919
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 862264871142354
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "testTime",
							"sid": 942999208282259
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "indiPuls",
							"sid": 902999415011503,
							"parameters": {
								"object": "indicator",
								"image-point-optional": "0"
							}
						},
						{
							"id": "move-to-object",
							"objectClass": "indiPuls",
							"sid": 712738673544694,
							"parameters": {
								"where": "in-front",
								"object": "indiAnim"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "indicator",
							"sid": 485444311220408,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "aGame.puls",
								"type": "once",
								"tag": "\"puls\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 746509625525966,
							"parameters": {
								"variable": "t",
								"value": "10"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 465878340393313,
							"disabled": true,
							"parameters": {
								"seconds": "0",
								"use-timescale": true
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 495845059890036,
							"parameters": {
								"object-to-create": "testTime",
								"layer": "\"shad\"",
								"x": "500",
								"y": "1000+t*50",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-width",
							"objectClass": "testTime",
							"sid": 217108822718440,
							"parameters": {
								"width": "0"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "testTime",
							"sid": 946653030897937,
							"parameters": {
								"instance-variable": "on",
								"value": "true"
							}
						}
					],
					"sid": 482110372659532
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 907974389663633,
							"parameters": {
								"variable": "tt",
								"value": "ceil(aGame.mind)"
							}
						}
					],
					"sid": 687913198486740
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "testTime",
							"sid": 307040627323241,
							"parameters": {
								"instance-variable": "on"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 188848106382914,
							"parameters": {
								"first-value": "tt",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-width",
							"objectClass": "testTime",
							"sid": 639740433791313,
							"disabled": true,
							"parameters": {
								"width": "(Self.Width+1)"
							}
						},
						{
							"id": "set-width",
							"objectClass": "testTime",
							"sid": 548931292531964,
							"parameters": {
								"width": "Self.Width+dt*60"
							}
						}
					],
					"sid": 730197454722094
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 202228182920523,
							"parameters": {
								"first-value": "tt",
								"comparison": 2,
								"second-value": "t"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 905020869118914,
							"parameters": {
								"first-value": "tt",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [],
					"sid": 386332822541253,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 531383743929221,
									"parameters": {
										"variable": "t",
										"value": "tt"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "testTime",
									"sid": 446835946234595,
									"parameters": {
										"instance-variable": "on",
										"value": "false"
									}
								}
							],
							"sid": 644522902372562
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 653307394613902,
									"parameters": {
										"object-to-create": "testTime",
										"layer": "\"shad\"",
										"x": "500",
										"y": "1000+t*50",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-width",
									"objectClass": "testTime",
									"sid": 873106636097855,
									"parameters": {
										"width": "0"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "testTime",
									"sid": 949190460562689,
									"parameters": {
										"instance-variable": "on",
										"value": "true"
									}
								}
							],
							"sid": 526690811505944
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onselffunction0",
							"objectClass": "indicator",
							"sid": 566180042592408,
							"behaviorType": "sfPoint",
							"parameters": {
								"function_name:0": "\"blackout\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "testTime",
							"sid": 501238457036997
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 124482183945447,
							"parameters": {
								"seconds": "1",
								"use-timescale": true
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "aGame",
							"sid": 322524972208520,
							"parameters": {
								"instance-variable": "mind",
								"value": "10"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "indiAnim",
							"sid": 825373798201900,
							"parameters": {
								"animation": "\"a10\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-width",
							"objectClass": "testTime",
							"sid": 899106330735108,
							"parameters": {
								"width": "0"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "testTime",
							"sid": 641038015198522,
							"parameters": {
								"instance-variable": "on",
								"value": "true"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 437357261573514,
							"parameters": {
								"variable": "t",
								"value": "10"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 257953980869380,
							"parameters": {
								"variable": "tt",
								"value": "10"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 579091049194453,
							"parameters": {
								"object-to-create": "testTime",
								"layer": "\"shad\"",
								"x": "500",
								"y": "1000+t*50",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 907082813859537
				},
				{
					"eventType": "comment",
					"text": "cuteness+charisma    \nwisdom+power\nlogics+vision\n\n"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "basis",
							"sid": 905359037518119,
							"parameters": {
								"instance-variable": "move"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "basis",
							"sid": 408923250787929,
							"parameters": {
								"instance-variable": "move"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Nordik",
							"sid": 876590306518520,
							"parameters": {
								"instance-variable": "mainTask",
								"comparison": 0,
								"value": "\"Nordik\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Nordik",
							"sid": 516151258109788,
							"parameters": {
								"instance-variable": "speedImpuls",
								"comparison": 4,
								"value": "1"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Nordik",
							"sid": 887240514264380,
							"parameters": {
								"instance-variable": "state",
								"comparison": 0,
								"value": "\"idle\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Nordik",
							"sid": 397224886646032,
							"parameters": {
								"animation": "\"jumpC\""
							}
						}
					],
					"actions": [],
					"sid": 232712716378108,
					"disabled": true
				},
				{
					"eventType": "comment",
					"text": ""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 435982242933656
						}
					],
					"actions": [
						{
							"callFunction": "sense",
							"sid": 669343977263657,
							"parameters": [
								"\"Nordik\"",
								"\"map\"",
								"map.sense",
								"0",
								"1",
								"\"jump\"",
								"0",
								"0",
								"1",
								"1",
								"0"
							]
						}
					],
					"sid": 450331414042745,
					"disabled": true
				}
			],
			"sid": 397616991225123
		}
	],
	"sid": 519481955057203
}